<!-- Tampilan Admin -->

@page "/dashboard" 
@* @using MyApp.BlazorUI.Models;
@using MyApp.BlazorUI.Services;
@inject ITaskService TaskService *@

<PageTitle>Dashboard Admin</PageTitle>

<MudText Typo="Typo.h5" Class="mt-16 mb-4">Dashboard</MudText>

<!-- Statistics Cards -->
<MudGrid Class="mb-6">
    <MudItem xs="12" sm="6" md="3">
        <MudCard Elevation="2">
            <MudCardContent>
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <MudText Typo="Typo.body2" Color="Color.Secondary">Total User Active</MudText>
                        <MudText Typo="Typo.h4">@_totalUserActive</MudText>
                    </div>
                    <MudIcon Icon="@Icons.Material.Filled.Assignment" Color="Color.Primary" Size="Size.Large" />
                </div>
            </MudCardContent>
        </MudCard>
    </MudItem>

    <MudItem xs="12" sm="6" md="3">
        <MudCard Elevation="2">
            <MudCardContent>
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <MudText Typo="Typo.body2" Color="Color.Secondary">Total Payment</MudText>
                        <MudText Typo="Typo.h4">@_totalPayment</MudText>
                    </div>
                    <MudIcon Icon="@Icons.Material.Filled.PlayArrow" Color="Color.Warning" Size="Size.Large" />
                </div>
            </MudCardContent>
        </MudCard>
    </MudItem>

    <MudItem xs="12" sm="6" md="3">
        <MudCard Elevation="2">
            <MudCardContent>
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <MudText Typo="Typo.body2" Color="Color.Secondary">Total Member</MudText>
                        <MudText Typo="Typo.h4">@_totalMember</MudText>
                    </div>
                    <MudIcon Icon="@Icons.Material.Filled.CheckCircle" Color="Color.Success" Size="Size.Large" />
                </div>
            </MudCardContent>
        </MudCard>
    </MudItem>

</MudGrid>


@code {
    @* private List<TaskItem> _recentTasks = new(); *@
    private int _totalUserActive = 0;
    private int _totalPayment = 0;
    private int _totalMember = 0;

    @* protected override async Task OnInitializedAsync()
    {
        await LoadDashboardData();
    } *@

    @* private async Task LoadDashboardData()
    {
        _recentTasks = await TaskService.GetTasksAsync();
        _totalUserActive = _recentTasks.Count;
        _totalPayment = _recentTasks.Count(t => t.Status == WorkTaskStatus.InProgress);
        _totalMember = _recentTasks.Count(t => t.Status == WorkTaskStatus.Done);
    }

    private Color GetTaskColor(WorkTaskStatus status)
    {
        return status switch
        {
            WorkTaskStatus.Todo => Color.Info,
            WorkTaskStatus.InProgress => Color.Warning,
            WorkTaskStatus.Review => Color.Secondary,
            WorkTaskStatus.Done => Color.Success,
            _ => Color.Default
        };
    } *@

}
