Ûr
FD:\BootcampProject\src\04.Application\Validators\CategoryValidators.cs
	namespace 	
MyApp
 
. 
Application 
. 

Validators &
{ 
public		 

class		 &
CreateCategoryDtoValidator		 +
:		, -
AbstractValidator		. ?
<		? @$
CreateCategoryRequestDto		@ X
>		X Y
{

 
public &
CreateCategoryDtoValidator )
() *
)* +
{ 	
RuleFor 
( 
x 
=> 
x 
. 
Name 
)  
. 
NotEmpty 
( 
) 
. 
WithMessage '
(' (
$str( C
)C D
. 
Length 
( 
$num 
, 
$num 
) 
. 
WithMessage *
(* +
$str+ ^
)^ _
;_ `
RuleFor 
( 
x 
=> 
x 
. 
Description &
)& '
. 
MaximumLength 
( 
$num #
)# $
.$ %
WithMessage% 0
(0 1
$str1 \
)\ ]
;] ^
RuleFor 
( 
x 
=> 
x 
. 
ImageUrl #
)# $
. 
NotEmpty 
( 
) 
. 
WithMessage '
(' (
$str( D
)D E
;E F
} 	
} 
public   

class   &
UpdateCategoryDtoValidator   +
:  , -
AbstractValidator  . ?
<  ? @$
UpdateCategoryRequestDto  @ X
>  X Y
{!! 
public%% &
UpdateCategoryDtoValidator%% )
(%%) *
)%%* +
{&& 	
RuleFor'' 
('' 
x'' 
=>'' 
x'' 
.'' 
Name'' 
)''  
.(( 
NotEmpty(( 
((( 
)(( 
.(( 
WithMessage(( '
(((' (
$str((( C
)((C D
.)) 
Length)) 
()) 
$num)) 
,)) 
$num)) 
))) 
.)) 
WithMessage)) *
())* +
$str))+ _
)))_ `
;))` a
RuleFor++ 
(++ 
x++ 
=>++ 
x++ 
.++ 
Description++ &
)++& '
.,, 
MaximumLength,, 
(,, 
$num,, #
),,# $
.,,$ %
WithMessage,,% 0
(,,0 1
$str,,1 \
),,\ ]
;,,] ^
RuleFor.. 
(.. 
x.. 
=>.. 
x.. 
... 
ImageUrl.. #
)..# $
.// 
NotEmpty// 
(// 
)// 
.// 
WithMessage// '
(//' (
$str//( D
)//D E
;//E F
}00 	
}11 
public66 

class66 $
CreateCourseDtoValidator66 )
:66* +
AbstractValidator66, =
<66= >"
CreateCourseRequestDto66> T
>66T U
{77 
public;; $
CreateCourseDtoValidator;; '
(;;' (
);;( )
{<< 	
RuleFor== 
(== 
x== 
=>== 
x== 
.== 
Name== 
)==  
.>> 
NotEmpty>> 
(>> 
)>> 
.>> 
WithMessage>> '
(>>' (
$str>>( A
)>>A B
.?? 
Length?? 
(?? 
$num?? 
,?? 
$num?? 
)?? 
.??  
WithMessage??  +
(??+ ,
$str??, ^
)??^ _
;??_ `
RuleForAA 
(AA 
xAA 
=>AA 
xAA 
.AA 
DescriptionAA &
)AA& '
.BB 
NotEmptyBB 
(BB 
)BB 
.BB 
WithMessageBB '
(BB' (
$strBB( A
)BBA B
.CC 
MaximumLengthCC 
(CC 
$numCC #
)CC# $
.CC$ %
WithMessageCC% 0
(CC0 1
$strCC1 \
)CC\ ]
;CC] ^
RuleForEE 
(EE 
xEE 
=>EE 
xEE 
.EE 
PriceEE  
)EE  !
.FF 
GreaterThanFF 
(FF 
$numFF 
)FF 
.FF  
WithMessageFF  +
(FF+ ,
$strFF, N
)FFN O
.GG 
LessThanOrEqualToGG "
(GG" #
$numGG# ,
)GG, -
.GG- .
WithMessageGG. 9
(GG9 :
$strGG: _
)GG_ `
;GG` a
RuleForII 
(II 
xII 
=>II 
xII 
.II 
CategoryRefIdII (
)II( )
.JJ 
NotEmptyJJ 
(JJ 
)JJ 
.JJ 
WithMessageJJ '
(JJ' (
$strJJ( D
)JJD E
;JJE F
RuleForLL 
(LL 
xLL 
=>LL 
xLL 
.LL 
ImageUrlLL #
)LL# $
.MM 
NotEmptyMM 
(MM 
)MM 
.MM 
WithMessageMM '
(MM' (
$strMM( B
)MMB C
;MMC D
}NN 	
}OO 
publicTT 

classTT $
UpdateCourseDtoValidatorTT )
:TT* +
AbstractValidatorTT, =
<TT= >"
UpdateCourseRequestDtoTT> T
>TTT U
{UU 
publicYY $
UpdateCourseDtoValidatorYY '
(YY' (
)YY( )
{ZZ 	
RuleFor[[ 
([[ 
x[[ 
=>[[ 
x[[ 
.[[ 
Name[[ 
)[[  
.\\ 
NotEmpty\\ 
(\\ 
)\\ 
.\\ 
WithMessage\\ '
(\\' (
$str\\( A
)\\A B
.]] 
Length]] 
(]] 
$num]] 
,]] 
$num]] 
)]] 
.]]  
WithMessage]]  +
(]]+ ,
$str]], ^
)]]^ _
;]]_ `
RuleFor__ 
(__ 
x__ 
=>__ 
x__ 
.__ 
Description__ &
)__& '
.`` 
NotEmpty`` 
(`` 
)`` 
.`` 
WithMessage`` '
(``' (
$str``( A
)``A B
.aa 
MaximumLengthaa 
(aa 
$numaa #
)aa# $
.aa$ %
WithMessageaa% 0
(aa0 1
$straa1 \
)aa\ ]
;aa] ^
RuleForcc 
(cc 
xcc 
=>cc 
xcc 
.cc 
Pricecc  
)cc  !
.dd 
GreaterThandd 
(dd 
$numdd 
)dd 
.dd  
WithMessagedd  +
(dd+ ,
$strdd, N
)ddN O
.ee 
LessThanOrEqualToee "
(ee" #
$numee# ,
)ee, -
.ee- .
WithMessageee. 9
(ee9 :
$stree: _
)ee_ `
;ee` a
RuleForgg 
(gg 
xgg 
=>gg 
xgg 
.gg 
CategoryRefIdgg (
)gg( )
.hh 
NotEmptyhh 
(hh 
)hh 
.hh 
WithMessagehh '
(hh' (
$strhh( D
)hhD E
;hhE F
RuleForjj 
(jj 
xjj 
=>jj 
xjj 
.jj 
ImageUrljj #
)jj# $
.kk 
NotEmptykk 
(kk 
)kk 
.kk 
WithMessagekk '
(kk' (
$strkk( B
)kkB C
;kkC D
}ll 	
}mm 
publicpp 

classpp %
CreatePaymentDtoValidatorpp *
:pp+ ,
AbstractValidatorpp- >
<pp> ?)
CreatePaymentMethodRequestDtopp? \
>pp\ ]
{qq 
publicuu %
CreatePaymentDtoValidatoruu (
(uu( )
)uu) *
{vv 	
RuleForww 
(ww 
xww 
=>ww 
xww 
.ww 
Nameww 
)ww  
.xx 
NotEmptyxx 
(xx 
)xx 
.xx 
WithMessagexx '
(xx' (
$strxx( B
)xxB C
.yy 
Lengthyy 
(yy 
$numyy 
,yy 
$numyy 
)yy 
.yy 
WithMessageyy *
(yy* +
$stryy+ ]
)yy] ^
;yy^ _
RuleFor{{ 
({{ 
x{{ 
=>{{ 
x{{ 
.{{ 
LogoUrl{{ "
){{" #
.|| 
NotEmpty|| 
(|| 
)|| 
.|| 
WithMessage|| '
(||' (
$str||( B
)||B C
;||C D
}}} 	
}~~ 
public
ÉÉ 

class
ÉÉ '
UpdatePaymentDtoValidator
ÉÉ *
:
ÉÉ+ ,
AbstractValidator
ÉÉ- >
<
ÉÉ> ?+
UpdatePaymentMethodRequestDto
ÉÉ? \
>
ÉÉ\ ]
{
ÑÑ 
public
àà '
UpdatePaymentDtoValidator
àà (
(
àà( )
)
àà) *
{
ââ 	
RuleFor
ää 
(
ää 
x
ää 
=>
ää 
x
ää 
.
ää 
Name
ää 
)
ää  
.
ãã 
NotEmpty
ãã 
(
ãã 
)
ãã 
.
ãã 
WithMessage
ãã '
(
ãã' (
$str
ãã( B
)
ããB C
.
åå 
Length
åå 
(
åå 
$num
åå 
,
åå 
$num
åå 
)
åå 
.
åå 
WithMessage
åå *
(
åå* +
$str
åå+ ]
)
åå] ^
;
åå^ _
RuleFor
éé 
(
éé 
x
éé 
=>
éé 
x
éé 
.
éé 
LogoUrl
éé "
)
éé" #
.
èè 
NotEmpty
èè 
(
èè 
)
èè 
.
èè 
WithMessage
èè '
(
èè' (
$str
èè( B
)
èèB C
;
èèC D
}
êê 	
}
ëë 
public
îî 

class
îî '
CreateMyClassDtoValidator
îî *
:
îî+ ,
AbstractValidator
îî- >
<
îî> ?%
CreateMyClassRequestDto
îî? V
>
îîV W
{
ïï 
public
ôô '
CreateMyClassDtoValidator
ôô (
(
ôô( )
)
ôô) *
{
öö 	
RuleFor
õõ 
(
õõ 
x
õõ 
=>
õõ 
x
õõ 
.
õõ 
UserId
õõ !
)
õõ! "
.
úú 
NotEmpty
úú 
(
úú 
)
úú 
.
úú 
WithMessage
úú '
(
úú' (
$str
úú( <
)
úú< =
;
úú= >
RuleFor
ûû 
(
ûû 
x
ûû 
=>
ûû 
x
ûû 
.
ûû 

ScheduleId
ûû %
)
ûû% &
.
üü 
NotEmpty
üü 
(
üü 
)
üü 
.
üü 
WithMessage
üü '
(
üü' (
$str
üü( @
)
üü@ A
;
üüA B
}
†† 	
}
°° 
public
¶¶ 

class
¶¶ '
UpdateMyClassDtoValidator
¶¶ *
:
¶¶+ ,
AbstractValidator
¶¶- >
<
¶¶> ?%
UpdateMyClassRequestDto
¶¶? V
>
¶¶V W
{
ßß 
public
´´ '
UpdateMyClassDtoValidator
´´ (
(
´´( )
)
´´) *
{
¨¨ 	
RuleFor
≠≠ 
(
≠≠ 
x
≠≠ 
=>
≠≠ 
x
≠≠ 
.
≠≠ 
UserId
≠≠ !
)
≠≠! "
.
ÆÆ 
NotEmpty
ÆÆ 
(
ÆÆ 
)
ÆÆ 
.
ÆÆ 
WithMessage
ÆÆ '
(
ÆÆ' (
$str
ÆÆ( <
)
ÆÆ< =
;
ÆÆ= >
RuleFor
∞∞ 
(
∞∞ 
x
∞∞ 
=>
∞∞ 
x
∞∞ 
.
∞∞ 

ScheduleId
∞∞ %
)
∞∞% &
.
±± 
NotEmpty
±± 
(
±± 
)
±± 
.
±± 
WithMessage
±± '
(
±±' (
$str
±±( @
)
±±@ A
;
±±A B
}
≤≤ 	
}
≥≥ 
public
∂∂ 

class
∂∂ (
CreateScheduleDtoValidator
∂∂ +
:
∂∂, -
AbstractValidator
∂∂. ?
<
∂∂? @&
CreateScheduleRequestDto
∂∂@ X
>
∂∂X Y
{
∑∑ 
public
ªª (
CreateScheduleDtoValidator
ªª )
(
ªª) *
)
ªª* +
{
ºº 	
RuleFor
ΩΩ 
(
ΩΩ 
x
ΩΩ 
=>
ΩΩ 
x
ΩΩ 
.
ΩΩ 
Date
ΩΩ 
)
ΩΩ  
.
ææ 
NotEmpty
ææ 
(
ææ 
)
ææ 
.
ææ 
WithMessage
ææ '
(
ææ' (
$str
ææ( :
)
ææ: ;
;
ææ; <
RuleFor
¿¿ 
(
¿¿ 
x
¿¿ 
=>
¿¿ 
x
¿¿ 
.
¿¿ 
CourseId
¿¿ #
)
¿¿# $
.
¡¡ 
NotEmpty
¡¡ 
(
¡¡ 
)
¡¡ 
.
¡¡ 
WithMessage
¡¡ '
(
¡¡' (
$str
¡¡( >
)
¡¡> ?
;
¡¡? @
}
¬¬ 	
}
√√ 
public
»» 

class
»» (
UpdateScheduleDtoValidator
»» +
:
»», -
AbstractValidator
»». ?
<
»»? @&
UpdateScheduleRequestDto
»»@ X
>
»»X Y
{
…… 
public
ÕÕ (
UpdateScheduleDtoValidator
ÕÕ )
(
ÕÕ) *
)
ÕÕ* +
{
ŒŒ 	
RuleFor
œœ 
(
œœ 
x
œœ 
=>
œœ 
x
œœ 
.
œœ 
Date
œœ 
)
œœ  
.
–– 
NotEmpty
–– 
(
–– 
)
–– 
.
–– 
WithMessage
–– '
(
––' (
$str
––( :
)
––: ;
;
––; <
RuleFor
““ 
(
““ 
x
““ 
=>
““ 
x
““ 
.
““ 
CourseId
““ #
)
““# $
.
”” 
NotEmpty
”” 
(
”” 
)
”” 
.
”” 
WithMessage
”” '
(
””' (
$str
””( >
)
””> ?
;
””? @
}
‘‘ 	
}
’’ 
}◊◊ ˛g
BD:\BootcampProject\src\04.Application\Validators\AuthValidators.cs
	namespace 	
MyApp
 
. 
Application 
. 

Validators &
{ 
public 

class $
RegisterRequestValidator )
:* +
AbstractValidator, =
<= >
RegisterRequestDto> P
>P Q
{ 
public $
RegisterRequestValidator '
(' (
)( )
{		 	
RuleFor

 
(

 
x

 
=>

 
x

 
.

 
Name

 
)

  
. 
NotEmpty 
( 
) 
. 
WithMessage '
(' (
$str( :
): ;
. 
MinimumLength 
( 
$num  
)  !
.! "
WithMessage" -
(- .
$str. W
)W X
. 
MaximumLength 
( 
$num !
)! "
." #
WithMessage# .
(. /
$str/ V
)V W
;W X
RuleFor 
( 
x 
=> 
x 
. 
Email  
)  !
. 
NotEmpty 
( 
) 
. 
WithMessage '
(' (
$str( ;
); <
. 
EmailAddress 
( 
) 
.  
WithMessage  +
(+ ,
$str, B
)B C
. 
MaximumLength 
( 
$num "
)" #
.# $
WithMessage$ /
(/ 0
$str0 Y
)Y Z
;Z [
RuleFor 
( 
x 
=> 
x 
. 
NewPassword &
)& '
. 
NotEmpty 
( 
) 
. 
WithMessage '
(' (
$str( B
)B C
. 
MinimumLength 
( 
$num  
)  !
.! "
WithMessage" -
(- .
$str. _
)_ `
. 
MaximumLength 
( 
$num !
)! "
." #
WithMessage# .
(. /
$str/ ^
)^ _
. 
Matches 
( 
$str !
)! "
." #
WithMessage# .
(. /
$str/ h
)h i
. 
Matches 
( 
$str !
)! "
." #
WithMessage# .
(. /
$str/ h
)h i
. 
Matches 
( 
$str 
) 
.  
WithMessage  +
(+ ,
$str, a
)a b
. 
Matches 
( 
$str *
)* +
.+ ,
WithMessage, 7
(7 8
$str8 r
)r s
;s t
RuleFor 
( 
x 
=> 
x 
. 
ConfirmNewPassword -
)- .
. 
NotEmpty 
( 
) 
. 
WithMessage '
(' (
$str( J
)J K
. 
Equal 
( 
x 
=> 
x 
. 
NewPassword )
)) *
.* +
WithMessage+ 6
(6 7
$str7 O
)O P
;P Q
}   	
}!! 
public## 

class## (
ConfirmEmailRequestValidator## -
:##. /
AbstractValidator##0 A
<##A B"
ConfirmEmailRequestDto##B X
>##X Y
{$$ 
public%% (
ConfirmEmailRequestValidator%% +
(%%+ ,
)%%, -
{&& 	
RuleFor'' 
('' 
x'' 
=>'' 
x'' 
.'' 
Email''  
)''  !
.(( 
NotEmpty(( 
((( 
)(( 
.(( 
WithMessage(( '
(((' (
$str((( ;
)((; <
.)) 
EmailAddress)) 
()) 
))) 
.))  
WithMessage))  +
())+ ,
$str)), B
)))B C
;))C D
RuleFor** 
(** 
x** 
=>** 
x** 
.** "
EmailConfirmationToken** 1
)**1 2
.++ 
NotEmpty++ 
(++ 
)++ 
.++ 
WithMessage++ '
(++' (
$str++( N
)++N O
;++O P
},, 	
}-- 
public// 

class// !
LoginRequestValidator// &
://' (
AbstractValidator//) :
<//: ;
LoginRequestDto//; J
>//J K
{00 
public11 !
LoginRequestValidator11 $
(11$ %
)11% &
{22 	
RuleFor33 
(33 
x33 
=>33 
x33 
.33 
Email33  
)33  !
.44 
NotEmpty44 
(44 
)44 
.44 
WithMessage44 '
(44' (
$str44( ;
)44; <
.55 
EmailAddress55 
(55 
)55 
.55  
WithMessage55  +
(55+ ,
$str55, B
)55B C
;55C D
RuleFor66 
(66 
x66 
=>66 
x66 
.66 
Password66 #
)66# $
.77 
NotEmpty77 
(77 
)77 
.77 
WithMessage77 '
(77' (
$str77( >
)77> ?
;77? @
}88 	
}99 
public;; 

class;; (
RefreshTokenRequestValidator;; -
:;;. /
AbstractValidator;;0 A
<;;A B"
RefreshTokenRequestDto;;B X
>;;X Y
{<< 
public== (
RefreshTokenRequestValidator== +
(==+ ,
)==, -
{>> 	
RuleFor?? 
(?? 
x?? 
=>?? 
x?? 
.?? 
AccessToken?? &
)??& '
.@@ 
NotEmpty@@ 
(@@ 
)@@ 
.@@ 
WithMessage@@ '
(@@' (
$str@@( B
)@@B C
;@@C D
RuleForAA 
(AA 
xAA 
=>AA 
xAA 
.AA 
RefreshTokenAA '
)AA' (
.BB 
NotEmptyBB 
(BB 
)BB 
.BB 
WithMessageBB '
(BB' (
$strBB( C
)BBC D
;BBD E
}CC 	
}DD 
publicFF 

classFF *
ChangePasswordRequestValidatorFF /
:FF0 1
AbstractValidatorFF2 C
<FFC D$
ChangePasswordRequestDtoFFD \
>FF\ ]
{GG 
publicHH *
ChangePasswordRequestValidatorHH -
(HH- .
)HH. /
{II 	
RuleForJJ 
(JJ 
xJJ 
=>JJ 
xJJ 
.JJ 
PasswordJJ #
)JJ# $
.KK 
NotEmptyKK 
(KK 
)KK 
.KK 
WithMessageKK '
(KK' (
$strKK( >
)KK> ?
;KK? @
RuleForLL 
(LL 
xLL 
=>LL 
xLL 
.LL 
NewPasswordLL &
)LL& '
.MM 
NotEmptyMM 
(MM 
)MM 
.MM 
WithMessageMM '
(MM' (
$strMM( B
)MMB C
.NN 
MinimumLengthNN 
(NN 
$numNN  
)NN  !
.NN! "
WithMessageNN" -
(NN- .
$strNN. _
)NN_ `
.PP 
MaximumLengthPP 
(PP 
$numPP !
)PP! "
.PP" #
WithMessagePP# .
(PP. /
$strPP/ ^
)PP^ _
.QQ 
MatchesQQ 
(QQ 
$strQQ !
)QQ! "
.QQ" #
WithMessageQQ# .
(QQ. /
$strQQ/ h
)QQh i
.RR 
MatchesRR 
(RR 
$strRR !
)RR! "
.RR" #
WithMessageRR# .
(RR. /
$strRR/ h
)RRh i
.SS 
MatchesSS 
(SS 
$strSS 
)SS 
.SS  
WithMessageSS  +
(SS+ ,
$strSS, a
)SSa b
.VV 
MatchesVV 
(VV 
$strVV *
)VV* +
.VV+ ,
WithMessageVV, 7
(VV7 8
$strVV8 r
)VVr s
;VVs t
RuleForWW 
(WW 
xWW 
=>WW 
xWW 
.WW 
ConfirmNewPasswordWW -
)WW- .
.XX 
NotEmptyXX 
(XX 
)XX 
.XX 
WithMessageXX '
(XX' (
$strXX( J
)XXJ K
.YY 
EqualYY 
(YY 
xYY 
=>YY 
xYY 
.YY 
NewPasswordYY )
)YY) *
.YY* +
WithMessageYY+ 6
(YY6 7
$strYY7 O
)YYO P
;YYP Q
}ZZ 	
}[[ 
public]] 

class]] *
ForgotPasswordRequestValidator]] /
:]]0 1
AbstractValidator]]2 C
<]]C D$
ForgotPasswordRequestDto]]D \
>]]\ ]
{^^ 
public__ *
ForgotPasswordRequestValidator__ -
(__- .
)__. /
{`` 	
RuleForaa 
(aa 
xaa 
=>aa 
xaa 
.aa 
Emailaa  
)aa  !
.bb 
NotEmptybb 
(bb 
)bb 
.bb 
WithMessagebb '
(bb' (
$strbb( ;
)bb; <
.cc 
EmailAddresscc 
(cc 
)cc 
.cc  
WithMessagecc  +
(cc+ ,
$strcc, B
)ccB C
;ccC D
}dd 	
}ee 
publicgg 

classgg )
ResetPasswordRequestValidatorgg .
:gg/ 0
AbstractValidatorgg1 B
<ggB C#
ResetPasswordRequestDtoggC Z
>ggZ [
{hh 
publicii )
ResetPasswordRequestValidatorii ,
(ii, -
)ii- .
{jj 	
RuleForkk 
(kk 
xkk 
=>kk 
xkk 
.kk 
Emailkk  
)kk  !
.ll 
NotEmptyll 
(ll 
)ll 
.ll 
WithMessagell '
(ll' (
$strll( ;
)ll; <
.mm 
EmailAddressmm 
(mm 
)mm 
.mm  
WithMessagemm  +
(mm+ ,
$strmm, B
)mmB C
;mmC D
RuleFornn 
(nn 
xnn 
=>nn 
xnn 
.nn 
PasswordResetTokennn -
)nn- .
.oo 
NotEmptyoo 
(oo 
)oo 
.oo 
WithMessageoo '
(oo' (
$stroo( ;
)oo; <
;oo< =
RuleForpp 
(pp 
xpp 
=>pp 
xpp 
.pp 
NewPasswordpp &
)pp& '
.qq 
NotEmptyqq 
(qq 
)qq 
.qq 
WithMessageqq '
(qq' (
$strqq( B
)qqB C
.rr 
MinimumLengthrr 
(rr 
$numrr  
)rr  !
.rr! "
WithMessagerr" -
(rr- .
$strrr. _
)rr_ `
.tt 
MaximumLengthtt 
(tt 
$numtt !
)tt! "
.tt" #
WithMessagett# .
(tt. /
$strtt/ ^
)tt^ _
.uu 
Matchesuu 
(uu 
$struu !
)uu! "
.uu" #
WithMessageuu# .
(uu. /
$struu/ h
)uuh i
.vv 
Matchesvv 
(vv 
$strvv !
)vv! "
.vv" #
WithMessagevv# .
(vv. /
$strvv/ h
)vvh i
.ww 
Matchesww 
(ww 
$strww 
)ww 
.ww  
WithMessageww  +
(ww+ ,
$strww, a
)wwa b
.zz 
Matcheszz 
(zz 
$strzz *
)zz* +
.zz+ ,
WithMessagezz, 7
(zz7 8
$strzz8 r
)zzr s
;zzs t
RuleFor{{ 
({{ 
x{{ 
=>{{ 
x{{ 
.{{ 
ConfirmNewPassword{{ -
){{- .
.|| 
NotEmpty|| 
(|| 
)|| 
.|| 
WithMessage|| '
(||' (
$str||( J
)||J K
.}} 
Equal}} 
(}} 
x}} 
=>}} 
x}} 
.}} 
NewPassword}} )
)}}) *
.}}* +
WithMessage}}+ 6
(}}6 7
$str}}7 O
)}}O P
;}}P Q
}~~ 	
} 
}ÄÄ °t
>D:\BootcampProject\src\04.Application\Services\TokenService.cs
	namespace 	
MyApp
 
. 
Application 
. 
Services $
;$ %
public 
class 
TokenService 
: 
ITokenService )
{   
private!! 
readonly!! 
JwtSettings!!  
_jwtSettings!!! -
;!!- .
private"" 
readonly"" 
ILogger"" 
<"" 
TokenService"" )
>"") *
_logger""+ 2
;""2 3
public$$ 

TokenService$$ 
($$ 
JwtSettings$$ #
jwtSettings$$$ /
,$$/ 0
ILogger$$1 8
<$$8 9
TokenService$$9 E
>$$E F
logger$$G M
)$$M N
{%% 
_jwtSettings&& 
=&& 
jwtSettings&& "
;&&" #
_logger'' 
='' 
logger'' 
;'' 
}(( 
public.. 

string.. 
GenerateAccessToken.. %
(..% &
User..& *
user..+ /
)../ 0
{// 
var00 
tokenHandler00 
=00 
new00 #
JwtSecurityTokenHandler00 6
(006 7
)007 8
;008 9
if11 

(11 
string11 
.11 
IsNullOrEmpty11  
(11  !
_jwtSettings11! -
.11- .
	SecretKey11. 7
)117 8
)118 9
{22 	
throw33 
new33 %
InvalidOperationException33 /
(33/ 0
$str330 O
)33O P
;33P Q
}44 	
var55 
key55 
=55 
Encoding55 
.55 
UTF855 
.55  
GetBytes55  (
(55( )
_jwtSettings55) 5
.555 6
	SecretKey556 ?
)55? @
;55@ A
var99 
claims99 
=99 
BuildClaims99  
(99  !
user99! %
)99% &
;99& '
var;; 
tokenDescriptor;; 
=;; 
new;; !#
SecurityTokenDescriptor;;" 9
{<< 	
Subject== 
=== 
new== 
ClaimsIdentity== (
(==( )
claims==) /
)==/ 0
,==0 1
Expires>> 
=>> 
DateTime>> 
.>> 
UtcNow>> %
.>>% &

AddMinutes>>& 0
(>>0 1
_jwtSettings>>1 =
.>>= >(
AccessTokenExpirationMinutes>>> Z
)>>Z [
,>>[ \
Issuer?? 
=?? 
_jwtSettings?? !
.??! "
Issuer??" (
,??( )
Audience@@ 
=@@ 
_jwtSettings@@ #
.@@# $
Audience@@$ ,
,@@, -
SigningCredentialsAA 
=AA  
newAA! $
SigningCredentialsAA% 7
(AA7 8
newBB  
SymmetricSecurityKeyBB (
(BB( )
keyBB) ,
)BB, -
,BB- .
SecurityAlgorithmsCC "
.CC" #
HmacSha256SignatureCC# 6
)CC6 7
}DD 	
;DD	 

varFF 
tokenFF 
=FF 
tokenHandlerFF  
.FF  !
CreateTokenFF! ,
(FF, -
tokenDescriptorFF- <
)FF< =
;FF= >
returnGG 
tokenHandlerGG 
.GG 

WriteTokenGG &
(GG& '
tokenGG' ,
)GG, -
;GG- .
}HH 
publicNN 

ClaimsPrincipalNN 
?NN (
GetPrincipalFromExpiredTokenNN 8
(NN8 9
stringNN9 ?
tokenNN@ E
)NNE F
{OO 
varPP %
tokenValidationParametersPP %
=PP& '
newPP( +%
TokenValidationParametersPP, E
{QQ 	
ValidateAudienceRR 
=RR 
_jwtSettingsRR +
.RR+ ,
ValidateAudienceRR, <
,RR< =
ValidateIssuerSS 
=SS 
_jwtSettingsSS )
.SS) *
ValidateIssuerSS* 8
,SS8 9$
ValidateIssuerSigningKeyTT $
=TT% &
_jwtSettingsTT' 3
.TT3 4$
ValidateIssuerSigningKeyTT4 L
,TTL M
IssuerSigningKeyUU 
=UU 
newUU " 
SymmetricSecurityKeyUU# 7
(UU7 8
EncodingUU8 @
.UU@ A
UTF8UUA E
.UUE F
GetBytesUUF N
(UUN O
_jwtSettingsUUO [
.UU[ \
	SecretKeyUU\ e
)UUe f
)UUf g
,UUg h
ValidateLifetimeVV 
=VV 
falseVV $
,VV$ %
ValidIssuerWW 
=WW 
_jwtSettingsWW &
.WW& '
IssuerWW' -
,WW- .
ValidAudienceXX 
=XX 
_jwtSettingsXX (
.XX( )
AudienceXX) 1
}YY 	
;YY	 

var[[ 
tokenHandler[[ 
=[[ 
new[[ #
JwtSecurityTokenHandler[[ 6
([[6 7
)[[7 8
;[[8 9
try]] 
{^^ 	
var__ 
	principal__ 
=__ 
tokenHandler__ (
.__( )
ValidateToken__) 6
(__6 7
token__7 <
,__< =%
tokenValidationParameters__> W
,__W X
out__Y \
SecurityToken__] j
securityToken__k x
)__x y
;__y z
ifaa 
(aa 
securityTokenaa 
isaa  
notaa! $
JwtSecurityTokenaa% 5
jwtSecurityTokenaa6 F
||aaG I
!bb 
jwtSecurityTokenbb !
.bb! "
Headerbb" (
.bb( )
Algbb) ,
.bb, -
Equalsbb- 3
(bb3 4
SecurityAlgorithmsbb4 F
.bbF G

HmacSha256bbG Q
,bbQ R
StringComparisonbbS c
.bbc d&
InvariantCultureIgnoreCasebbd ~
)bb~ 
)	bb Ä
{cc 
throwdd 
newdd "
SecurityTokenExceptiondd 0
(dd0 1
$strdd1 @
)dd@ A
;ddA B
}ee 
returngg 
	principalgg 
;gg 
}hh 	
catchii 
(ii 
	Exceptionii 
exii 
)ii 
{jj 	
_loggerkk 
.kk 

LogWarningkk 
(kk 
exkk !
,kk! "
$strkk# O
)kkO P
;kkP Q
returnll 
nullll 
;ll 
}mm 	
}nn 
publictt 

asynctt 
Tasktt 
<tt 
booltt 
>tt 
IsTokenValidAsynctt -
(tt- .
stringtt. 4
tokentt5 :
)tt: ;
{uu 
tryvv 
{ww 	
varxx 
tokenHandlerxx 
=xx 
newxx "#
JwtSecurityTokenHandlerxx# :
(xx: ;
)xx; <
;xx< =
varyy 
keyyy 
=yy 
Encodingyy 
.yy 
UTF8yy #
.yy# $
GetBytesyy$ ,
(yy, -
_jwtSettingsyy- 9
.yy9 :
	SecretKeyyy: C
)yyC D
;yyD E
var{{ %
tokenValidationParameters{{ )
={{* +
new{{, /%
TokenValidationParameters{{0 I
{|| $
ValidateIssuerSigningKey}} (
=}}) *
true}}+ /
,}}/ 0
IssuerSigningKey~~  
=~~! "
new~~# & 
SymmetricSecurityKey~~' ;
(~~; <
key~~< ?
)~~? @
,~~@ A
ValidateIssuer 
=  
_jwtSettings! -
.- .
ValidateIssuer. <
,< =
ValidIssuer
ÄÄ 
=
ÄÄ 
_jwtSettings
ÄÄ *
.
ÄÄ* +
Issuer
ÄÄ+ 1
,
ÄÄ1 2
ValidateAudience
ÅÅ  
=
ÅÅ! "
_jwtSettings
ÅÅ# /
.
ÅÅ/ 0
ValidateAudience
ÅÅ0 @
,
ÅÅ@ A
ValidAudience
ÇÇ 
=
ÇÇ 
_jwtSettings
ÇÇ  ,
.
ÇÇ, -
Audience
ÇÇ- 5
,
ÇÇ5 6
ValidateLifetime
ÉÉ  
=
ÉÉ! "
true
ÉÉ# '
,
ÉÉ' (
	ClockSkew
ÑÑ 
=
ÑÑ 
TimeSpan
ÑÑ $
.
ÑÑ$ %
FromMinutes
ÑÑ% 0
(
ÑÑ0 1
_jwtSettings
ÑÑ1 =
.
ÑÑ= >
	ClockSkew
ÑÑ> G
)
ÑÑG H
}
ÖÖ 
;
ÖÖ 
tokenHandler
áá 
.
áá 
ValidateToken
áá &
(
áá& '
token
áá' ,
,
áá, -'
tokenValidationParameters
áá. G
,
ááG H
out
ááI L
SecurityToken
ááM Z
validatedToken
áá[ i
)
áái j
;
ááj k
return
àà 
await
àà 
Task
àà 
.
àà 

FromResult
àà (
(
àà( )
true
àà) -
)
àà- .
;
àà. /
}
ââ 	
catch
ää 
(
ää 
	Exception
ää 
ex
ää 
)
ää 
{
ãã 	
_logger
åå 
.
åå 

LogWarning
åå 
(
åå 
ex
åå !
,
åå! "
$str
åå# <
)
åå< =
;
åå= >
return
çç 
await
çç 
Task
çç 
.
çç 

FromResult
çç (
(
çç( )
false
çç) .
)
çç. /
;
çç/ 0
}
éé 	
}
èè 
private
ïï 
List
ïï 
<
ïï 
Claim
ïï 
>
ïï 
BuildClaims
ïï #
(
ïï# $
User
ïï$ (
user
ïï) -
)
ïï- .
{
ññ 
var
óó 
claims
óó 
=
óó 
new
óó 
List
óó 
<
óó 
Claim
óó #
>
óó# $
{
òò 	
new
õõ 
(
õõ %
JwtRegisteredClaimNames
õõ '
.
õõ' (
Sub
õõ( +
,
õõ+ ,
user
õõ- 1
.
õõ1 2
RefId
õõ2 7
.
õõ7 8
ToString
õõ8 @
(
õõ@ A
)
õõA B
)
õõB C
,
õõC D
new
úú 
(
úú %
JwtRegisteredClaimNames
úú '
.
úú' (
Email
úú( -
,
úú- .
user
úú/ 3
.
úú3 4
Email
úú4 9
??
úú: <
string
úú= C
.
úúC D
Empty
úúD I
)
úúI J
,
úúJ K
new
ùù 
(
ùù %
JwtRegisteredClaimNames
ùù '
.
ùù' (
Name
ùù( ,
,
ùù, -
user
ùù. 2
.
ùù2 3
Name
ùù3 7
??
ùù8 :
string
ùù; A
.
ùùA B
Empty
ùùB G
)
ùùG H
,
ùùH I
new
ûû 
(
ûû %
JwtRegisteredClaimNames
ûû '
.
ûû' (
Jti
ûû( +
,
ûû+ ,
Guid
ûû- 1
.
ûû1 2
NewGuid
ûû2 9
(
ûû9 :
)
ûû: ;
.
ûû; <
ToString
ûû< D
(
ûûD E
)
ûûE F
)
ûûF G
,
ûûG H
new
üü 
(
üü %
JwtRegisteredClaimNames
üü '
.
üü' (
Iat
üü( +
,
üü+ ,
DateTimeOffset
üü- ;
.
üü; <
UtcNow
üü< B
.
üüB C
ToUnixTimeSeconds
üüC T
(
üüT U
)
üüU V
.
üüV W
ToString
üüW _
(
üü_ `
)
üü` a
,
üüa b
ClaimValueTypes
üüc r
.
üür s
	Integer64
üüs |
)
üü| }
}
†† 	
;
††	 

var
§§ 
roles
§§ 
=
§§ 
user
§§ 
.
§§ 
	UserRoles
§§ "
.
§§" #
Select
§§# )
(
§§) *
e
§§* +
=>
§§, .
e
§§/ 0
.
§§0 1
Role
§§1 5
)
§§5 6
.
§§6 7
Select
§§7 =
(
§§= >
e
§§> ?
=>
§§@ B
e
§§C D
.
§§D E
Name
§§E I
)
§§I J
.
§§J K
ToList
§§K Q
(
§§Q R
)
§§R S
;
§§S T
claims
•• 
.
•• 
AddRange
•• 
(
•• 
roles
•• 
.
•• 
Select
•• $
(
••$ %
role
••% )
=>
••* ,
new
••- 0
Claim
••1 6
(
••6 7

ClaimTypes
••7 A
.
••A B
Role
••B F
,
••F G
role
••H L
)
••L M
)
••M N
)
••N O
;
••O P
var
™™ 

userClaims
™™ 
=
™™ 
user
™™ 
.
™™ 

UserClaims
™™ (
.
™™( )
Select
™™) /
(
™™/ 0
a
™™0 1
=>
™™2 4
new
™™5 8
Claim
™™9 >
(
™™> ?
a
™™? @
.
™™@ A
	ClaimType
™™A J
,
™™J K
a
™™L M
.
™™M N

ClaimValue
™™N X
)
™™X Y
)
™™Y Z
.
™™Z [
ToList
™™[ a
(
™™a b
)
™™b c
;
™™c d
claims
´´ 
.
´´ 
AddRange
´´ 
(
´´ 

userClaims
´´ "
)
´´" #
;
´´# $
return
≠≠ 
claims
≠≠ 
;
≠≠ 
}
ÆÆ 
public
¥¥ 

string
¥¥ "
GenerateRefreshToken
¥¥ &
(
¥¥& '
)
¥¥' (
{
µµ 
return
∂∂ 
Base64UrlEncoder
∂∂ 
.
∂∂  
Encode
∂∂  &
(
∂∂& '#
RandomNumberGenerator
∂∂' <
.
∂∂< =
GetBytes
∂∂= E
(
∂∂E F
$num
∂∂F H
)
∂∂H I
)
∂∂I J
;
∂∂J K
}
∑∑ 
public
∏∏ 

Task
∏∏ 
<
∏∏ 
string
∏∏ 
>
∏∏ 1
#GenerateEmailConfirmationTokenAsync
∏∏ ;
(
∏∏; <
)
∏∏< =
{
ππ 
return
∫∫ 
Task
∫∫ 
.
∫∫ 

FromResult
∫∫ 
(
∫∫ 
Base64UrlEncoder
∫∫ /
.
∫∫/ 0
Encode
∫∫0 6
(
∫∫6 7#
RandomNumberGenerator
∫∫7 L
.
∫∫L M
GetBytes
∫∫M U
(
∫∫U V
$num
∫∫V X
)
∫∫X Y
)
∫∫Y Z
)
∫∫Z [
;
∫∫[ \
}
ªª 
public
ΩΩ 

Task
ΩΩ 
<
ΩΩ 
string
ΩΩ 
>
ΩΩ -
GeneratePasswordResetTokenAsync
ΩΩ 7
(
ΩΩ7 8
)
ΩΩ8 9
{
ææ 
return
øø 
Task
øø 
.
øø 

FromResult
øø 
(
øø 
Base64UrlEncoder
øø /
.
øø/ 0
Encode
øø0 6
(
øø6 7#
RandomNumberGenerator
øø7 L
.
øøL M
GetBytes
øøM U
(
øøU V
$num
øøV X
)
øøX Y
)
øøY Z
)
øøZ [
;
øø[ \
}
¿¿ 
}¡¡ Ω
AD:\BootcampProject\src\04.Application\Services\PasswordService.cs
	namespace 	
MyApp
 
. 
Application 
. 
Services $
;$ %
public 
class 
PasswordService 
: 
IPasswordService /
{ 
public 

string 
HashPassword 
( 
string %
password& .
). /
{		 
return

 
BCrypt

 
.

 
Net

 
.

 
BCrypt

  
.

  !
HashPassword

! -
(

- .
password

. 6
)

6 7
;

7 8
} 
public 

bool 
VerifyPassword 
( 
string %
password& .
,. /
string0 6
?6 7
hashedPassword8 F
)F G
{ 
if 

( 
hashedPassword 
== 
null "
)" #
return$ *
false+ 0
;0 1
try 
{ 	
return 
BCrypt 
. 
Net 
. 
BCrypt $
.$ %
Verify% +
(+ ,
password, 4
,4 5
hashedPassword6 D
)D E
;E F
} 	
catch 
{ 	
return 
false 
; 
} 	
} 
public 

bool 
IsPasswordStrong  
(  !
string! '
?' (
password) 1
)1 2
{ 
if 

( 
password 
== 
null 
) 
return $
false% *
;* +
if!! 

(!! 
password!! 
.!! 
Length!! 
<!! 
$num!! 
)!!  
return!!! '
false!!( -
;!!- .
if++ 

(++ 
!++ 
Regex++ 
.++ 
IsMatch++ 
(++ 
password++ #
,++# $
$str++% -
)++- .
)++. /
return++0 6
false++7 <
;++< =
if,, 

(,, 
!,, 
Regex,, 
.,, 
IsMatch,, 
(,, 
password,, #
,,,# $
$str,,% -
),,- .
),,. /
return,,0 6
false,,7 <
;,,< =
if-- 

(-- 
!-- 
Regex-- 
.-- 
IsMatch-- 
(-- 
password-- #
,--# $
$str--% *
)--* +
)--+ ,
return--- 3
false--4 9
;--9 :
if.. 

(.. 
!.. 
Regex.. 
... 
IsMatch.. 
(.. 
password.. #
,..# $
$str..% 6
)..6 7
)..7 8
return..9 ?
false..@ E
;..E F
return11 
true11 
;11 
}22 
}33 µ	
ID:\BootcampProject\src\04.Application\Services\Interface\ITokenService.cs
	namespace 	
MyApp
 
. 
Application 
. 
Services $
;$ %
public

 
	interface

 
ITokenService

 
{ 
string 

GenerateAccessToken 
( 
User #
user$ (
)( )
;) *
ClaimsPrincipal 
? (
GetPrincipalFromExpiredToken 1
(1 2
string2 8
token9 >
)> ?
;? @
Task 
< 	
bool	 
> 
IsTokenValidAsync  
(  !
string! '
token( -
)- .
;. /
string 
 
GenerateRefreshToken 
(  
)  !
;! "
Task 
< 	
string	 
> /
#GenerateEmailConfirmationTokenAsync 4
(4 5
)5 6
;6 7
Task 
< 	
string	 
> +
GeneratePasswordResetTokenAsync 0
(0 1
)1 2
;2 3
} °
LD:\BootcampProject\src\04.Application\Services\Interface\IPasswordService.cs
	namespace 	
MyApp
 
. 
Application 
. 
Services $
;$ %
public 
	interface 
IPasswordService !
{ 
string 

HashPassword 
( 
string 
password '
)' (
;( )
bool 
VerifyPassword	 
( 
string 
password '
,' (
string) /
?/ 0
hashedPassword1 ?
)? @
;@ A
bool 
IsPasswordStrong	 
( 
string  
?  !
password" *
)* +
;+ ,
} ˜
ID:\BootcampProject\src\04.Application\Services\Interface\IEmailService.cs
	namespace 	
MyApp
 
. 
Application 
. 
Services $
;$ %
public 
	interface 
IEmailService 
{ 
Task &
SendEmailConfirmationAsync	 #
(# $
string$ *
email+ 0
,0 1
string2 8
name9 =
,= >
string? E
confirmationLinkF V
)V W
;W X
Task "
SendPasswordResetAsync	 
(  
string  &
email' ,
,, -
string. 4
name5 9
,9 :
string; A
	resetLinkB K
)K L
;L M
Task 0
$SendPasswordChangedNotificationAsync	 -
(- .
string. 4
email5 :
,: ;
string< B
nameC G
)G H
;H I
} ÿJ
>D:\BootcampProject\src\04.Application\Services\EmailService.cs
	namespace 	
MyApp
 
. 
Application 
. 
Services $
;$ %
public

 
class

 
EmailService

 
:

 
IEmailService

 )
{ 
private 
readonly 
ILogger 
< 
EmailService )
>) *
_logger+ 2
;2 3
private 
readonly 
IConfiguration #
_configuration$ 2
;2 3
private 
readonly 
string 
	_smtpHost %
;% &
private 
readonly 
int 
	_smtpPort "
;" #
private 
readonly 
string 
	_smtpUser %
;% &
private 
readonly 
string 
_smtpPassword )
;) *
private 
readonly 
string 

_fromEmail &
;& '
private 
readonly 
string 
	_fromName %
;% &
private 
readonly 
bool 

_enableSsl $
;$ %
public 

EmailService 
( 
ILogger 
<  
EmailService  ,
>, -
logger. 4
,4 5
IConfiguration6 D
configurationE R
)R S
{ 
_logger 
= 
logger 
; 
_configuration 
= 
configuration &
;& '
	_smtpHost 
= 
_configuration "
[" #
$str# ;
]; <
??= ?
$str@ P
;P Q
	_smtpPort 
= 
int 
. 
Parse 
( 
_configuration ,
[, -
$str- E
]E F
??G I
$strJ O
)O P
;P Q
	_smtpUser 
= 
string 
. 
Empty  
;  !
_smtpPassword   
=   
_configuration   &
[  & '
$str  ' C
]  C D
??  E G
$str  H ]
;  ] ^

_fromEmail!! 
=!! 
_configuration!! #
[!!# $
$str!!$ =
]!!= >
??!!? A
	_smtpUser!!B K
;!!K L
	_fromName"" 
="" 
_configuration"" "
[""" #
$str""# ;
]""; <
??""= ?
$str""@ T
;""T U

_enableSsl## 
=## 
bool## 
.## 
Parse## 
(##  
_configuration##  .
[##. /
$str##/ H
]##H I
??##J L
$str##M S
)##S T
;##T U
}$$ 
private&& 
async&& 
Task&& 
SendEmailAsync&& %
(&&% &
string&&& ,
toEmail&&- 4
,&&4 5
string&&6 <
toName&&= C
,&&C D
string&&E K
subject&&L S
,&&S T
string&&U [
htmlBody&&\ d
)&&d e
{'' 
try(( 
{)) 	
if++ 
(++ 
string++ 
.++ 
IsNullOrEmpty++ $
(++$ %
	_smtpUser++% .
)++. /
||++0 2
string++3 9
.++9 :
IsNullOrEmpty++: G
(++G H
_smtpPassword++H U
)++U V
)++V W
{,, 
_logger-- 
.-- 

LogWarning-- "
(--" #
$str--# Y
,--Y Z
toEmail--[ b
)--b c
;--c d
_logger.. 
... 
LogInformation.. &
(..& '
$str..' ;
,..; <
subject..= D
)..D E
;..E F
_logger// 
.// 
LogInformation// &
(//& '
$str//' 5
,//5 6
htmlBody//7 ?
)//? @
;//@ A
return00 
;00 
}11 
var33 
message33 
=33 
new33 
MimeMessage33 )
(33) *
)33* +
;33+ ,
message44 
.44 
From44 
.44 
Add44 
(44 
new44  
MailboxAddress44! /
(44/ 0
	_fromName440 9
,449 :

_fromEmail44; E
)44E F
)44F G
;44G H
message55 
.55 
To55 
.55 
Add55 
(55 
new55 
MailboxAddress55 -
(55- .
toName55. 4
,554 5
toEmail556 =
)55= >
)55> ?
;55? @
message66 
.66 
Subject66 
=66 
subject66 %
;66% &
var88 
bodyBuilder88 
=88 
new88 !
BodyBuilder88" -
{99 
HtmlBody:: 
=:: 
htmlBody:: #
};; 
;;; 
message<< 
.<< 
Body<< 
=<< 
bodyBuilder<< &
.<<& '
ToMessageBody<<' 4
(<<4 5
)<<5 6
;<<6 7
using>> 
var>> 
client>> 
=>> 
new>> "

SmtpClient>># -
(>>- .
)>>. /
;>>/ 0
awaitAA 
clientAA 
.AA 
ConnectAsyncAA %
(AA% &
	_smtpHostAA& /
,AA/ 0
	_smtpPortAA1 :
,AA: ;

_enableSslAA< F
?AAG H
SecureSocketOptionsAAI \
.AA\ ]
SslOnConnectAA] i
:AAj k
SecureSocketOptionsAAl 
.	AA Ä
None
AAÄ Ñ
)
AAÑ Ö
;
AAÖ Ü
awaitDD 
clientDD 
.DD 
AuthenticateAsyncDD *
(DD* +
	_smtpUserDD+ 4
,DD4 5
_smtpPasswordDD6 C
)DDC D
;DDD E
awaitGG 
clientGG 
.GG 
	SendAsyncGG "
(GG" #
messageGG# *
)GG* +
;GG+ ,
awaitJJ 
clientJJ 
.JJ 
DisconnectAsyncJJ (
(JJ( )
trueJJ) -
)JJ- .
;JJ. /
_loggerLL 
.LL 
LogInformationLL "
(LL" #
$strLL# H
,LLH I
toEmailLLJ Q
)LLQ R
;LLR S
}MM 	
catchNN 
(NN 
	ExceptionNN 
exNN 
)NN 
{OO 	
_loggerPP 
.PP 
LogErrorPP 
(PP 
exPP 
,PP  
$strPP! C
,PPC D
toEmailPPE L
)PPL M
;PPM N
throwQQ 
;QQ 
}RR 	
}SS 
publicUU 

asyncUU 
TaskUU &
SendEmailConfirmationAsyncUU 0
(UU0 1
stringUU1 7
emailUU8 =
,UU= >
stringUU? E
nameUUF J
,UUJ K
stringUUL R
confirmationLinkUUS c
)UUc d
{VV 
varWW 
subjectWW 
=WW 
$strWW 7
;WW7 8
varXX 
htmlBodyXX 
=XX 
$@"XX 
$strX` 7
{``7 8
name``8 <
}``< =
$str`d= )
{dd) *
confirmationLinkdd* :
}dd: ;
$strdo; 
"oo 
;oo 
awaitqq 
SendEmailAsyncqq 
(qq 
emailqq "
,qq" #
nameqq$ (
,qq( )
subjectqq* 1
,qq1 2
htmlBodyqq3 ;
)qq; <
;qq< =
}rr 
publictt 

asynctt 
Tasktt "
SendPasswordResetAsynctt ,
(tt, -
stringtt- 3
emailtt4 9
,tt9 :
stringtt; A
namettB F
,ttF G
stringttH N
	resetLinkttO X
)ttX Y
{uu 
varvv 
subjectvv 
=vv 
$strvv 8
;vv8 9
varww 
htmlBodyww 
=ww 
$@"ww 
$strw 7
{7 8
name8 <
}< =
$str	É= )
{
ÉÉ) *
	resetLink
ÉÉ* 3
}
ÉÉ3 4
$str
Éè4 
"
èè 
;
èè 
await
ëë 
SendEmailAsync
ëë 
(
ëë 
email
ëë "
,
ëë" #
name
ëë$ (
,
ëë( )
subject
ëë* 1
,
ëë1 2
htmlBody
ëë3 ;
)
ëë; <
;
ëë< =
}
íí 
public
îî 

async
îî 
Task
îî 2
$SendPasswordChangedNotificationAsync
îî :
(
îî: ;
string
îî; A
email
îîB G
,
îîG H
string
îîI O
name
îîP T
)
îîT U
{
ïï 
var
ññ 
subject
ññ 
=
ññ 
$str
ññ B
;
ññB C
var
óó 
htmlBody
óó 
=
óó 
$@"
óó 
$str
óü 7
{
üü7 8
name
üü8 <
}
üü< =
$str
üÆ= 
"
ÆÆ 
;
ÆÆ 
await
ØØ 
SendEmailAsync
ØØ 
(
ØØ 
email
ØØ "
,
ØØ" #
name
ØØ$ (
,
ØØ( )
subject
ØØ* 1
,
ØØ1 2
htmlBody
ØØ3 ;
)
ØØ; <
;
ØØ< =
}
∞∞ 
}±± éb
@D:\BootcampProject\src\04.Application\Mappings\MappingProfile.cs
	namespace 	
MyApp
 
. 
Application 
. 
Mappings $
{ 
public

 

class

 
MappingProfile

 
:

  !
Profile

" )
{ 
public 
MappingProfile 
( 
) 
{ 	
	CreateMap 
< 
Category 
, 
CategoryDto  +
>+ ,
(, -
)- .
;. /
	CreateMap 
< $
CreateCategoryRequestDto .
,. /
Category0 8
>8 9
(9 :
): ;
;; <
	CreateMap 
< $
UpdateCategoryRequestDto .
,. /
Category0 8
>8 9
(9 :
): ;
;; <
	CreateMap 
< 
Course 
, 
	CourseDto '
>' (
(( )
)) *
. 
	ForMember 
( 
dest 
=>  "
dest# '
.' (
CategoryRefId( 5
,5 6
opt 
=> 
opt 
. 
MapFrom &
(& '
src' *
=>+ -
src. 1
.1 2
Category2 :
.: ;
RefId; @
)@ A
)A B
. 
	ForMember 
( 
dest 
=>  "
dest# '
.' (
CategoryName( 4
,4 5
opt 
=> 
opt 
. 
MapFrom &
(& '
src' *
=>+ -
src. 1
.1 2
Category2 :
.: ;
Name; ?
)? @
)@ A
. 
	ForMember 
( 
dest 
=>  "
dest# '
.' (
ScheduleDates( 5
,5 6
opt 
=> 
opt 
. 
MapFrom &
(& '
src' *
=>+ -
src. 1
.1 2
	Schedules2 ;
.; <
Select< B
(B C
sC D
=>E G
sH I
.I J
DateJ N
)N O
.O P
ToListP V
(V W
)W X
)X Y
)Y Z
;Z [
	CreateMap 
< "
CreateCourseRequestDto ,
,, -
Course. 4
>4 5
(5 6
)6 7
;7 8
	CreateMap   
<   "
UpdateCourseRequestDto   ,
,  , -
Course  . 4
>  4 5
(  5 6
)  6 7
;  7 8
	CreateMap## 
<## 
PaymentMethod## #
,### $
PaymentMethodDto##% 5
>##5 6
(##6 7
)##7 8
;##8 9
	CreateMap$$ 
<$$ )
CreatePaymentMethodRequestDto$$ 3
,$$3 4
PaymentMethod$$5 B
>$$B C
($$C D
)$$D E
;$$E F
	CreateMap%% 
<%% )
UpdatePaymentMethodRequestDto%% 3
,%%3 4
PaymentMethod%%5 B
>%%B C
(%%C D
)%%D E
;%%E F
	CreateMap(( 
<(( 
User(( 
,(( 
UserDto(( #
>((# $
((($ %
)((% &
.)) 
	ForMember)) 
()) 
dest)) 
=>))  "
dest))# '
.))' (
Roles))( -
,))- .
opt** 
=>** !
opt**" %
.**% &
MapFrom**& -
(**- .
src**. 1
=>**2 4
src**5 8
.**8 9
	UserRoles**9 B
.**B C
Select**C I
(**I J
s**J K
=>**L N
s**O P
.**P Q
Role**Q U
.**U V
Name**V Z
)**Z [
.**[ \
ToList**\ b
(**b c
)**c d
)**d e
)**e f
.++ 
	ForMember++ 
(++ 
dest++ 
=>++  "
dest++# '
.++' (
Claims++( .
,++. /
opt,, 
=>,, !
opt,," %
.,,% &
MapFrom,,& -
(,,- .
src,,. 1
=>,,2 4
src,,5 8
.,,8 9

UserClaims,,9 C
.,,C D
Select,,D J
(,,J K
s,,K L
=>,,M O
new,,P S
ClaimDto,,T \
{,,] ^
Type,,_ c
=,,d e
s,,f g
.,,g h
	ClaimType,,h q
,,,q r
Value,,s x
=,,y z
s,,{ |
.,,| }

ClaimValue	,,} á
}
,,à â
)
,,â ä
.
,,ä ã
ToList
,,ã ë
(
,,ë í
)
,,í ì
)
,,ì î
)
,,î ï
;
,,ï ñ
	CreateMap-- 
<-- 
Role-- 
,-- 
RoleDto-- #
>--# $
(--$ %
)--% &
;--& '
	CreateMap00 
<00 
CartItem00 
,00 
CartItemResponseDto00  3
>003 4
(004 5
)005 6
.11 
	ForMember11 
(11 
dest11 
=>11  "
dest11# '
.11' (

CourseName11( 2
,112 3
opt22 
=>22 !
opt22" %
.22% &
MapFrom22& -
(22- .
src22. 1
=>222 4
src225 8
.228 9
Schedule229 A
.22A B
Course22B H
.22H I
Name22I M
)22M N
)22N O
.33 
	ForMember33 
(33 
dest33 
=>33  "
dest33# '
.33' (
Date33( ,
,33, -
opt44 
=>44 !
opt44" %
.44% &
MapFrom44& -
(44- .
src44. 1
=>442 4
src445 8
.448 9
Schedule449 A
.44A B
Date44B F
)44F G
)44G H
.55 
	ForMember55 
(55 
dest55 
=>55  "
dest55# '
.55' (
CategoryName55( 4
,554 5
opt556 9
=>55: <
opt55= @
.55@ A
MapFrom55A H
(55H I
src55I L
=>55M O
src55P S
.55S T
Schedule55T \
.55\ ]
Course55] c
.55c d
Category55d l
.55l m
Name55m q
)55q r
)55r s
.66 
	ForMember66 
(66 
dest66 
=>66  "
dest66# '
.66' (
Price66( -
,66- .
opt66/ 2
=>663 5
opt666 9
.669 :
MapFrom66: A
(66A B
src66B E
=>66F H
src66I L
.66L M
Schedule66M U
.66U V
Course66V \
.66\ ]
Price66] b
)66b c
)66c d
.77 
	ForMember77 
(77 
dest77 
=>77  "
dest77# '
.77' (
ImageUrl77( 0
,770 1
opt772 5
=>776 8
opt779 <
.77< =
MapFrom77= D
(77D E
src77E H
=>77I K
src77L O
.77O P
Schedule77P X
.77X Y
Course77Y _
.77_ `
ImageUrl77` h
)77h i
)77i j
;77j k
	CreateMap:: 
<:: 
Invoice:: 
,:: 

InvoiceDto:: )
>::) *
(::* +
)::+ ,
.;; 
	ForMember;; 
(;; 
dest;; 
=>;;  "
dest;;# '
.;;' (
Email;;( -
,;;- .
opt;;/ 2
=>;;3 5
opt;;6 9
.;;9 :
MapFrom;;: A
(;;A B
src;;B E
=>;;F H
src;;I L
.;;L M
User;;M Q
==;;R T
null;;U Y
?;;Z [
string;;\ b
.;;b c
Empty;;c h
:;;i j
src;;k n
.;;n o
User;;o s
.;;s t
Email;;t y
);;y z
);;z {
.<< 
	ForMember<< 
(<< 
dest<< 
=><<  "
dest<<# '
.<<' (

TotalPrice<<( 2
,<<2 3
opt<<4 7
=><<8 :
opt<<; >
.<<> ?
MapFrom<<? F
(<<F G
src<<G J
=><<K M
src<<N Q
.<<Q R
InvoiceDetails<<R `
.<<` a
Sum<<a d
(<<d e
s<<e f
=><<g i
s<<j k
.<<k l
Price<<l q
)<<q r
)<<r s
)<<s t
.== 
	ForMember== 
(== 
dest== 
=>==  "
dest==# '
.==' (
TotalCourse==( 3
,==3 4
opt==5 8
=>==9 ;
opt==< ?
.==? @
MapFrom==@ G
(==G H
src==H K
=>==L N
src==O R
.==R S
InvoiceDetails==S a
.==a b
Count==b g
)==g h
)==h i
;==i j
	CreateMap@@ 
<@@ 
InvoiceDetail@@ #
,@@# $
InvoiceDetailDto@@% 5
>@@5 6
(@@6 7
)@@7 8
;@@8 9
	CreateMapCC 
<CC 
MyClassCC 
,CC 

MyClassDtoCC )
>CC) *
(CC* +
)CC+ ,
.DD 
	ForMemberDD 
(DD 
destDD 
=>DD  "
destDD# '
.DD' (
CategoryNameDD( 4
,DD4 5
optDD6 9
=>DD: <
optDD= @
.DD@ A
MapFromDDA H
(DDH I
srcDDI L
=>DDM O
srcDDP S
.DDS T
ScheduleDDT \
.DD\ ]
CourseDD] c
.DDc d
CategoryDDd l
.DDl m
NameDDm q
)DDq r
)DDr s
.EE 
	ForMemberEE 
(EE 
destEE 
=>EE  "
destEE# '
.EE' (

CourseNameEE( 2
,EE2 3
optEE4 7
=>EE8 :
optEE; >
.EE> ?
MapFromEE? F
(EEF G
srcEEG J
=>EEK M
srcEEN Q
.EEQ R
ScheduleEER Z
.EEZ [
CourseEE[ a
.EEa b
NameEEb f
)EEf g
)EEg h
.FF 
	ForMemberFF 
(FF 
destFF 
=>FF  "
destFF# '
.FF' (
ImageUrlFF( 0
,FF0 1
optFF2 5
=>FF6 8
optFF9 <
.FF< =
MapFromFF= D
(FFD E
srcFFE H
=>FFI K
srcFFL O
.FFO P
ScheduleFFP X
.FFX Y
CourseFFY _
.FF_ `
ImageUrlFF` h
)FFh i
)FFi j
.GG 
	ForMemberGG 
(GG 
destGG 
=>GG  "
destGG# '
.GG' (
DateGG( ,
,GG, -
optGG. 1
=>GG2 4
optGG5 8
.GG8 9
MapFromGG9 @
(GG@ A
srcGGA D
=>GGE G
srcGGH K
.GGK L
ScheduleGGL T
.GGT U
DateGGU Y
)GGY Z
)GGZ [
;GG[ \
	CreateMapII 
<II #
CreateMyClassRequestDtoII -
,II- .
MyClassII/ 6
>II6 7
(II7 8
)II8 9
;II9 :
	CreateMapJJ 
<JJ #
UpdateMyClassRequestDtoJJ -
,JJ- .
MyClassJJ/ 6
>JJ6 7
(JJ7 8
)JJ8 9
;JJ9 :
	CreateMapMM 
<MM 
ScheduleMM 
,MM 
ScheduleDtoMM  +
>MM+ ,
(MM, -
)MM- .
.NN 
	ForMemberNN 
(NN 
destNN 
=>NN  "
destNN# '
.NN' (

CourseNameNN( 2
,NN2 3
optNN4 7
=>NN8 :
optNN; >
.NN> ?
MapFromNN? F
(NNF G
srcNNG J
=>NNK M
srcNNN Q
.NNQ R
CourseNNR X
.NNX Y
NameNNY ]
)NN] ^
)NN^ _
;NN_ `
	CreateMapPP 
<PP $
CreateScheduleRequestDtoPP .
,PP. /
SchedulePP0 8
>PP8 9
(PP9 :
)PP: ;
;PP; <
	CreateMapQQ 
<QQ $
UpdateScheduleRequestDtoQQ .
,QQ. /
ScheduleQQ0 8
>QQ8 9
(QQ9 :
)QQ: ;
;QQ; <
}RR 	
}SS 
}TT §
[D:\BootcampProject\src\04.Application\Feature\UserManagement\Queries\GetUserByRefIdQuery.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
	Schedules$ -
.- .
Queries. 5
;5 6
public

 
class

 
GetUserByRefIdQuery

  
:

! "
IRequest

# +
<

+ ,
ApiResponse

, 7
<

7 8
UserDto

8 ?
>

? @
>

@ A
{ 
public 

Guid 
RefId 
{ 
get 
; 
set  
;  !
}" #
} 
public 
class &
GetUserByRefIdQueryHandler '
:( )
IRequestHandler* 9
<9 :
GetUserByRefIdQuery: M
,M N
ApiResponseO Z
<Z [
UserDto[ b
>b c
>c d
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
public 
&
GetUserByRefIdQueryHandler %
(% &
IUnitOfWork& 1

unitOfWork2 <
,< =
IMapper> E
mapperF L
)L M
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
UserDto" )
>) *
>* +
Handle, 2
(2 3
GetUserByRefIdQuery3 F
requestG N
,N O
CancellationTokenP a
cancellationTokenb s
)s t
{ 
var 
user 
= 
await 
_unitOfWork $
.$ %
UserManager% 0
.0 1
GetUserByRefIdAsync1 D
(D E
requestE L
.L M
RefIdM R
)R S
;S T
if 

( 
user 
== 
null 
) 
{ 	
throw 
new 
NotFoundException '
(' (
$str( 8
,8 9
request: A
.A B
RefIdB G
)G H
;H I
} 	
var 
userDto 
= 
_mapper 
. 
Map !
<! "
UserDto" )
>) *
(* +
user+ /
)/ 0
;0 1
return!! 
ApiResponse!! 
<!! 
UserDto!! "
>!!" #
.!!# $
SuccessResult!!$ 1
(!!1 2
userDto!!2 9
)!!9 :
;!!: ;
}"" 
}## ı
XD:\BootcampProject\src\04.Application\Feature\UserManagement\Queries\GetAllUsersQuery.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
	Schedules$ -
.- .
Queries. 5
;5 6
public 
class 
GetAllUsersQuery 
: 
IRequest  (
<( )
ApiResponse) 4
<4 5
List5 9
<9 :
UserDto: A
>A B
>B C
>C D
{		 
}

 
public 
class #
GetAllUsersQueryHandler $
:% &
IRequestHandler' 6
<6 7
GetAllUsersQuery7 G
,G H
ApiResponseI T
<T U
ListU Y
<Y Z
UserDtoZ a
>a b
>b c
>c d
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
public 
#
GetAllUsersQueryHandler "
(" #
IUnitOfWork# .

unitOfWork/ 9
,9 :
IMapper; B
mapperC I
)I J
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
List" &
<& '
UserDto' .
>. /
>/ 0
>0 1
Handle2 8
(8 9
GetAllUsersQuery9 I
requestJ Q
,Q R
CancellationTokenS d
cancellationTokene v
)v w
{ 
var 
users 
= 
await 
_unitOfWork %
.% &
UserManager& 1
.1 2
GetAllUsersAsync2 B
(B C
)C D
;D E
var 
SchedulesDto 
= 
_mapper "
." #
Map# &
<& '
List' +
<+ ,
UserDto, 3
>3 4
>4 5
(5 6
users6 ;
); <
;< =
return 
ApiResponse 
< 
List 
<  
UserDto  '
>' (
>( )
.) *
SuccessResult* 7
(7 8
SchedulesDto8 D
)D E
;E F
} 
} Ì
XD:\BootcampProject\src\04.Application\Feature\UserManagement\Queries\GetAllRolesQuery.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
	Schedules$ -
.- .
Queries. 5
;5 6
public 
class 
GetAllRolesQuery 
: 
IRequest  (
<( )
ApiResponse) 4
<4 5
List5 9
<9 :
RoleDto: A
>A B
>B C
>C D
{		 
}

 
public 
class #
GetAllRolesQueryHandler $
:% &
IRequestHandler' 6
<6 7
GetAllRolesQuery7 G
,G H
ApiResponseI T
<T U
ListU Y
<Y Z
RoleDtoZ a
>a b
>b c
>c d
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
public 
#
GetAllRolesQueryHandler "
(" #
IUnitOfWork# .

unitOfWork/ 9
,9 :
IMapper; B
mapperC I
)I J
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
List" &
<& '
RoleDto' .
>. /
>/ 0
>0 1
Handle2 8
(8 9
GetAllRolesQuery9 I
requestJ Q
,Q R
CancellationTokenS d
cancellationTokene v
)v w
{ 
var 
roles 
= 
await 
_unitOfWork %
.% &
UserManager& 1
.1 2
GetAllRolesAsync2 B
(B C
)C D
;D E
var 
rolesDto 
= 
_mapper 
. 
Map "
<" #
List# '
<' (
RoleDto( /
>/ 0
>0 1
(1 2
roles2 7
)7 8
;8 9
return 
ApiResponse 
< 
List 
<  
RoleDto  '
>' (
>( )
.) *
SuccessResult* 7
(7 8
rolesDto8 @
)@ A
;A B
} 
} Ò!
_D:\BootcampProject\src\04.Application\Feature\UserManagement\Commands\SetClaimForUserCommand.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
	Schedules$ -
.- .
Commands. 6
;6 7
public

 
class

 "
SetClaimForUserCommand

 #
:

$ %
IRequest

& .
<

. /
ApiResponse

/ :
<

: ;
object

; A
>

A B
>

B C
{ 
public 

Guid 
RefId 
{ 
get 
; 
set  
;  !
}" #
public 

string 
	ClaimType 
{ 
get !
;! "
set# &
;& '
}( )
public 

string 

ClaimValue 
{ 
get "
;" #
set$ '
;' (
}) *
} 
public 
class )
SetClaimForUserCommandHandler *
:+ ,
IRequestHandler- <
<< ="
SetClaimForUserCommand= S
,S T
ApiResponseU `
<` a
objecta g
>g h
>h i
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
private 
readonly 
ILogger 
< )
SetClaimForUserCommandHandler :
>: ;
_logger< C
;C D
public 
)
SetClaimForUserCommandHandler (
(( )
IUnitOfWork) 4

unitOfWork5 ?
,? @
IMapperA H
mapperI O
,O P
ILoggerQ X
<X Y)
SetClaimForUserCommandHandlerY v
>v w
loggerx ~
)~ 
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
_logger 
= 
logger 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
object" (
>( )
>) *
Handle+ 1
(1 2"
SetClaimForUserCommand2 H
requestI P
,P Q
CancellationTokenR c
cancellationTokend u
)u v
{ 
var 
user 
= 
await 
_unitOfWork $
.$ %
UserManager% 0
.0 1
GetUserByRefIdAsync1 D
(D E
requestE L
.L M
RefIdM R
)R S
;S T
if 

( 
user 
== 
null 
) 
{ 	
throw   
new   
NotFoundException   '
(  ' (
$str  ( 4
,  4 5
request  6 =
.  = >
RefId  > C
)  C D
;  D E
}!! 	
var"" 
	userClaim"" 
="" 
await"" 
_unitOfWork"" )
."") *
UserManager""* 5
.""5 6 
SetClaimForUserAsync""6 J
(""J K
user""K O
,""O P
request""Q X
.""X Y
	ClaimType""Y b
,""b c
request""d k
.""k l

ClaimValue""l v
)""v w
;""w x
await## 
_unitOfWork## 
.## 
SaveChangesAsync## *
(##* +
)##+ ,
;##, -
_logger%% 
.%% 
LogInformation%% 
(%% 
$str%% [
,%%[ \
	userClaim%%] f
.%%f g
	ClaimType%%g p
,%%p q
	userClaim%%r {
.%%{ |

ClaimValue	%%| Ü
,
%%Ü á
user
%%à å
.
%%å ç
RefId
%%ç í
)
%%í ì
;
%%ì î
return'' 
ApiResponse'' 
<'' 
object'' !
>''! "
.''" #
SuccessResult''# 0
(''0 1
)''1 2
;''2 3
}(( 
})) ·
`D:\BootcampProject\src\04.Application\Feature\UserManagement\Commands\SetActiveForUserCommand.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
	Schedules$ -
.- .
Commands. 6
;6 7
public

 
class

 #
SetActiveForUserCommand

 $
:

% &
IRequest

' /
<

/ 0
ApiResponse

0 ;
<

; <
object

< B
>

B C
>

C D
{ 
public 

Guid 
RefId 
{ 
get 
; 
set  
;  !
}" #
public 

bool 
isActive 
{ 
get 
; 
set  #
;# $
}% &
} 
public 
class *
SetActiveForUserCommandHandler +
:, -
IRequestHandler. =
<= >#
SetActiveForUserCommand> U
,U V
ApiResponseW b
<b c
objectc i
>i j
>j k
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
private 
readonly 
ILogger 
< *
SetActiveForUserCommandHandler ;
>; <
_logger= D
;D E
public 
*
SetActiveForUserCommandHandler )
() *
IUnitOfWork* 5

unitOfWork6 @
,@ A
IMapperB I
mapperJ P
,P Q
ILoggerR Y
<Y Z*
SetActiveForUserCommandHandlerZ x
>x y
logger	z Ä
)
Ä Å
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
_logger 
= 
logger 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
object" (
>( )
>) *
Handle+ 1
(1 2#
SetActiveForUserCommand2 I
requestJ Q
,Q R
CancellationTokenS d
cancellationTokene v
)v w
{ 
var 
changed 
= 
await 
_unitOfWork '
.' (
UserManager( 3
.3 4!
SetActiveForUserAsync4 I
(I J
requestJ Q
.Q R
RefIdR W
,W X
requestY `
.` a
isActivea i
)i j
;j k
await 
_unitOfWork 
. 
SaveChangesAsync *
(* +
)+ ,
;, -
if 

( 
! 
changed 
) 
{ 	
throw   
new   
NotFoundException   '
(  ' (
$str  ( 4
,  4 5
request  6 =
.  = >
RefId  > C
)  C D
;  D E
}!! 	
if"" 

("" 
request"" 
."" 
isActive"" 
)"" 
{## 	
_logger$$ 
.$$ 
LogInformation$$ "
($$" #
$str$$# ?
,$$? @
request$$A H
.$$H I
RefId$$I N
)$$N O
;$$O P
}%% 	
else&& 
{'' 	
_logger(( 
.(( 
LogInformation(( "
(((" #
$str((# A
,((A B
request((C J
.((J K
RefId((K P
)((P Q
;((Q R
})) 	
return** 
ApiResponse** 
<** 
object** !
>**! "
.**" #
SuccessResult**# 0
(**0 1
)**1 2
;**2 3
}++ 
},, ˘*
bD:\BootcampProject\src\04.Application\Feature\UserManagement\Commands\RemoveRoleFromUserCommand.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
	Schedules$ -
.- .
Commands. 6
;6 7
public

 
class

 %
RemoveRoleFromUserCommand

 &
:

' (
IRequest

) 1
<

1 2
ApiResponse

2 =
<

= >
object

> D
>

D E
>

E F
{ 
public 

Guid 
RefId 
{ 
get 
; 
set  
;  !
}" #
public 

RoleRequestDto 
RoleDto !
{" #
get$ '
;' (
set) ,
;, -
}. /
=0 1
null2 6
!6 7
;7 8
} 
public 
class ,
 RemoveRoleFromUserCommandHandler -
:. /
IRequestHandler0 ?
<? @%
RemoveRoleFromUserCommand@ Y
,Y Z
ApiResponse[ f
<f g
objectg m
>m n
>n o
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
private 
readonly 
ILogger 
< ,
 RemoveRoleFromUserCommandHandler =
>= >
_logger? F
;F G
public 
,
 RemoveRoleFromUserCommandHandler +
(+ ,
IUnitOfWork, 7

unitOfWork8 B
,B C
IMapperD K
mapperL R
,R S
ILoggerT [
<[ \,
 RemoveRoleFromUserCommandHandler\ |
>| }
logger	~ Ñ
)
Ñ Ö
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
_logger 
= 
logger 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
object" (
>( )
>) *
Handle+ 1
(1 2%
RemoveRoleFromUserCommand2 K
requestL S
,S T
CancellationTokenU f
cancellationTokeng x
)x y
{ 
var 
user 
= 
await 
_unitOfWork $
.$ %
UserManager% 0
.0 1
GetUserByRefIdAsync1 D
(D E
requestE L
.L M
RefIdM R
)R S
;S T
if 

( 
user 
== 
null 
) 
{ 	
throw 
new 
NotFoundException '
(' (
$str( 4
,4 5
request6 =
.= >
RefId> C
)C D
;D E
}   	
var!! 
role!! 
=!! 
await!! 
_unitOfWork!! $
.!!$ %
UserManager!!% 0
.!!0 1
GetRoleByNameAsync!!1 C
(!!C D
request!!D K
.!!K L
RoleDto!!L S
.!!S T
RoleName!!T \
)!!\ ]
;!!] ^
if"" 

("" 
role"" 
=="" 
null"" 
)"" 
{## 	
_logger$$ 
.$$ 

LogWarning$$ 
($$ 
$str$$ U
,$$U V
request$$W ^
.$$^ _
RoleDto$$_ f
.$$f g
RoleName$$g o
,$$o p
request$$q x
.$$x y
RefId$$y ~
)$$~ 
;	$$ Ä
throw%% 
new%% 
ValidationException%% )
(%%) *
$"%%* ,
$str%%, 9
{%%9 :
request%%: A
.%%A B
RoleDto%%B I
.%%I J
RoleName%%J R
}%%R S
"%%S T
)%%T U
;%%U V
}&& 	
var(( 
deleted(( 
=(( 
await(( 
_unitOfWork(( '
.((' (
UserManager((( 3
.((3 4#
RemoveRoleFromUserAsync((4 K
(((K L
user((L P
,((P Q
role((R V
)((V W
;((W X
await)) 
_unitOfWork)) 
.)) 
SaveChangesAsync)) *
())* +
)))+ ,
;)), -
if** 

(** 
!** 
deleted** 
)** 
{++ 	
throw,, 
new,, 
ValidationException,, )
(,,) *
$",,* ,
$str,,, C
{,,C D
request,,D K
.,,K L
RoleDto,,L S
.,,S T
RoleName,,T \
},,\ ]
",,] ^
),,^ _
;,,_ `
}-- 	
_logger// 
.// 
LogInformation// 
(// 
$str// K
,//K L
role//M Q
.//Q R
Name//R V
,//V W
user//X \
.//\ ]
RefId//] b
)//b c
;//c d
return11 
ApiResponse11 
<11 
object11 !
>11! "
.11" #
SuccessResult11# 0
(110 1
)111 2
;112 3
}22 
}33 æ"
cD:\BootcampProject\src\04.Application\Feature\UserManagement\Commands\RemoveClaimFromUserCommand.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
	Schedules$ -
.- .
Commands. 6
;6 7
public

 
class

 &
RemoveClaimFromUserCommand

 '
:

( )
IRequest

* 2
<

2 3
ApiResponse

3 >
<

> ?
object

? E
>

E F
>

F G
{ 
public 

Guid 
RefId 
{ 
get 
; 
set  
;  !
}" #
public 

string 
	ClaimType 
{ 
get !
;! "
set# &
;& '
}( )
} 
public 
class -
!RemoveClaimFromUserCommandHandler .
:/ 0
IRequestHandler1 @
<@ A&
RemoveClaimFromUserCommandA [
,[ \
ApiResponse] h
<h i
objecti o
>o p
>p q
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
private 
readonly 
ILogger 
< -
!RemoveClaimFromUserCommandHandler >
>> ?
_logger@ G
;G H
public 
-
!RemoveClaimFromUserCommandHandler ,
(, -
IUnitOfWork- 8

unitOfWork9 C
,C D
IMapperE L
mapperM S
,S T
ILoggerU \
<\ ]-
!RemoveClaimFromUserCommandHandler] ~
>~ 
logger
Ä Ü
)
Ü á
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
_logger 
= 
logger 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
object" (
>( )
>) *
Handle+ 1
(1 2&
RemoveClaimFromUserCommand2 L
requestM T
,T U
CancellationTokenV g
cancellationTokenh y
)y z
{ 
var 
user 
= 
await 
_unitOfWork $
.$ %
UserManager% 0
.0 1
GetUserByRefIdAsync1 D
(D E
requestE L
.L M
RefIdM R
)R S
;S T
if 

( 
user 
== 
null 
) 
{ 	
throw 
new 
NotFoundException '
(' (
$str( 4
,4 5
request6 =
.= >
RefId> C
)C D
;D E
}   	
var!! 
deleted!! 
=!! 
await!! 
_unitOfWork!! '
.!!' (
UserManager!!( 3
.!!3 4$
RemoveClaimFromUserAsync!!4 L
(!!L M
user!!M Q
,!!Q R
request!!S Z
.!!Z [
	ClaimType!![ d
)!!d e
;!!e f
await"" 
_unitOfWork"" 
."" 
SaveChangesAsync"" *
(""* +
)""+ ,
;"", -
if## 

(## 
!## 
deleted## 
)## 
{$$ 	
throw%% 
new%% 
ValidationException%% )
(%%) *
$"%%* ,
$str%%, D
{%%D E
request%%E L
.%%L M
	ClaimType%%M V
}%%V W
"%%W X
)%%X Y
;%%Y Z
}&& 	
_logger(( 
.(( 
LogInformation(( 
((( 
$str(( P
,((P Q
request((R Y
.((Y Z
	ClaimType((Z c
,((c d
user((e i
.((i j
RefId((j o
)((o p
;((p q
return** 
ApiResponse** 
<** 
object** !
>**! "
.**" #
SuccessResult**# 0
(**0 1
)**1 2
;**2 3
}++ 
},, ≈*
]D:\BootcampProject\src\04.Application\Feature\UserManagement\Commands\AddRoleToUserCommand.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
	Schedules$ -
.- .
Commands. 6
;6 7
public

 
class

  
AddRoleToUserCommand

 !
:

" #
IRequest

$ ,
<

, -
ApiResponse

- 8
<

8 9
object

9 ?
>

? @
>

@ A
{ 
public 

Guid 
RefId 
{ 
get 
; 
set  
;  !
}" #
public 

RoleRequestDto 
RoleDto !
{" #
get$ '
;' (
set) ,
;, -
}. /
=0 1
null2 6
!6 7
;7 8
} 
public 
class '
AddRoleToUserCommandHandler (
:) *
IRequestHandler+ :
<: ; 
AddRoleToUserCommand; O
,O P
ApiResponseQ \
<\ ]
object] c
>c d
>d e
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
private 
readonly 
ILogger 
< '
AddRoleToUserCommandHandler 8
>8 9
_logger: A
;A B
public 
'
AddRoleToUserCommandHandler &
(& '
IUnitOfWork' 2

unitOfWork3 =
,= >
IMapper? F
mapperG M
,M N
ILoggerO V
<V W'
AddRoleToUserCommandHandlerW r
>r s
loggert z
)z {
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
_logger 
= 
logger 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
object" (
>( )
>) *
Handle+ 1
(1 2 
AddRoleToUserCommand2 F
requestG N
,N O
CancellationTokenP a
cancellationTokenb s
)s t
{ 
var 
user 
= 
await 
_unitOfWork $
.$ %
UserManager% 0
.0 1
GetUserByRefIdAsync1 D
(D E
requestE L
.L M
RefIdM R
)R S
;S T
if 

( 
user 
== 
null 
) 
{ 	
throw 
new 
NotFoundException '
(' (
$str( 4
,4 5
request6 =
.= >
RefId> C
)C D
;D E
}   	
var!! 
role!! 
=!! 
await!! 
_unitOfWork!! $
.!!$ %
UserManager!!% 0
.!!0 1
GetRoleByNameAsync!!1 C
(!!C D
request!!D K
.!!K L
RoleDto!!L S
.!!S T
RoleName!!T \
)!!\ ]
;!!] ^
if"" 

("" 
role"" 
=="" 
null"" 
)"" 
{## 	
_logger$$ 
.$$ 

LogWarning$$ 
($$ 
$str$$ U
,$$U V
request$$W ^
.$$^ _
RoleDto$$_ f
.$$f g
RoleName$$g o
,$$o p
request$$q x
.$$x y
RefId$$y ~
)$$~ 
;	$$ Ä
throw%% 
new%% 
ValidationException%% )
(%%) *
$"%%* ,
$str%%, 9
{%%9 :
request%%: A
.%%A B
RoleDto%%B I
.%%I J
RoleName%%J R
}%%R S
"%%S T
)%%T U
;%%U V
}&& 	
var(( 
added(( 
=(( 
await(( 
_unitOfWork(( %
.((% &
UserManager((& 1
.((1 2
AddRoleToUserAsync((2 D
(((D E
user((E I
,((I J
role((K O
)((O P
;((P Q
await)) 
_unitOfWork)) 
.)) 
SaveChangesAsync)) *
())* +
)))+ ,
;)), -
if** 

(** 
!** 
added** 
)** 
{++ 	
throw,, 
new,, 
ValidationException,, )
(,,) *
$",,* ,
$str,,, B
{,,B C
request,,C J
.,,J K
RoleDto,,K R
.,,R S
RoleName,,S [
},,[ \
",,\ ]
),,] ^
;,,^ _
}-- 	
_logger// 
.// 
LogInformation// 
(// 
$str// G
,//G H
role//I M
.//M N
Name//N R
,//R S
user//T X
.//X Y
RefId//Y ^
)//^ _
;//_ `
return11 
ApiResponse11 
<11 
object11 !
>11! "
.11" #
SuccessResult11# 0
(110 1
)111 2
;112 3
}22 
}33 Ÿ
ZD:\BootcampProject\src\04.Application\Feature\Schedules\Queries\GetScheduleByRefIdQuery.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
	Schedules$ -
.- .
Queries. 5
;5 6
public		 
class		 #
GetScheduleByRefIdQuery		 $
:		% &
IRequest		' /
<		/ 0
ApiResponse		0 ;
<		; <
ScheduleDto		< G
>		G H
>		H I
{

 
public 

Guid 
RefId 
{ 
get 
; 
set  
;  !
}" #
} 
public 
class *
GetScheduleByRefIdQueryHandler +
:, -
IRequestHandler. =
<= >#
GetScheduleByRefIdQuery> U
,U V
ApiResponseW b
<b c
ScheduleDtoc n
>n o
>o p
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
public 
*
GetScheduleByRefIdQueryHandler )
() *
IUnitOfWork* 5

unitOfWork6 @
,@ A
IMapperB I
mapperJ P
)P Q
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
ScheduleDto" -
>- .
>. /
Handle0 6
(6 7#
GetScheduleByRefIdQuery7 N
requestO V
,V W
CancellationTokenX i
cancellationTokenj {
){ |
{ 
var 
schedule 
= 
await 
_unitOfWork (
.( )
	Schedules) 2
.2 3
GetByRefIdAsync3 B
(B C
requestC J
.J K
RefIdK P
)P Q
;Q R
if 

( 
schedule 
== 
null 
) 
{ 	
throw 
new 
NotFoundException '
(' (
$str( 8
,8 9
request: A
.A B
RefIdB G
)G H
;H I
} 	
var 
scheduleDto 
= 
_mapper !
.! "
Map" %
<% &
ScheduleDto& 1
>1 2
(2 3
schedule3 ;
); <
;< =
return   
ApiResponse   
<   
ScheduleDto   &
>  & '
.  ' (
SuccessResult  ( 5
(  5 6
scheduleDto  6 A
)  A B
;  B C
}!! 
}"" ù
WD:\BootcampProject\src\04.Application\Feature\Schedules\Queries\GetAllSchedulesQuery.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
	Schedules$ -
.- .
Queries. 5
;5 6
public 
class  
GetAllSchedulesQuery !
:" #
IRequest$ ,
<, -
ApiResponse- 8
<8 9
List9 =
<= >
ScheduleDto> I
>I J
>J K
>K L
{		 
}

 
public 
class '
GetAllSchedulesQueryHandler (
:) *
IRequestHandler+ :
<: ; 
GetAllSchedulesQuery; O
,O P
ApiResponseQ \
<\ ]
List] a
<a b
ScheduleDtob m
>m n
>n o
>o p
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
public 
'
GetAllSchedulesQueryHandler &
(& '
IUnitOfWork' 2

unitOfWork3 =
,= >
IMapper? F
mapperG M
)M N
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
List" &
<& '
ScheduleDto' 2
>2 3
>3 4
>4 5
Handle6 <
(< = 
GetAllSchedulesQuery= Q
requestR Y
,Y Z
CancellationToken[ l
cancellationTokenm ~
)~ 
{ 
var 
	Schedules 
= 
await 
_unitOfWork )
.) *
	Schedules* 3
.3 4
GetAllAsync4 ?
(? @
)@ A
;A B
var 
SchedulesDto 
= 
_mapper "
." #
Map# &
<& '
List' +
<+ ,
ScheduleDto, 7
>7 8
>8 9
(9 :
	Schedules: C
)C D
;D E
return 
ApiResponse 
< 
List 
<  
ScheduleDto  +
>+ ,
>, -
.- .
SuccessResult. ;
(; <
SchedulesDto< H
)H I
;I J
} 
} ÷
YD:\BootcampProject\src\04.Application\Feature\Schedules\Commands\DeleteScheduleCommand.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
	Schedules$ -
.- .
Commands. 6
;6 7
public

 
class

 !
DeleteScheduleCommand

 "
:

# $
IRequest

% -
<

- .
ApiResponse

. 9
<

9 :
object

: @
>

@ A
>

A B
{ 
public 

Guid 
RefId 
{ 
get 
; 
set  
;  !
}" #
} 
public 
class (
DeleteScheduleCommandHandler )
:* +
IRequestHandler, ;
<; <!
DeleteScheduleCommand< Q
,Q R
ApiResponseS ^
<^ _
object_ e
>e f
>f g
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
private 
readonly 
ILogger 
< (
DeleteScheduleCommandHandler 9
>9 :
_logger; B
;B C
public 
(
DeleteScheduleCommandHandler '
(' (
IUnitOfWork( 3

unitOfWork4 >
,> ?
IMapper@ G
mapperH N
,N O
ILoggerP W
<W X(
DeleteScheduleCommandHandlerX t
>t u
loggerv |
)| }
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
_logger 
= 
logger 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
object" (
>( )
>) *
Handle+ 1
(1 2!
DeleteScheduleCommand2 G
requestH O
,O P
CancellationTokenQ b
cancellationTokenc t
)t u
{ 
var 
schedule 
= 
await 
_unitOfWork (
.( )
	Schedules) 2
. 
GetByRefIdAsync 
( 
request $
.$ %
RefId% *
)* +
;+ ,
if 

( 
schedule 
== 
null 
) 
{ 	
throw 
new 
NotFoundException '
(' (
$str( 8
,8 9
request: A
.A B
RefIdB G
)G H
;H I
}   	
await"" 
_unitOfWork"" 
."" 
	Schedules"" #
.""# $
DeleteAsync""$ /
(""/ 0
request""0 7
.""7 8
RefId""8 =
)""= >
;""> ?
await## 
_unitOfWork## 
.## 
SaveChangesAsync## *
(##* +
)##+ ,
;##, -
_logger%% 
.%% 
LogInformation%% 
(%% 
$str%% B
,%%B C
request%%D K
.%%K L
RefId%%L Q
)%%Q R
;%%R S
return'' 
ApiResponse'' 
<'' 
object'' !
>''! "
.''" #
SuccessResult''# 0
(''0 1
)''1 2
;''2 3
}(( 
})) ’
YD:\BootcampProject\src\04.Application\Feature\Schedules\Commands\CreateScheduleCommand.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
	Schedules$ -
.- .
Commands. 6
;6 7
public

 
class

 !
CreateScheduleCommand

 "
:

# $
IRequest

% -
<

- .
ApiResponse

. 9
<

9 :
ScheduleDto

: E
>

E F
>

F G
{ 
public 
$
CreateScheduleRequestDto #
createScheduleDto$ 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
=D E
nullF J
!J K
;K L
} 
public 
class (
CreateScheduleCommandHandler )
:* +
IRequestHandler, ;
<; <!
CreateScheduleCommand< Q
,Q R
ApiResponseS ^
<^ _
ScheduleDto_ j
>j k
>k l
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
private 
readonly 
ILogger 
< (
CreateScheduleCommandHandler 9
>9 :
_logger; B
;B C
public 
(
CreateScheduleCommandHandler '
(' (
IUnitOfWork( 3

unitOfWork4 >
,> ?
IMapper@ G
mapperH N
,N O
ILoggerP W
<W X(
CreateScheduleCommandHandlerX t
>t u
loggerv |
)| }
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
_logger 
= 
logger 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
ScheduleDto" -
>- .
>. /
Handle0 6
(6 7!
CreateScheduleCommand7 L
requestM T
,T U
CancellationTokenV g
cancellationTokenh y
)y z
{ 
var 
schedule 
= 
_mapper 
. 
Map "
<" #
Schedule# +
>+ ,
(, -
request- 4
.4 5
createScheduleDto5 F
)F G
;G H
await 
_unitOfWork 
. 
	Schedules #
.# $
CreateAsync$ /
(/ 0
schedule0 8
)8 9
;9 :
await 
_unitOfWork 
. 
SaveChangesAsync *
(* +
)+ ,
;, -
_logger   
.   
LogInformation   
(   
$str   M
,  M N
schedule  O W
.  W X
RefId  X ]
)  ] ^
;  ^ _
var"" 
ScheduleDto"" 
="" 
_mapper"" !
.""! "
Map""" %
<""% &
ScheduleDto""& 1
>""1 2
(""2 3
schedule""3 ;
)""; <
;""< =
return$$ 
ApiResponse$$ 
<$$ 
ScheduleDto$$ &
>$$& '
.$$' (
SuccessResult$$( 5
($$5 6
ScheduleDto$$6 A
)$$A B
;$$B C
}%% 
}&& ª
dD:\BootcampProject\src\04.Application\Feature\PaymentMethods\Queries\GetPaymentMethodByRefIdQuery.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
PaymentMethods$ 2
.2 3
Queries3 :
;: ;
public		 
class		 (
GetPaymentMethodByRefIdQuery		 )
:		* +
IRequest		, 4
<		4 5
ApiResponse		5 @
<		@ A
PaymentMethodDto		A Q
>		Q R
>		R S
{

 
public 

Guid 
RefId 
{ 
get 
; 
set  
;  !
}" #
} 
public 
class /
#GetPaymentMethodByRefIdQueryHandler 0
:1 2
IRequestHandler3 B
<B C(
GetPaymentMethodByRefIdQueryC _
,_ `
ApiResponsea l
<l m
PaymentMethodDtom }
>} ~
>~ 
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
public 
/
#GetPaymentMethodByRefIdQueryHandler .
(. /
IUnitOfWork/ :

unitOfWork; E
,E F
IMapperG N
mapperO U
)U V
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
PaymentMethodDto" 2
>2 3
>3 4
Handle5 ;
(; <(
GetPaymentMethodByRefIdQuery< X
requestY `
,` a
CancellationTokenb s
cancellationToken	t Ö
)
Ö Ü
{ 
var 
paymentMethod 
= 
await !
_unitOfWork" -
.- .
PaymentMethods. <
.< =
GetByRefIdAsync= L
(L M
requestM T
.T U
RefIdU Z
)Z [
;[ \
if 

( 
paymentMethod 
== 
null !
)! "
{ 	
throw 
new 
NotFoundException '
(' (
$str( =
,= >
request? F
.F G
RefIdG L
)L M
;M N
} 	
var 
paymentMethodDto 
= 
_mapper &
.& '
Map' *
<* +
PaymentMethodDto+ ;
>; <
(< =
paymentMethod= J
)J K
;K L
return   
ApiResponse   
<   
PaymentMethodDto   +
>  + ,
.  , -
SuccessResult  - :
(  : ;
paymentMethodDto  ; K
)  K L
;  L M
}!! 
}"" ˙
aD:\BootcampProject\src\04.Application\Feature\PaymentMethods\Queries\GetAllPaymentMethodsQuery.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
PaymentMethods$ 2
.2 3
Queries3 :
;: ;
public 
class %
GetAllPaymentMethodsQuery &
:' (
IRequest) 1
<1 2
ApiResponse2 =
<= >
List> B
<B C
PaymentMethodDtoC S
>S T
>T U
>U V
{		 
}

 
public 
class ,
 GetAllPaymentMethodsQueryHandler -
:. /
IRequestHandler0 ?
<? @%
GetAllPaymentMethodsQuery@ Y
,Y Z
ApiResponse[ f
<f g
Listg k
<k l
PaymentMethodDtol |
>| }
>} ~
>~ 
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
public 
,
 GetAllPaymentMethodsQueryHandler +
(+ ,
IUnitOfWork, 7

unitOfWork8 B
,B C
IMapperD K
mapperL R
)R S
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
List" &
<& '
PaymentMethodDto' 7
>7 8
>8 9
>9 :
Handle; A
(A B%
GetAllPaymentMethodsQueryB [
request\ c
,c d
CancellationTokene v
cancellationToken	w à
)
à â
{ 
var 
paymentMethods 
= 
await "
_unitOfWork# .
.. /
PaymentMethods/ =
.= >
GetAllAsync> I
(I J
)J K
;K L
var 
paymentMethodsDto 
= 
_mapper  '
.' (
Map( +
<+ ,
List, 0
<0 1
PaymentMethodDto1 A
>A B
>B C
(C D
paymentMethodsD R
)R S
;S T
return 
ApiResponse 
< 
List 
<  
PaymentMethodDto  0
>0 1
>1 2
.2 3
SuccessResult3 @
(@ A
paymentMethodsDtoA R
)R S
;S T
} 
} ·#
cD:\BootcampProject\src\04.Application\Feature\PaymentMethods\Commands\UpdatePaymentMethodCommand.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
PaymentMethods$ 2
.2 3
Commands3 ;
;; <
public

 
class

 &
UpdatePaymentMethodCommand

 '
:

( )
IRequest

* 2
<

2 3
ApiResponse

3 >
<

> ?
PaymentMethodDto

? O
>

O P
>

P Q
{ 
public 

Guid 
RefId 
{ 
get 
; 
set  
;  !
}" #
public 
)
UpdatePaymentMethodRequestDto ("
updatePaymentMethodDto) ?
{@ A
getB E
;E F
setG J
;J K
}L M
=N O
nullP T
!T U
;U V
} 
public 
class -
!UpdatePaymentMethodCommandHandler .
:/ 0
IRequestHandler1 @
<@ A&
UpdatePaymentMethodCommandA [
,[ \
ApiResponse] h
<h i
PaymentMethodDtoi y
>y z
>z {
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
private 
readonly 
ILogger 
< -
!UpdatePaymentMethodCommandHandler >
>> ?
_logger@ G
;G H
public 
-
!UpdatePaymentMethodCommandHandler ,
(, -
IUnitOfWork- 8

unitOfWork9 C
,C D
IMapperE L
mapperM S
,S T
ILoggerU \
<\ ]-
!UpdatePaymentMethodCommandHandler] ~
>~ 
logger
Ä Ü
)
Ü á
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
_logger 
= 
logger 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
PaymentMethodDto" 2
>2 3
>3 4
Handle5 ;
(; <&
UpdatePaymentMethodCommand< V
requestW ^
,^ _
CancellationToken` q
cancellationToken	r É
)
É Ñ
{ 
var 
paymentMethod 
= 
await !
_unitOfWork" -
.- .
PaymentMethods. <
. 
GetByRefIdAsync 
( 
request $
.$ %
RefId% *
)* +
;+ ,
if 

( 
paymentMethod 
== 
null !
)! "
{ 	
throw   
new   
NotFoundException   '
(  ' (
$str  ( =
,  = >
request  ? F
.  F G
RefId  G L
)  L M
;  M N
}!! 	
_mapper## 
.## 
Map## 
(## 
request## 
.## "
updatePaymentMethodDto## 2
,##2 3
paymentMethod##4 A
)##A B
;##B C
var$$  
updatedPaymentMethod$$  
=$$! "
await$$# (
_unitOfWork$$) 4
.$$4 5
PaymentMethods$$5 C
.$$C D
UpdateAsync$$D O
($$O P
paymentMethod$$P ]
)$$] ^
;$$^ _
await%% 
_unitOfWork%% 
.%% 
SaveChangesAsync%% *
(%%* +
)%%+ ,
;%%, -
_logger'' 
.'' 
LogInformation'' 
('' 
$str'' L
,''L M
request''N U
.''U V
RefId''V [
)''[ \
;''\ ]
var)) 
paymentMethodDto)) 
=)) 
_mapper)) &
.))& '
Map))' *
<))* +
PaymentMethodDto))+ ;
>)); <
())< = 
updatedPaymentMethod))= Q
)))Q R
;))R S
return++ 
ApiResponse++ 
<++ 
PaymentMethodDto++ +
>+++ ,
.++, -
SuccessResult++- :
(++: ;
paymentMethodDto++; K
)++K L
;++L M
},, 
}-- †
cD:\BootcampProject\src\04.Application\Feature\PaymentMethods\Commands\DeletePaymentMethodCommand.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
PaymentMethods$ 2
.2 3
Commands3 ;
;; <
public

 
class

 &
DeletePaymentMethodCommand

 '
:

( )
IRequest

* 2
<

2 3
ApiResponse

3 >
<

> ?
object

? E
>

E F
>

F G
{ 
public 

Guid 
RefId 
{ 
get 
; 
set  
;  !
}" #
} 
public 
class -
!DeletePaymentMethodCommandHandler .
:/ 0
IRequestHandler1 @
<@ A&
DeletePaymentMethodCommandA [
,[ \
ApiResponse] h
<h i
objecti o
>o p
>p q
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
private 
readonly 
ILogger 
< -
!DeletePaymentMethodCommandHandler >
>> ?
_logger@ G
;G H
public 
-
!DeletePaymentMethodCommandHandler ,
(, -
IUnitOfWork- 8

unitOfWork9 C
,C D
IMapperE L
mapperM S
,S T
ILoggerU \
<\ ]-
!DeletePaymentMethodCommandHandler] ~
>~ 
logger
Ä Ü
)
Ü á
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
_logger 
= 
logger 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
object" (
>( )
>) *
Handle+ 1
(1 2&
DeletePaymentMethodCommand2 L
requestM T
,T U
CancellationTokenV g
cancellationTokenh y
)y z
{ 
var 
paymentMethod 
= 
await !
_unitOfWork" -
.- .
PaymentMethods. <
. 
GetByRefIdAsync 
( 
request $
.$ %
RefId% *
)* +
;+ ,
if 

( 
paymentMethod 
== 
null !
)! "
{ 	
throw 
new 
NotFoundException '
(' (
$str( =
,= >
request? F
.F G
RefIdG L
)L M
;M N
}   	
await"" 
_unitOfWork"" 
."" 
PaymentMethods"" (
.""( )
DeleteAsync"") 4
(""4 5
request""5 <
.""< =
RefId""= B
)""B C
;""C D
await## 
_unitOfWork## 
.## 
SaveChangesAsync## *
(##* +
)##+ ,
;##, -
_logger%% 
.%% 
LogInformation%% 
(%% 
$str%% L
,%%L M
request%%N U
.%%U V
RefId%%V [
)%%[ \
;%%\ ]
return'' 
ApiResponse'' 
<'' 
object'' !
>''! "
.''" #
SuccessResult''# 0
(''0 1
)''1 2
;''2 3
}(( 
})) ∆1
cD:\BootcampProject\src\04.Application\Feature\PaymentMethods\Commands\CreatePaymentMethodCommand.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
PaymentMethods$ 2
.2 3
Commands3 ;
;; <
public

 
class

 &
CreatePaymentMethodCommand

 '
:

( )
IRequest

* 2
<

2 3
ApiResponse

3 >
<

> ?
PaymentMethodDto

? O
>

O P
>

P Q
{ 
public 
)
CreatePaymentMethodRequestDto ("
createPaymentMethodDto) ?
{@ A
getB E
;E F
setG J
;J K
}L M
=N O
nullP T
!T U
;U V
} 
public 
class -
!CreatePaymentMethodCommandHandler .
:/ 0
IRequestHandler1 @
<@ A&
CreatePaymentMethodCommandA [
,[ \
ApiResponse] h
<h i
PaymentMethodDtoi y
>y z
>z {
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
private 
readonly 
ILogger 
< -
!CreatePaymentMethodCommandHandler >
>> ?
_logger@ G
;G H
public 
-
!CreatePaymentMethodCommandHandler ,
(, -
IUnitOfWork- 8

unitOfWork9 C
,C D
IMapperE L
mapperM S
,S T
ILoggerU \
<\ ]-
!CreatePaymentMethodCommandHandler] ~
>~ 
logger
Ä Ü
)
Ü á
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
_logger 
= 
logger 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
PaymentMethodDto" 2
>2 3
>3 4
Handle5 ;
(; <&
CreatePaymentMethodCommand< V
requestW ^
,^ _
CancellationToken` q
cancellationToken	r É
)
É Ñ
{ 
var 
paymentMethod 
= 
_mapper #
.# $
Map$ '
<' (
PaymentMethod( 5
>5 6
(6 7
request7 >
.> ?"
createPaymentMethodDto? U
)U V
;V W
var 
logourl 
= 
request 
. "
createPaymentMethodDto 4
.4 5
LogoUrl5 <
;< =
if 

( 
! 
string 
. 
IsNullOrWhiteSpace &
(& '
logourl' .
). /
&&0 2
logourl 
. 

StartsWith 
( 
$str +
)+ ,
), -
{   	
var"" 

base64Data"" 
="" 
logourl"" $
.""$ %
	Substring""% .
("". /
logourl""/ 6
.""6 7
IndexOf""7 >
(""> ?
$str""? B
)""B C
+""D E
$num""F G
)""G H
;""H I
var## 
bytes## 
=## 
Convert## 
.##  
FromBase64String##  0
(##0 1

base64Data##1 ;
)##; <
;##< =
var%% 
uploadsFolder%% 
=%% 
Path%%  $
.%%$ %
Combine%%% ,
(%%, -
	Directory%%- 6
.%%6 7
GetCurrentDirectory%%7 J
(%%J K
)%%K L
,%%L M
$str%%N W
,%%W X
$str%%Y ^
)%%^ _
;%%_ `
if&& 
(&& 
!&& 
	Directory&& 
.&& 
Exists&& !
(&&! "
uploadsFolder&&" /
)&&/ 0
)&&0 1
	Directory'' 
.'' 
CreateDirectory'' )
('') *
uploadsFolder''* 7
)''7 8
;''8 9
var)) 
fileName)) 
=)) 
$")) 
{)) 
Guid)) "
.))" #
NewGuid))# *
())* +
)))+ ,
})), -
$str))- 1
"))1 2
;))2 3
var** 
filePath** 
=** 
Path** 
.**  
Combine**  '
(**' (
uploadsFolder**( 5
,**5 6
fileName**7 ?
)**? @
;**@ A
await++ 
File++ 
.++ 
WriteAllBytesAsync++ )
(++) *
filePath++* 2
,++2 3
bytes++4 9
)++9 :
;++: ;
paymentMethod.. 
... 
LogoUrl.. !
=.." #
$"..$ &
$str..& +
{..+ ,
fileName.., 4
}..4 5
"..5 6
;..6 7
}// 	
await11 
_unitOfWork11 
.11 
PaymentMethods11 (
.11( )
CreateAsync11) 4
(114 5
paymentMethod115 B
)11B C
;11C D
await22 
_unitOfWork22 
.22 
SaveChangesAsync22 *
(22* +
)22+ ,
;22, -
_logger44 
.44 
LogInformation44 
(44 
$str44 l
,44l m
paymentMethod55 
.55 
Name55 
,55 
paymentMethod55  -
.55- .
RefId55. 3
)553 4
;554 5
var77 
paymentMethodDto77 
=77 
_mapper77 &
.77& '
Map77' *
<77* +
PaymentMethodDto77+ ;
>77; <
(77< =
paymentMethod77= J
)77J K
;77K L
return99 
ApiResponse99 
<99 
PaymentMethodDto99 +
>99+ ,
.99, -
SuccessResult99- :
(99: ;
paymentMethodDto99; K
)99K L
;99L M
}:: 
};; …
YD:\BootcampProject\src\04.Application\Feature\MyClasses\Queries\GetMyClassByRefIdQuery.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
	MyClasses$ -
.- .
Queries. 5
;5 6
public		 
class		 "
GetMyClassByRefIdQuery		 #
:		$ %
IRequest		& .
<		. /
ApiResponse		/ :
<		: ;

MyClassDto		; E
>		E F
>		F G
{

 
public 

Guid 
RefId 
{ 
get 
; 
set  
;  !
}" #
} 
public 
class )
GetMyClassByRefIdQueryHandler *
:+ ,
IRequestHandler- <
<< ="
GetMyClassByRefIdQuery= S
,S T
ApiResponseU `
<` a

MyClassDtoa k
>k l
>l m
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
public 
)
GetMyClassByRefIdQueryHandler (
(( )
IUnitOfWork) 4

unitOfWork5 ?
,? @
IMapperA H
mapperI O
)O P
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "

MyClassDto" ,
>, -
>- .
Handle/ 5
(5 6"
GetMyClassByRefIdQuery6 L
requestM T
,T U
CancellationTokenV g
cancellationTokenh y
)y z
{ 
var 
myClass 
= 
await 
_unitOfWork '
.' (
	MyClasses( 1
.1 2
GetByRefIdAsync2 A
(A B
requestB I
.I J
RefIdJ O
)O P
;P Q
if 

( 
myClass 
== 
null 
) 
{ 	
throw 
new 
NotFoundException '
(' (
$str( 6
,6 7
request8 ?
.? @
RefId@ E
)E F
;F G
} 	
var 

myClassDto 
= 
_mapper  
.  !
Map! $
<$ %

MyClassDto% /
>/ 0
(0 1
myClass1 8
)8 9
;9 :
return!! 
ApiResponse!! 
<!! 

MyClassDto!! %
>!!% &
.!!& '
SuccessResult!!' 4
(!!4 5

myClassDto!!5 ?
)!!? @
;!!@ A
}"" 
}## ò
WD:\BootcampProject\src\04.Application\Feature\MyClasses\Queries\GetAllMyClassesQuery.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
	MyClasses$ -
.- .
Queries. 5
;5 6
public 
class  
GetAllMyClassesQuery !
:" #
IRequest$ ,
<, -
ApiResponse- 8
<8 9
List9 =
<= >

MyClassDto> H
>H I
>I J
>J K
{		 
}

 
public 
class '
GetAllMyClassesQueryHandler (
:) *
IRequestHandler+ :
<: ; 
GetAllMyClassesQuery; O
,O P
ApiResponseQ \
<\ ]
List] a
<a b

MyClassDtob l
>l m
>m n
>n o
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
public 
'
GetAllMyClassesQueryHandler &
(& '
IUnitOfWork' 2

unitOfWork3 =
,= >
IMapper? F
mapperG M
)M N
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
List" &
<& '

MyClassDto' 1
>1 2
>2 3
>3 4
Handle5 ;
(; < 
GetAllMyClassesQuery< P
requestQ X
,X Y
CancellationTokenZ k
cancellationTokenl }
)} ~
{ 
var 
	myClasses 
= 
await 
_unitOfWork )
.) *
	MyClasses* 3
.3 4
GetAllAsync4 ?
(? @
)@ A
;A B
var 
myClassesDto 
= 
_mapper "
." #
Map# &
<& '
List' +
<+ ,

MyClassDto, 6
>6 7
>7 8
(8 9
	myClasses9 B
)B C
;C D
return 
ApiResponse 
< 
List 
<  

MyClassDto  *
>* +
>+ ,
., -
SuccessResult- :
(: ;
myClassesDto; G
)G H
;H I
} 
} ñ
bD:\BootcampProject\src\04.Application\Feature\MyClasses\Queries\GetAllMyClassesByUserRefIdQuery.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
	MyClasses$ -
.- .
Queries. 5
;5 6
public		 
class		 +
GetAllMyClassesByUserRefIdQuery		 ,
:		- .
IRequest		/ 7
<		7 8
ApiResponse		8 C
<		C D
List		D H
<		H I

MyClassDto		I S
>		S T
>		T U
>		U V
{

 
public 

Guid 
	UserRefId 
{ 
get 
;  
set! $
;$ %
}& '
} 
public 
class 2
&GetAllMyClassesByUserRefIdQueryHandler 3
:4 5
IRequestHandler6 E
<E F+
GetAllMyClassesByUserRefIdQueryF e
,e f
ApiResponseg r
<r s
Lists w
<w x

MyClassDto	x Ç
>
Ç É
>
É Ñ
>
Ñ Ö
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
public 
2
&GetAllMyClassesByUserRefIdQueryHandler 1
(1 2
IUnitOfWork2 =

unitOfWork> H
,H I
IMapperJ Q
mapperR X
)X Y
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
List" &
<& '

MyClassDto' 1
>1 2
>2 3
>3 4
Handle5 ;
(; <+
GetAllMyClassesByUserRefIdQuery< [
request\ c
,c d
CancellationTokene v
cancellationToken	w à
)
à â
{ 
var 
	myClasses 
= 
await 
_unitOfWork )
.) *
	MyClasses* 3
.3 4"
GetAllByUserRefIdAsync4 J
(J K
requestK R
.R S
	UserRefIdS \
)\ ]
;] ^
if 

( 
	myClasses 
== 
null 
) 
{ 	
throw 
new 
NotFoundException '
(' (
$str( 4
,4 5
request6 =
.= >
	UserRefId> G
)G H
;H I
} 	
var 
myClassesDto 
= 
_mapper "
." #
Map# &
<& '
List' +
<+ ,

MyClassDto, 6
>6 7
>7 8
(8 9
	myClasses9 B
)B C
;C D
return   
ApiResponse   
<   
List   
<    

MyClassDto    *
>  * +
>  + ,
.  , -
SuccessResult  - :
(  : ;
myClassesDto  ; G
)  G H
;  H I
}!! 
}"" Ã
XD:\BootcampProject\src\04.Application\Feature\MyClasses\Commands\DeleteMyClassCommand.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
	MyClasses$ -
.- .
Commands. 6
;6 7
public

 
class

  
DeleteMyClassCommand

 !
:

" #
IRequest

$ ,
<

, -
ApiResponse

- 8
<

8 9
object

9 ?
>

? @
>

@ A
{ 
public 

Guid 
RefId 
{ 
get 
; 
set  
;  !
}" #
} 
public 
class '
DeleteMyClassCommandHandler (
:) *
IRequestHandler+ :
<: ; 
DeleteMyClassCommand; O
,O P
ApiResponseQ \
<\ ]
object] c
>c d
>d e
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
private 
readonly 
ILogger 
< '
DeleteMyClassCommandHandler 8
>8 9
_logger: A
;A B
public 
'
DeleteMyClassCommandHandler &
(& '
IUnitOfWork' 2

unitOfWork3 =
,= >
IMapper? F
mapperG M
,M N
ILoggerO V
<V W'
DeleteMyClassCommandHandlerW r
>r s
loggert z
)z {
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
_logger 
= 
logger 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
object" (
>( )
>) *
Handle+ 1
(1 2 
DeleteMyClassCommand2 F
requestG N
,N O
CancellationTokenP a
cancellationTokenb s
)s t
{ 
var 
myClass 
= 
await 
_unitOfWork '
.' (
	MyClasses( 1
. 
GetByRefIdAsync 
( 
request $
.$ %
RefId% *
)* +
;+ ,
if 

( 
myClass 
== 
null 
) 
{ 	
throw 
new 
NotFoundException '
(' (
$str( 7
,7 8
request9 @
.@ A
RefIdA F
)F G
;G H
}   	
await"" 
_unitOfWork"" 
."" 
	MyClasses"" #
.""# $
DeleteAsync""$ /
(""/ 0
request""0 7
.""7 8
RefId""8 =
)""= >
;""> ?
await## 
_unitOfWork## 
.## 
SaveChangesAsync## *
(##* +
)##+ ,
;##, -
_logger%% 
.%% 
LogInformation%% 
(%% 
$str%% @
,%%@ A
request%%B I
.%%I J
RefId%%J O
)%%O P
;%%P Q
return'' 
ApiResponse'' 
<'' 
object'' !
>''! "
.''" #
SuccessResult''# 0
(''0 1
)''1 2
;''2 3
}(( 
})) æ
XD:\BootcampProject\src\04.Application\Feature\MyClasses\Commands\CreateMyClassCommand.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
	MyClasses$ -
.- .
Commands. 6
;6 7
public

 
class

  
CreateMyClassCommand

 !
:

" #
IRequest

$ ,
<

, -
ApiResponse

- 8
<

8 9

MyClassDto

9 C
>

C D
>

D E
{ 
public 
#
CreateMyClassRequestDto "
createMyClassDto# 3
{4 5
get6 9
;9 :
set; >
;> ?
}@ A
=B C
nullD H
!H I
;I J
} 
public 
class '
CreateMyClassCommandHandler (
:) *
IRequestHandler+ :
<: ; 
CreateMyClassCommand; O
,O P
ApiResponseQ \
<\ ]

MyClassDto] g
>g h
>h i
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
private 
readonly 
ILogger 
< '
CreateMyClassCommandHandler 8
>8 9
_logger: A
;A B
public 
'
CreateMyClassCommandHandler &
(& '
IUnitOfWork' 2

unitOfWork3 =
,= >
IMapper? F
mapperG M
,M N
ILoggerO V
<V W'
CreateMyClassCommandHandlerW r
>r s
loggert z
)z {
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
_logger 
= 
logger 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "

MyClassDto" ,
>, -
>- .
Handle/ 5
(5 6 
CreateMyClassCommand6 J
requestK R
,R S
CancellationTokenT e
cancellationTokenf w
)w x
{ 
var 
myClass 
= 
_mapper 
. 
Map !
<! "
MyClass" )
>) *
(* +
request+ 2
.2 3
createMyClassDto3 C
)C D
;D E
await 
_unitOfWork 
. 
	MyClasses #
.# $
CreateAsync$ /
(/ 0
myClass0 7
)7 8
;8 9
await 
_unitOfWork 
. 
SaveChangesAsync *
(* +
)+ ,
;, -
_logger   
.   
LogInformation   
(   
$str   K
,  K L
myClass  M T
.  T U
RefId  U Z
)  Z [
;  [ \
var"" 

myClassDto"" 
="" 
_mapper""  
.""  !
Map""! $
<""$ %

MyClassDto""% /
>""/ 0
(""0 1
myClass""1 8
)""8 9
;""9 :
return$$ 
ApiResponse$$ 
<$$ 

MyClassDto$$ %
>$$% &
.$$& '
SuccessResult$$' 4
($$4 5

myClassDto$$5 ?
)$$? @
;$$@ A
}%% 
}&& ¬$
lD:\BootcampProject\src\04.Application\Feature\Invoices\Queries\GetInvoiceDetailsByInvoiceIdProtectedQuery.cs
	namespace		 	
MyApp		
 
.		 
Application		 
.		 
Feature		 #
.		# $
Invoices		$ ,
.		, -
Queries		- 4
;		4 5
public 
class 6
*GetInvoiceDetailsByInvoiceIdProtectedQuery 7
:8 9
IRequest: B
<B C
ApiResponseC N
<N O
IEnumerableO Z
<Z [
InvoiceDetailDto[ k
>k l
>l m
>m n
{ 
public 

Guid 
RefId 
{ 
get 
; 
set  
;  !
}" #
public 

bool 
IsPrivileged 
{ 
get "
;" #
set$ '
;' (
}) *
public 

Guid 
	UserRefId 
{ 
get 
;  
set! $
;$ %
}& '
} 
public 
class =
1GetInvoiceDetailsByInvoiceIdProtectedQueryHandler >
:? @
IRequestHandlerA P
<P Q6
*GetInvoiceDetailsByInvoiceIdProtectedQueryQ {
,{ |
ApiResponse	} à
<
à â
IEnumerable
â î
<
î ï
InvoiceDetailDto
ï •
>
• ¶
>
¶ ß
>
ß ®
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
public 
=
1GetInvoiceDetailsByInvoiceIdProtectedQueryHandler <
(< =
IUnitOfWork= H

unitOfWorkI S
,S T
IMapperU \
mapper] c
)c d
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
IEnumerable" -
<- .
InvoiceDetailDto. >
>> ?
>? @
>@ A
HandleB H
(H I6
*GetInvoiceDetailsByInvoiceIdProtectedQueryI s
requestt {
,{ |
CancellationToken	} é
cancellationToken
è †
)
† °
{ 
var 
invoice 
= 
await 
_unitOfWork '
.' (
InvoiceManager( 6
.6 7
GetByRefIdAsync7 F
(F G
requestG N
.N O
RefIdO T
)T U
;U V
if 

( 
invoice 
== 
null 
) 
{ 	
throw   
new   
NotFoundException   '
(  ' (
$str  ( 7
,  7 8
request  9 @
.  @ A
RefId  A F
)  F G
;  G H
}!! 	
if"" 

("" 
!"" 
request"" 
."" 
IsPrivileged"" !
&&""" $
(""% &
invoice""& -
.""- .
User"". 2
?""2 3
.""3 4
RefId""4 9
!="": <
request""= D
.""D E
	UserRefId""E N
)""N O
)""O P
{## 	
throw%% 
new%% 
NotFoundException%% '
(%%' (
$str%%( 7
,%%7 8
request%%9 @
.%%@ A
RefId%%A F
)%%F G
;%%G H
}&& 	
var'' 
invoiceDetails'' 
='' 
await'' "
_unitOfWork''# .
.''. /
InvoiceManager''/ =
.''= >"
GetDetailsByRefIdAsync''> T
(''T U
request''U \
.''\ ]
RefId''] b
)''b c
;''c d
var(( 
invoiceDetailsDto(( 
=(( 
_mapper((  '
.((' (
Map((( +
<((+ ,
IEnumerable((, 7
<((7 8
InvoiceDetailDto((8 H
>((H I
>((I J
(((J K
invoiceDetails((K Y
)((Y Z
;((Z [
return)) 
ApiResponse)) 
<)) 
IEnumerable)) &
<))& '
InvoiceDetailDto))' 7
>))7 8
>))8 9
.))9 :
SuccessResult)): G
())G H
invoiceDetailsDto))H Y
)))Y Z
;))Z [
}** 
}++ ¢
fD:\BootcampProject\src\04.Application\Feature\Invoices\Queries\GetInvoiceByRefIdAsyncProtectedQuery.cs
	namespace		 	
MyApp		
 
.		 
Application		 
.		 
Feature		 #
.		# $
Invoices		$ ,
.		, -
Queries		- 4
;		4 5
public 
class 0
$GetInvoiceByRefIdAsyncProtectedQuery 1
:2 3
IRequest4 <
<< =
ApiResponse= H
<H I

InvoiceDtoI S
>S T
>T U
{ 
public 

Guid 
RefId 
{ 
get 
; 
set  
;  !
}" #
public 

bool 
IsPrivileged 
{ 
get "
;" #
set$ '
;' (
}) *
public 

Guid 
	UserRefId 
{ 
get 
;  
set! $
;$ %
}& '
} 
public 
class 7
+GetInvoiceByRefIdAsyncProtectedQueryHandler 8
:9 :
IRequestHandler; J
<J K0
$GetInvoiceByRefIdAsyncProtectedQueryK o
,o p
ApiResponseq |
<| }

InvoiceDto	} á
>
á à
>
à â
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
public 
7
+GetInvoiceByRefIdAsyncProtectedQueryHandler 6
(6 7
IUnitOfWork7 B

unitOfWorkC M
,M N
IMapperO V
mapperW ]
)] ^
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "

InvoiceDto" ,
>, -
>- .
Handle/ 5
(5 60
$GetInvoiceByRefIdAsyncProtectedQuery6 Z
request[ b
,b c
CancellationTokend u
cancellationToken	v á
)
á à
{ 
var 
invoice 
= 
await 
_unitOfWork '
.' (
InvoiceManager( 6
.6 7
GetByRefIdAsync7 F
(F G
requestG N
.N O
RefIdO T
)T U
;U V
if 

( 
invoice 
== 
null 
) 
{ 	
throw   
new   
NotFoundException   '
(  ' (
$str  ( 7
,  7 8
request  9 @
.  @ A
RefId  A F
)  F G
;  G H
}!! 	
if"" 

("" 
!"" 
request"" 
."" 
IsPrivileged"" !
&&""" $
(""% &
invoice""& -
.""- .
User"". 2
?""2 3
.""3 4
RefId""4 9
!="": <
request""= D
.""D E
	UserRefId""E N
)""N O
)""O P
{## 	
throw%% 
new%% 
NotFoundException%% '
(%%' (
$str%%( 7
,%%7 8
request%%9 @
.%%@ A
RefId%%A F
)%%F G
;%%G H
}&& 	
var'' 

invoiceDto'' 
='' 
_mapper''  
.''  !
Map''! $
<''$ %

InvoiceDto''% /
>''/ 0
(''0 1
invoice''1 8
)''8 9
;''9 :
return(( 
ApiResponse(( 
<(( 

InvoiceDto(( %
>((% &
.((& '
SuccessResult((' 4
(((4 5

invoiceDto((5 ?
)((? @
;((@ A
})) 
}** ë
UD:\BootcampProject\src\04.Application\Feature\Invoices\Queries\GetAllInvoicesQuery.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
Invoices$ ,
., -
Queries- 4
;4 5
public 
class 
GetAllInvoicesQuery  
:! "
IRequest# +
<+ ,
ApiResponse, 7
<7 8
List8 <
<< =

InvoiceDto= G
>G H
>H I
>I J
{		 
}

 
public 
class &
GetAllInvoicesQueryHandler '
:( )
IRequestHandler* 9
<9 :
GetAllInvoicesQuery: M
,M N
ApiResponseO Z
<Z [
List[ _
<_ `

InvoiceDto` j
>j k
>k l
>l m
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
public 
&
GetAllInvoicesQueryHandler %
(% &
IUnitOfWork& 1

unitOfWork2 <
,< =
IMapper> E
mapperF L
)L M
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
List" &
<& '

InvoiceDto' 1
>1 2
>2 3
>3 4
Handle5 ;
(; <
GetAllInvoicesQuery< O
requestP W
,W X
CancellationTokenY j
cancellationTokenk |
)| }
{ 
var 
invoices 
= 
await 
_unitOfWork (
.( )
InvoiceManager) 7
.7 8
GetAllAsync8 C
(C D
)D E
;E F
var 
invoicesDto 
= 
_mapper !
.! "
Map" %
<% &
List& *
<* +

InvoiceDto+ 5
>5 6
>6 7
(7 8
invoices8 @
)@ A
;A B
return 
ApiResponse 
< 
List 
<  

InvoiceDto  *
>* +
>+ ,
., -
SuccessResult- :
(: ;
invoicesDto; F
)F G
;G H
} 
} é
`D:\BootcampProject\src\04.Application\Feature\Invoices\Queries\GetAllInvoicesByUserRefIdQuery.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
Invoices$ ,
., -
Queries- 4
;4 5
public

 
class

 *
GetAllInvoicesByUserRefIdQuery

 +
:

, -
IRequest

. 6
<

6 7
ApiResponse

7 B
<

B C
List

C G
<

G H

InvoiceDto

H R
>

R S
>

S T
>

T U
{ 
public 

Guid 
	UserRefId 
{ 
get 
;  
set! $
;$ %
}& '
} 
public 
class 1
%GetAllInvoicesByUserRefIdQueryHandler 2
:3 4
IRequestHandler5 D
<D E*
GetAllInvoicesByUserRefIdQueryE c
,c d
ApiResponsee p
<p q
Listq u
<u v

InvoiceDto	v Ä
>
Ä Å
>
Å Ç
>
Ç É
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
public 
1
%GetAllInvoicesByUserRefIdQueryHandler 0
(0 1
IUnitOfWork1 <

unitOfWork= G
,G H
IMapperI P
mapperQ W
)W X
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
List" &
<& '

InvoiceDto' 1
>1 2
>2 3
>3 4
Handle5 ;
(; <*
GetAllInvoicesByUserRefIdQuery< Z
request[ b
,b c
CancellationTokend u
cancellationToken	v á
)
á à
{ 
var 
invoices 
= 
await 
_unitOfWork (
.( )
InvoiceManager) 7
.7 8"
GetAllByUserRefIdAsync8 N
(N O
requestO V
.V W
	UserRefIdW `
)` a
;a b
if 

( 
invoices 
== 
null 
) 
{ 	
throw 
new 
NotFoundException '
(' (
$str( 4
,4 5
request6 =
.= >
	UserRefId> G
)G H
;H I
} 	
var   
invoicesDto   
=   
_mapper   !
.  ! "
Map  " %
<  % &
List  & *
<  * +

InvoiceDto  + 5
>  5 6
>  6 7
(  7 8
invoices  8 @
)  @ A
;  A B
return"" 
ApiResponse"" 
<"" 
List"" 
<""  

InvoiceDto""  *
>""* +
>""+ ,
."", -
SuccessResult""- :
("": ;
invoicesDto""; F
)""F G
;""G H
}## 
}$$ ≥
VD:\BootcampProject\src\04.Application\Feature\Courses\Queries\GetCourseByRefIdQuery.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
Courses$ +
.+ ,
Queries, 3
;3 4
public		 
class		 !
GetCourseByRefIdQuery		 "
:		# $
IRequest		% -
<		- .
ApiResponse		. 9
<		9 :
	CourseDto		: C
>		C D
>		D E
{

 
public 

Guid 
RefId 
{ 
get 
; 
set  
;  !
}" #
} 
public 
class (
GetCourseByRefIdQueryHandler )
:* +
IRequestHandler, ;
<; <!
GetCourseByRefIdQuery< Q
,Q R
ApiResponseS ^
<^ _
	CourseDto_ h
>h i
>i j
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
public 
(
GetCourseByRefIdQueryHandler '
(' (
IUnitOfWork( 3

unitOfWork4 >
,> ?
IMapper@ G
mapperH N
)N O
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
	CourseDto" +
>+ ,
>, -
Handle. 4
(4 5!
GetCourseByRefIdQuery5 J
requestK R
,R S
CancellationTokenT e
cancellationTokenf w
)w x
{ 
var 
course 
= 
await 
_unitOfWork &
.& '
Courses' .
.. /
GetByRefIdAsync/ >
(> ?
request? F
.F G
RefIdG L
)L M
;M N
if 

( 
course 
== 
null 
) 
{ 	
throw 
new 
NotFoundException '
(' (
$str( 6
,6 7
request8 ?
.? @
RefId@ E
)E F
;F G
} 	
var 
	courseDto 
= 
_mapper 
.  
Map  #
<# $
	CourseDto$ -
>- .
(. /
course/ 5
)5 6
;6 7
return   
ApiResponse   
<   
	CourseDto   $
>  $ %
.  % &
SuccessResult  & 3
(  3 4
	courseDto  4 =
)  = >
;  > ?
}!! 
}"" ˘
SD:\BootcampProject\src\04.Application\Feature\Courses\Queries\GetAllCoursesQuery.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
Courses$ +
.+ ,
Queries, 3
;3 4
public 
class 
GetAllCoursesQuery 
:  !
IRequest" *
<* +
ApiResponse+ 6
<6 7
List7 ;
<; <
	CourseDto< E
>E F
>F G
>G H
{		 
}

 
public 
class %
GetAllCoursesQueryHandler &
:' (
IRequestHandler) 8
<8 9
GetAllCoursesQuery9 K
,K L
ApiResponseM X
<X Y
ListY ]
<] ^
	CourseDto^ g
>g h
>h i
>i j
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
public 
%
GetAllCoursesQueryHandler $
($ %
IUnitOfWork% 0

unitOfWork1 ;
,; <
IMapper= D
mapperE K
)K L
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
List" &
<& '
	CourseDto' 0
>0 1
>1 2
>2 3
Handle4 :
(: ;
GetAllCoursesQuery; M
requestN U
,U V
CancellationTokenW h
cancellationTokeni z
)z {
{ 
var 
courses 
= 
await 
_unitOfWork '
.' (
Courses( /
./ 0
GetAllAsync0 ;
(; <
)< =
;= >
var 

coursesDto 
= 
_mapper  
.  !
Map! $
<$ %
List% )
<) *
	CourseDto* 3
>3 4
>4 5
(5 6
courses6 =
)= >
;> ?
return 
ApiResponse 
< 
List 
<  
	CourseDto  )
>) *
>* +
.+ ,
SuccessResult, 9
(9 :

coursesDto: D
)D E
;E F
} 
} ÜH
\D:\BootcampProject\src\04.Application\Feature\Courses\Queries\GetAllCoursesPaginatedQuery.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
Courses$ +
.+ ,
Queries, 3
;3 4
public		 
class		 '
GetAllCoursesPaginatedQuery		 (
:		) *
IRequest		+ 3
<		3 4
ApiResponse		4 ?
<		? @
PaginatedResponse		@ Q
<		Q R
IEnumerable		R ]
<		] ^
	CourseDto		^ g
>		g h
>		h i
>		i j
>		j k
{

 
public 
!
CourseQueryParameters  

Parameters! +
;+ ,
} 
public 
class .
"GetAllCoursesPaginatedQueryHandler /
:0 1
IRequestHandler2 A
<A B'
GetAllCoursesPaginatedQueryB ]
,] ^
ApiResponse_ j
<j k
PaginatedResponsek |
<| }
IEnumerable	} à
<
à â
	CourseDto
â í
>
í ì
>
ì î
>
î ï
>
ï ñ
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
public 
.
"GetAllCoursesPaginatedQueryHandler -
(- .
IUnitOfWork. 9

unitOfWork: D
,D E
IMapperF M
mapperN T
)T U
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
PaginatedResponse" 3
<3 4
IEnumerable4 ?
<? @
	CourseDto@ I
>I J
>J K
>K L
>L M
HandleN T
(T U'
GetAllCoursesPaginatedQueryU p
requestq x
,x y
CancellationToken	z ã
cancellationToken
å ù
)
ù û
{ 
var 
query 
= 
await 
_unitOfWork %
.% &
Courses& -
.- .
GetAllAsync. 9
(9 :
): ;
;; <
if 

( 
! 
string 
. 
IsNullOrEmpty !
(! "
request" )
.) *

Parameters* 4
.4 5
Search5 ;
); <
)< =
{   	
query"" 
="" 
query"" 
."" 
Where"" 
(""  
p""  !
=>""" $
p""% &
.""& '
Name""' +
.""+ ,
Contains"", 4
(""4 5
request""5 <
.""< =

Parameters""= G
.""G H
Search""H N
)""N O
||""P R
p### $
.##$ %
Description##% 0
.##0 1
Contains##1 9
(##9 :
request##: A
.##A B

Parameters##B L
.##L M
Search##M S
)##S T
)##T U
;##U V
}$$ 	
if'' 

('' 
request'' 
.'' 

Parameters'' 
.'' 

CategoryId'' )
.'') *
HasValue''* 2
)''2 3
{(( 	
query** 
=** 
query** 
.** 
Where** 
(**  
p**  !
=>**" $
p**% &
.**& '

CategoryId**' 1
==**2 4
request**5 <
.**< =

Parameters**= G
.**G H

CategoryId**H R
.**R S
Value**S X
)**X Y
;**Y Z
}++ 	
if.. 

(.. 
request.. 
... 

Parameters.. 
... 
MinPrice.. '
...' (
HasValue..( 0
)..0 1
{// 	
query11 
=11 
query11 
.11 
Where11 
(11  
p11  !
=>11" $
p11% &
.11& '
Price11' ,
>=11- /
request110 7
.117 8

Parameters118 B
.11B C
MinPrice11C K
.11K L
Value11L Q
)11Q R
;11R S
}22 	
if55 

(55 
request55 
.55 

Parameters55 
.55 
MaxPrice55 '
.55' (
HasValue55( 0
)550 1
{66 	
query88 
=88 
query88 
.88 
Where88 
(88  
p88  !
=>88" $
p88% &
.88& '
Price88' ,
<=88- /
request880 7
.887 8

Parameters888 B
.88B C
MaxPrice88C K
.88K L
Value88L Q
)88Q R
;88R S
}99 	
query?? 
=?? 
request?? 
.?? 

Parameters?? "
.??" #
SortBy??# )
.??) *
ToLower??* 1
(??1 2
)??2 3
switch??4 :
{@@ 	
$strBB 
=>BB 
requestBB 
.BB 

ParametersBB )
.BB) *
SortDirectionBB* 7
.BB7 8
ToLowerBB8 ?
(BB? @
)BB@ A
==BBB D
$strBBE K
?CC 
queryCC 
.CC 
OrderByDescendingCC )
(CC) *
pCC* +
=>CC, .
pCC/ 0
.CC0 1
PriceCC1 6
)CC6 7
:DD 
queryDD 
.DD 
OrderByDD 
(DD  
pDD  !
=>DD" $
pDD% &
.DD& '
PriceDD' ,
)DD, -
,DD- .
$strGG 
=>GG 
requestGG "
.GG" #

ParametersGG# -
.GG- .
SortDirectionGG. ;
.GG; <
ToLowerGG< C
(GGC D
)GGD E
==GGF H
$strGGI O
?HH 
queryHH 
.HH 
OrderByDescendingHH )
(HH) *
pHH* +
=>HH, .
pHH/ 0
.HH0 1
	CreatedAtHH1 :
)HH: ;
:II 
queryII 
.II 
OrderByII 
(II  
pII  !
=>II" $
pII% &
.II& '
	CreatedAtII' 0
)II0 1
,II1 2
_LL 
=>LL 
requestLL 
.LL 

ParametersLL #
.LL# $
SortDirectionLL$ 1
.LL1 2
ToLowerLL2 9
(LL9 :
)LL: ;
==LL< >
$strLL? E
?MM 
queryMM 
.MM 
OrderByDescendingMM )
(MM) *
pMM* +
=>MM, .
pMM/ 0
.MM0 1
NameMM1 5
)MM5 6
:NN 
queryNN 
.NN 
OrderByNN 
(NN  
pNN  !
=>NN" $
pNN% &
.NN& '
NameNN' +
)NN+ ,
}OO 	
;OO	 

varTT 
totalRecordsTT 
=TT 
queryTT  
.TT  !
CountTT! &
(TT& '
)TT' (
;TT( )
varWW 
courseWW 
=WW 
queryWW 
.XX 
SkipXX 
(XX 
(XX 
requestXX 
.XX 

ParametersXX %
.XX% &

PageNumberXX& 0
-XX1 2
$numXX3 4
)XX4 5
*XX6 7
requestXX8 ?
.XX? @

ParametersXX@ J
.XXJ K
PageSizeXXK S
)XXS T
.YY 
TakeYY 
(YY 
requestYY 
.YY 

ParametersYY $
.YY$ %
PageSizeYY% -
)YY- .
.ZZ 
ToListZZ 
(ZZ 
)ZZ 
;ZZ 
var`` 

coursesDto`` 
=`` 
_mapper``  
.``  !
Map``! $
<``$ %
IEnumerable``% 0
<``0 1
	CourseDto``1 :
>``: ;
>``; <
(``< =
course``= C
)``C D
;``D E
varee 
paginatedCoursesDtoee 
=ee  !
PaginatedResponseee" 3
<ee3 4
IEnumerableee4 ?
<ee? @
	CourseDtoee@ I
>eeI J
>eeJ K
.eeK L
CreateeeL R
(eeR S

coursesDtoff 
,ff 
requestgg 
.gg 

Parametersgg 
.gg 

PageNumbergg )
,gg) *
requesthh 
.hh 

Parametershh 
.hh 
PageSizehh '
,hh' (
totalRecordsii 
)ii 
;ii 
returnkk 
ApiResponsekk 
<kk 
PaginatedResponsekk ,
<kk, -
IEnumerablekk- 8
<kk8 9
	CourseDtokk9 B
>kkB C
>kkC D
>kkD E
.kkE F
SuccessResultkkF S
(kkS T
paginatedCoursesDtokkT g
)kkg h
;kkh i
}ll 
}mm ñ"
UD:\BootcampProject\src\04.Application\Feature\Courses\Commands\UpdateCourseCommand.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
Courses$ +
.+ ,
Commands, 4
;4 5
public

 
class

 
UpdateCourseCommand

  
:

! "
IRequest

# +
<

+ ,
ApiResponse

, 7
<

7 8
	CourseDto

8 A
>

A B
>

B C
{ 
public 

Guid 
RefId 
{ 
get 
; 
set  
;  !
}" #
public 
"
UpdateCourseRequestDto !
UpdateCourseDto" 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
=@ A
nullB F
!F G
;G H
} 
public 
class &
UpdateCourseCommandHandler '
:( )
IRequestHandler* 9
<9 :
UpdateCourseCommand: M
,M N
ApiResponseO Z
<Z [
	CourseDto[ d
>d e
>e f
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
private 
readonly 
ILogger 
< &
UpdateCourseCommandHandler 7
>7 8
_logger9 @
;@ A
public 
&
UpdateCourseCommandHandler %
(% &
IUnitOfWork& 1

unitOfWork2 <
,< =
IMapper> E
mapperF L
,L M
ILoggerN U
<U V&
UpdateCourseCommandHandlerV p
>p q
loggerr x
)x y
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
_logger 
= 
logger 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
	CourseDto" +
>+ ,
>, -
Handle. 4
(4 5
UpdateCourseCommand5 H
requestI P
,P Q
CancellationTokenR c
cancellationTokend u
)u v
{ 
var 
course 
= 
await 
_unitOfWork &
.& '
Courses' .
. 
GetByRefIdAsync 
( 
request $
.$ %
RefId% *
)* +
;+ ,
if 

( 
course 
== 
null 
) 
{ 	
throw   
new   
NotFoundException   '
(  ' (
$str  ( 6
,  6 7
request  8 ?
.  ? @
RefId  @ E
)  E F
;  F G
}!! 	
_mapper## 
.## 
Map## 
(## 
request## 
.## 
UpdateCourseDto## +
,##+ ,
course##- 3
)##3 4
;##4 5
var$$ 
updatedCourse$$ 
=$$ 
await$$ !
_unitOfWork$$" -
.$$- .
Courses$$. 5
.$$5 6
UpdateAsync$$6 A
($$A B
course$$B H
)$$H I
;$$I J
await%% 
_unitOfWork%% 
.%% 
SaveChangesAsync%% *
(%%* +
)%%+ ,
;%%, -
_logger'' 
.'' 
LogInformation'' 
('' 
$str'' >
,''> ?
request''@ G
.''G H
RefId''H M
)''M N
;''N O
var)) 
	courseDto)) 
=)) 
_mapper)) 
.))  
Map))  #
<))# $
	CourseDto))$ -
>))- .
()). /
updatedCourse))/ <
)))< =
;))= >
return++ 
ApiResponse++ 
<++ 
	CourseDto++ $
>++$ %
.++% &
SuccessResult++& 3
(++3 4
	courseDto++4 =
)++= >
;++> ?
},, 
}-- ∫
UD:\BootcampProject\src\04.Application\Feature\Courses\Commands\DeleteCourseCommand.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
Courses$ +
.+ ,
Commands, 4
;4 5
public

 
class

 
DeleteCourseCommand

  
:

! "
IRequest

# +
<

+ ,
ApiResponse

, 7
<

7 8
object

8 >
>

> ?
>

? @
{ 
public 

Guid 
RefId 
{ 
get 
; 
set  
;  !
}" #
} 
public 
class &
DeleteCourseCommandHandler '
:( )
IRequestHandler* 9
<9 :
DeleteCourseCommand: M
,M N
ApiResponseO Z
<Z [
object[ a
>a b
>b c
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
private 
readonly 
ILogger 
< &
DeleteCourseCommandHandler 7
>7 8
_logger9 @
;@ A
public 
&
DeleteCourseCommandHandler %
(% &
IUnitOfWork& 1

unitOfWork2 <
,< =
IMapper> E
mapperF L
,L M
ILoggerN U
<U V&
DeleteCourseCommandHandlerV p
>p q
loggerr x
)x y
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
_logger 
= 
logger 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
object" (
>( )
>) *
Handle+ 1
(1 2
DeleteCourseCommand2 E
requestF M
,M N
CancellationTokenO `
cancellationTokena r
)r s
{ 
var 
course 
= 
await 
_unitOfWork &
.& '
Courses' .
. 
GetByRefIdAsync 
( 
request $
.$ %
RefId% *
)* +
;+ ,
if 

( 
course 
== 
null 
) 
{ 	
throw 
new 
NotFoundException '
(' (
$str( 6
,6 7
request8 ?
.? @
RefId@ E
)E F
;F G
}   	
await"" 
_unitOfWork"" 
."" 
Courses"" !
.""! "
DeleteAsync""" -
(""- .
request"". 5
.""5 6
RefId""6 ;
)""; <
;""< =
await## 
_unitOfWork## 
.## 
SaveChangesAsync## *
(##* +
)##+ ,
;##, -
_logger%% 
.%% 
LogInformation%% 
(%% 
$str%% >
,%%> ?
request%%@ G
.%%G H
RefId%%H M
)%%M N
;%%N O
return'' 
ApiResponse'' 
<'' 
object'' !
>''! "
.''" #
SuccessResult''# 0
(''0 1
)''1 2
;''2 3
}(( 
})) ˚/
UD:\BootcampProject\src\04.Application\Feature\Courses\Commands\CreateCourseCommand.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
Courses$ +
.+ ,
Commands, 4
;4 5
public

 
class

 
CreateCourseCommand

  
:

! "
IRequest

# +
<

+ ,
ApiResponse

, 7
<

7 8
	CourseDto

8 A
>

A B
>

B C
{ 
public 
"
CreateCourseRequestDto !
createCourseDto" 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
=@ A
nullB F
!F G
;G H
} 
public 
class &
CreateCourseCommandHandler '
:( )
IRequestHandler* 9
<9 :
CreateCourseCommand: M
,M N
ApiResponseO Z
<Z [
	CourseDto[ d
>d e
>e f
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
private 
readonly 
ILogger 
< &
CreateCourseCommandHandler 7
>7 8
_logger9 @
;@ A
public 
&
CreateCourseCommandHandler %
(% &
IUnitOfWork& 1

unitOfWork2 <
,< =
IMapper> E
mapperF L
,L M
ILoggerN U
<U V&
CreateCourseCommandHandlerV p
>p q
loggerr x
)x y
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
_logger 
= 
logger 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
	CourseDto" +
>+ ,
>, -
Handle. 4
(4 5
CreateCourseCommand5 H
requestI P
,P Q
CancellationTokenR c
cancellationTokend u
)u v
{ 
var 
course 
= 
_mapper 
. 
Map  
<  !
Course! '
>' (
(( )
request) 0
.0 1
createCourseDto1 @
)@ A
;A B
var 
imageurl 
= 
request 
. 
createCourseDto .
.. /
ImageUrl/ 7
;7 8
if 

( 
! 
string 
. 
IsNullOrWhiteSpace &
(& '
imageurl' /
)/ 0
&&1 3
imageurl 
. 

StartsWith 
(  
$str  ,
), -
)- .
{   	
var"" 

base64Data"" 
="" 
imageurl"" %
.""% &
	Substring""& /
(""/ 0
imageurl""0 8
.""8 9
IndexOf""9 @
(""@ A
$str""A D
)""D E
+""F G
$num""H I
)""I J
;""J K
var## 
bytes## 
=## 
Convert## 
.##  
FromBase64String##  0
(##0 1

base64Data##1 ;
)##; <
;##< =
var%% 
uploadsFolder%% 
=%% 
Path%%  $
.%%$ %
Combine%%% ,
(%%, -
	Directory%%- 6
.%%6 7
GetCurrentDirectory%%7 J
(%%J K
)%%K L
,%%L M
$str%%N W
,%%W X
$str%%Y ^
)%%^ _
;%%_ `
if&& 
(&& 
!&& 
	Directory&& 
.&& 
Exists&& !
(&&! "
uploadsFolder&&" /
)&&/ 0
)&&0 1
	Directory'' 
.'' 
CreateDirectory'' )
('') *
uploadsFolder''* 7
)''7 8
;''8 9
var)) 
fileName)) 
=)) 
$")) 
{)) 
Guid)) "
.))" #
NewGuid))# *
())* +
)))+ ,
})), -
$str))- 1
"))1 2
;))2 3
var** 
filePath** 
=** 
Path** 
.**  
Combine**  '
(**' (
uploadsFolder**( 5
,**5 6
fileName**7 ?
)**? @
;**@ A
await++ 
File++ 
.++ 
WriteAllBytesAsync++ )
(++) *
filePath++* 2
,++2 3
bytes++4 9
)++9 :
;++: ;
course.. 
... 
ImageUrl.. 
=.. 
$"..  
$str..  %
{..% &
fileName..& .
}... /
"../ 0
;..0 1
}// 	
await11 
_unitOfWork11 
.11 
Courses11 !
.11! "
CreateAsync11" -
(11- .
course11. 4
)114 5
;115 6
await22 
_unitOfWork22 
.22 
SaveChangesAsync22 *
(22* +
)22+ ,
;22, -
_logger44 
.44 
LogInformation44 
(44 
$str44 W
,44W X
course55 
.55 
Name55 
,55 
course55 
.55  
RefId55  %
)55% &
;55& '
var77 
	courseDto77 
=77 
_mapper77 
.77  
Map77  #
<77# $
	CourseDto77$ -
>77- .
(77. /
course77/ 5
)775 6
;776 7
return99 
ApiResponse99 
<99 
	CourseDto99 $
>99$ %
.99% &
SuccessResult99& 3
(993 4
	courseDto994 =
)99= >
;99> ?
}:: 
};; ‹
[D:\BootcampProject\src\04.Application\Feature\Categories\Queries\GetCategoryByRefIdQuery.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $

Categories$ .
.. /
Queries/ 6
;6 7
public		 
class		 #
GetCategoryByRefIdQuery		 $
:		% &
IRequest		' /
<		/ 0
ApiResponse		0 ;
<		; <
CategoryDto		< G
>		G H
>		H I
{

 
public 

Guid 
RefId 
{ 
get 
; 
set  
;  !
}" #
} 
public 
class *
GetCategoryByRefIdQueryHandler +
:, -
IRequestHandler. =
<= >#
GetCategoryByRefIdQuery> U
,U V
ApiResponseW b
<b c
CategoryDtoc n
>n o
>o p
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
public 
*
GetCategoryByRefIdQueryHandler )
() *
IUnitOfWork* 5

unitOfWork6 @
,@ A
IMapperB I
mapperJ P
)P Q
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
CategoryDto" -
>- .
>. /
Handle0 6
(6 7#
GetCategoryByRefIdQuery7 N
requestO V
,V W
CancellationTokenX i
cancellationTokenj {
){ |
{ 
var 
category 
= 
await 
_unitOfWork (
.( )

Categories) 3
.3 4
GetByRefIdAsync4 C
(C D
requestD K
.K L
RefIdL Q
)Q R
;R S
if 

( 
category 
== 
null 
) 
{ 	
throw 
new 
NotFoundException '
(' (
$str( 8
,8 9
request: A
.A B
RefIdB G
)G H
;H I
} 	
var 
categoryDto 
= 
_mapper !
.! "
Map" %
<% &
CategoryDto& 1
>1 2
(2 3
category3 ;
); <
;< =
return   
ApiResponse   
<   
CategoryDto   &
>  & '
.  ' (
SuccessResult  ( 5
(  5 6
categoryDto  6 A
)  A B
;  B C
}!! 
}"" ´
YD:\BootcampProject\src\04.Application\Feature\Categories\Queries\GetAllCategoriesQuery.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $

Categories$ .
.. /
Queries/ 6
;6 7
public 
class !
GetAllCategoriesQuery "
:# $
IRequest% -
<- .
ApiResponse. 9
<9 :
List: >
<> ?
CategoryDto? J
>J K
>K L
>L M
{		 
}

 
public 
class (
GetAllCategoriesQueryHandler )
:* +
IRequestHandler, ;
<; <!
GetAllCategoriesQuery< Q
,Q R
ApiResponseS ^
<^ _
List_ c
<c d
CategoryDtod o
>o p
>p q
>q r
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
public 
(
GetAllCategoriesQueryHandler '
(' (
IUnitOfWork( 3

unitOfWork4 >
,> ?
IMapper@ G
mapperH N
)N O
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
List" &
<& '
CategoryDto' 2
>2 3
>3 4
>4 5
Handle6 <
(< =!
GetAllCategoriesQuery= R
requestS Z
,Z [
CancellationToken\ m
cancellationTokenn 
)	 Ä
{ 
var 

categories 
= 
await 
_unitOfWork *
.* +

Categories+ 5
.5 6
GetAllAsync6 A
(A B
)B C
;C D
var 
categoriesDto 
= 
_mapper #
.# $
Map$ '
<' (
List( ,
<, -
CategoryDto- 8
>8 9
>9 :
(: ;

categories; E
)E F
;F G
return 
ApiResponse 
< 
List 
<  
CategoryDto  +
>+ ,
>, -
.- .
SuccessResult. ;
(; <
categoriesDto< I
)I J
;J K
} 
} “"
ZD:\BootcampProject\src\04.Application\Feature\Categories\Commands\UpdateCategoryCommand.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $

Categories$ .
.. /
Commands/ 7
;7 8
public

 
class

 !
UpdateCategoryCommand

 "
:

# $
IRequest

% -
<

- .
ApiResponse

. 9
<

9 :
CategoryDto

: E
>

E F
>

F G
{ 
public 

Guid 
RefId 
{ 
get 
; 
set  
;  !
}" #
public 
$
UpdateCategoryRequestDto #
updateCategoryDto$ 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
=D E
nullF J
!J K
;K L
} 
public 
class (
UpdateCategoryCommandHandler )
:* +
IRequestHandler, ;
<; <!
UpdateCategoryCommand< Q
,Q R
ApiResponseS ^
<^ _
CategoryDto_ j
>j k
>k l
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
private 
readonly 
ILogger 
< (
UpdateCategoryCommandHandler 9
>9 :
_logger; B
;B C
public 
(
UpdateCategoryCommandHandler '
(' (
IUnitOfWork( 3

unitOfWork4 >
,> ?
IMapper@ G
mapperH N
,N O
ILoggerP W
<W X(
UpdateCategoryCommandHandlerX t
>t u
loggerv |
)| }
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
_logger 
= 
logger 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
CategoryDto" -
>- .
>. /
Handle0 6
(6 7!
UpdateCategoryCommand7 L
requestM T
,T U
CancellationTokenV g
cancellationTokenh y
)y z
{ 
var 
category 
= 
await 
_unitOfWork (
.( )

Categories) 3
. 
GetByRefIdAsync 
( 
request $
.$ %
RefId% *
)* +
;+ ,
if 

( 
category 
== 
null 
) 
{ 	
throw   
new   
NotFoundException   '
(  ' (
$str  ( 8
,  8 9
request  : A
.  A B
RefId  B G
)  G H
;  H I
}!! 	
_mapper## 
.## 
Map## 
(## 
request## 
.## 
updateCategoryDto## -
,##- .
category##/ 7
)##7 8
;##8 9
var$$ 
updatedCategory$$ 
=$$ 
await$$ #
_unitOfWork$$$ /
.$$/ 0

Categories$$0 :
.$$: ;
UpdateAsync$$; F
($$F G
category$$G O
)$$O P
;$$P Q
await%% 
_unitOfWork%% 
.%% 
SaveChangesAsync%% *
(%%* +
)%%+ ,
;%%, -
_logger'' 
.'' 
LogInformation'' 
('' 
$str'' B
,''B C
request''D K
.''K L
RefId''L Q
)''Q R
;''R S
var)) 
categoryDto)) 
=)) 
_mapper)) !
.))! "
Map))" %
<))% &
CategoryDto))& 1
>))1 2
())2 3
updatedCategory))3 B
)))B C
;))C D
return++ 
ApiResponse++ 
<++ 
CategoryDto++ &
>++& '
.++' (
SuccessResult++( 5
(++5 6
categoryDto++6 A
)++A B
;++B C
},, 
}-- ¢
ZD:\BootcampProject\src\04.Application\Feature\Categories\Commands\DeleteCategoryCommand.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $

Categories$ .
.. /
Commands/ 7
;7 8
public

 
class

 !
DeleteCategoryCommand

 "
:

# $
IRequest

% -
<

- .
ApiResponse

. 9
<

9 :
object

: @
>

@ A
>

A B
{ 
public 

Guid 
RefId 
{ 
get 
; 
set  
;  !
}" #
} 
public 
class (
DeleteCategoryCommandHandler )
:* +
IRequestHandler, ;
<; <!
DeleteCategoryCommand< Q
,Q R
ApiResponseS ^
<^ _
object_ e
>e f
>f g
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
private 
readonly 
ILogger 
< (
DeleteCategoryCommandHandler 9
>9 :
_logger; B
;B C
public 
(
DeleteCategoryCommandHandler '
(' (
IUnitOfWork( 3

unitOfWork4 >
,> ?
IMapper@ G
mapperH N
,N O
ILoggerP W
<W X(
DeleteCategoryCommandHandlerX t
>t u
loggerv |
)| }
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
_logger 
= 
logger 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
object" (
>( )
>) *
Handle+ 1
(1 2!
DeleteCategoryCommand2 G
requestH O
,O P
CancellationTokenQ b
cancellationTokenc t
)t u
{ 
var 
category 
= 
await 
_unitOfWork (
.( )

Categories) 3
. 
GetByRefIdAsync 
( 
request $
.$ %
RefId% *
)* +
;+ ,
if 

( 
category 
== 
null 
) 
{ 	
throw 
new 
NotFoundException '
(' (
$str( 8
,8 9
request: A
.A B
RefIdB G
)G H
;H I
}   	
if## 

(## 
category## 
.## 
Courses## 
.## 
Any##  
(##  !
)##! "
)##" #
{$$ 	
throw%% 
new%% 
ValidationException%% )
(%%) *
$str%%* T
)%%T U
;%%U V
}&& 	
await(( 
_unitOfWork(( 
.(( 

Categories(( $
.(($ %
DeleteAsync((% 0
(((0 1
request((1 8
.((8 9
RefId((9 >
)((> ?
;((? @
await)) 
_unitOfWork)) 
.)) 
SaveChangesAsync)) *
())* +
)))+ ,
;)), -
_logger++ 
.++ 
LogInformation++ 
(++ 
$str++ B
,++B C
request++D K
.++K L
RefId++L Q
)++Q R
;++R S
return-- 
ApiResponse-- 
<-- 
object-- !
>--! "
.--" #
SuccessResult--# 0
(--0 1
)--1 2
;--2 3
}.. 
}// ∏0
ZD:\BootcampProject\src\04.Application\Feature\Categories\Commands\CreateCategoryCommand.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $

Categories$ .
.. /
Commands/ 7
;7 8
public

 
class

 !
CreateCategoryCommand

 "
:

# $
IRequest

% -
<

- .
ApiResponse

. 9
<

9 :
CategoryDto

: E
>

E F
>

F G
{ 
public 
$
CreateCategoryRequestDto #
createCategoryDto$ 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
=D E
nullF J
!J K
;K L
} 
public 
class (
CreateCategoryCommandHandler )
:* +
IRequestHandler, ;
<; <!
CreateCategoryCommand< Q
,Q R
ApiResponseS ^
<^ _
CategoryDto_ j
>j k
>k l
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
private 
readonly 
ILogger 
< (
CreateCategoryCommandHandler 9
>9 :
_logger; B
;B C
public 
(
CreateCategoryCommandHandler '
(' (
IUnitOfWork( 3

unitOfWork4 >
,> ?
IMapper@ G
mapperH N
,N O
ILoggerP W
<W X(
CreateCategoryCommandHandlerX t
>t u
loggerv |
)| }
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
_logger 
= 
logger 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
CategoryDto" -
>- .
>. /
Handle0 6
(6 7!
CreateCategoryCommand7 L
requestM T
,T U
CancellationTokenV g
cancellationTokenh y
)y z
{ 
var 
category 
= 
_mapper 
. 
Map "
<" #
Category# +
>+ ,
(, -
request- 4
.4 5
createCategoryDto5 F
)F G
;G H
var 
imageurl 
= 
request 
. 
createCategoryDto 0
.0 1
ImageUrl1 9
;9 :
if 

( 
! 
string 
. 
IsNullOrWhiteSpace &
(& '
imageurl' /
)/ 0
&&1 3
imageurl 
. 

StartsWith 
(  
$str  ,
), -
)- .
{   	
var"" 

base64Data"" 
="" 
imageurl"" %
.""% &
	Substring""& /
(""/ 0
imageurl""0 8
.""8 9
IndexOf""9 @
(""@ A
$str""A D
)""D E
+""F G
$num""H I
)""I J
;""J K
var## 
bytes## 
=## 
Convert## 
.##  
FromBase64String##  0
(##0 1

base64Data##1 ;
)##; <
;##< =
var%% 
uploadsFolder%% 
=%% 
Path%%  $
.%%$ %
Combine%%% ,
(%%, -
	Directory%%- 6
.%%6 7
GetCurrentDirectory%%7 J
(%%J K
)%%K L
,%%L M
$str%%N W
,%%W X
$str%%Y ^
)%%^ _
;%%_ `
if&& 
(&& 
!&& 
	Directory&& 
.&& 
Exists&& !
(&&! "
uploadsFolder&&" /
)&&/ 0
)&&0 1
	Directory'' 
.'' 
CreateDirectory'' )
('') *
uploadsFolder''* 7
)''7 8
;''8 9
var)) 
fileName)) 
=)) 
$")) 
{)) 
Guid)) "
.))" #
NewGuid))# *
())* +
)))+ ,
})), -
$str))- 1
"))1 2
;))2 3
var** 
filePath** 
=** 
Path** 
.**  
Combine**  '
(**' (
uploadsFolder**( 5
,**5 6
fileName**7 ?
)**? @
;**@ A
await++ 
File++ 
.++ 
WriteAllBytesAsync++ )
(++) *
filePath++* 2
,++2 3
bytes++4 9
)++9 :
;++: ;
category.. 
... 
ImageUrl.. 
=.. 
$"..  "
$str.." '
{..' (
fileName..( 0
}..0 1
"..1 2
;..2 3
}// 	
await11 
_unitOfWork11 
.11 

Categories11 $
.11$ %
CreateAsync11% 0
(110 1
category111 9
)119 :
;11: ;
await22 
_unitOfWork22 
.22 
SaveChangesAsync22 *
(22* +
)22+ ,
;22, -
_logger44 
.44 
LogInformation44 
(44 
$str44 ]
,44] ^
category55 
.55 
Name55 
,55 
category55 #
.55# $
RefId55$ )
)55) *
;55* +
var77 
categoryDto77 
=77 
_mapper77 !
.77! "
Map77" %
<77% &
CategoryDto77& 1
>771 2
(772 3
category773 ;
)77; <
;77< =
return99 
ApiResponse99 
<99 
CategoryDto99 &
>99& '
.99' (
SuccessResult99( 5
(995 6
categoryDto996 A
)99A B
;99B C
}:: 
};; „
WD:\BootcampProject\src\04.Application\Feature\CartItems\Queries\GetAllCartItemsQuery.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
	CartItems$ -
.- .
Queries. 5
;5 6
public 
class  
GetAllCartItemsQuery !
:" #
IRequest$ ,
<, -
ApiResponse- 8
<8 9
List9 =
<= >
CartItemResponseDto> Q
>Q R
>R S
>S T
{		 
public

 

Guid

 
	UserRefId

 
{

 
get

 
;

  
set

! $
;

$ %
}

& '
} 
public 
class '
GetAllCartItemsQueryHandler (
:) *
IRequestHandler+ :
<: ; 
GetAllCartItemsQuery; O
,O P
ApiResponseQ \
<\ ]
List] a
<a b
CartItemResponseDtob u
>u v
>v w
>w x
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
public 
'
GetAllCartItemsQueryHandler &
(& '
IUnitOfWork' 2

unitOfWork3 =
,= >
IMapper? F
mapperG M
)M N
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
List" &
<& '
CartItemResponseDto' :
>: ;
>; <
>< =
Handle> D
(D E 
GetAllCartItemsQueryE Y
requestZ a
,a b
CancellationTokenc t
cancellationToken	u Ü
)
Ü á
{ 
var 
	cartItems 
= 
await 
_unitOfWork )
.) *
	CartItems* 3
.3 4
GetAllAsync4 ?
(? @
)@ A
;A B
var 
cartItemsDto 
= 
_mapper "
." #
Map# &
<& '
List' +
<+ ,
CartItemResponseDto, ?
>? @
>@ A
(A B
	cartItemsB K
)K L
;L M
return 
ApiResponse 
< 
List 
<  
CartItemResponseDto  3
>3 4
>4 5
.5 6
SuccessResult6 C
(C D
cartItemsDtoD P
)P Q
;Q R
} 
} ƒ
bD:\BootcampProject\src\04.Application\Feature\CartItems\Queries\GetAllCartItemsByUserRefIdQuery.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
	CartItems$ -
.- .
Queries. 5
;5 6
public		 
class		 +
GetAllCartItemsByUserRefIdQuery		 ,
:		- .
IRequest		/ 7
<		7 8
ApiResponse		8 C
<		C D
List		D H
<		H I
CartItemResponseDto		I \
>		\ ]
>		] ^
>		^ _
{

 
public 

Guid 
	UserRefId 
{ 
get 
;  
set! $
;$ %
}& '
} 
public 
class 2
&GetAllCartItemsByUserRefIdQueryHandler 3
:4 5
IRequestHandler6 E
<E F+
GetAllCartItemsByUserRefIdQueryF e
,e f
ApiResponseg r
<r s
Lists w
<w x 
CartItemResponseDto	x ã
>
ã å
>
å ç
>
ç é
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
public 
2
&GetAllCartItemsByUserRefIdQueryHandler 1
(1 2
IUnitOfWork2 =

unitOfWork> H
,H I
IMapperJ Q
mapperR X
)X Y
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
List" &
<& '
CartItemResponseDto' :
>: ;
>; <
>< =
Handle> D
(D E+
GetAllCartItemsByUserRefIdQueryE d
requeste l
,l m
CancellationTokenn 
cancellationToken
Ä ë
)
ë í
{ 
var 
	cartItems 
= 
await 
_unitOfWork )
.) *
	CartItems* 3
.3 4"
GetAllByUserRefIdAsync4 J
(J K
requestK R
.R S
	UserRefIdS \
)\ ]
;] ^
if 

( 
	cartItems 
== 
null 
) 
{ 	
throw 
new 
NotFoundException '
(' (
$str( 4
,4 5
request6 =
.= >
	UserRefId> G
)G H
;H I
} 	
var 
cartItemsDto 
= 
_mapper "
." #
Map# &
<& '
List' +
<+ ,
CartItemResponseDto, ?
>? @
>@ A
(A B
	cartItemsB K
)K L
;L M
return   
ApiResponse   
<   
List   
<    
CartItemResponseDto    3
>  3 4
>  4 5
.  5 6
SuccessResult  6 C
(  C D
cartItemsDto  D P
)  P Q
;  Q R
}!! 
}"" ≠'
_D:\BootcampProject\src\04.Application\Feature\CartItems\Commands\RemoveCourseFromCartCommand.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
	CartItems$ -
.- .
Commands. 6
;6 7
public

 
class

 '
RemoveCourseFromCartCommand

 (
:

) *
IRequest

+ 3
<

3 4
ApiResponse

4 ?
<

? @
object

@ F
>

F G
>

G H
{ 
public 

Guid 
	UserRefId 
{ 
get 
;  
set! $
;$ %
}& '
public 

Guid 
CartItemRefId 
{ 
get  #
;# $
set% (
;( )
}* +
} 
public 
class .
"RemoveCourseFromCartCommandHandler /
:0 1
IRequestHandler2 A
<A B'
RemoveCourseFromCartCommandB ]
,] ^
ApiResponse_ j
<j k
objectk q
>q r
>r s
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
private 
readonly 
ILogger 
< .
"RemoveCourseFromCartCommandHandler ?
>? @
_loggerA H
;H I
public 
.
"RemoveCourseFromCartCommandHandler -
(- .
IUnitOfWork. 9

unitOfWork: D
,D E
IMapperF M
mapperN T
,T U
ILoggerV ]
<] ^/
"RemoveCourseFromCartCommandHandler	^ Ä
>
Ä Å
logger
Ç à
)
à â
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
_logger 
= 
logger 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
object" (
>( )
>) *
Handle+ 1
(1 2'
RemoveCourseFromCartCommand2 M
requestN U
,U V
CancellationTokenW h
cancellationTokeni z
)z {
{ 
var 
user 
= 
await 
_unitOfWork $
.$ %
UserManager% 0
.0 1
GetUserByRefIdAsync1 D
(D E
requestE L
.L M
	UserRefIdM V
)V W
;W X
if 

( 
user 
== 
null 
) 
{ 	
throw   
new   
ValidationException   )
(  ) *
$"  * ,
$str  , >
{  > ?
request  ? F
.  F G
	UserRefId  G P
}  P Q
$str  Q R
"  R S
)  S T
;  T U
}!! 	
if## 

(## 
!## 
user## 
.## 
EmailConfirmed##  
)##  !
{$$ 	
throw%% 
new%% $
AccountInactiveException%% .
(%%. /
$str%%/ M
)%%M N
;%%N O
}&& 	
if'' 

('' 
!'' 
user'' 
.'' 
IsActive'' 
)'' 
{(( 	
throw)) 
new)) $
AccountInactiveException)) .
()). /
$str))/ i
)))i j
;))j k
}** 	
var,, 
cartitem,, 
=,, 
await,, 
_unitOfWork,, (
.,,( )
	CartItems,,) 2
.-- 
GetByRefIdAsync-- 
(-- 
request-- $
.--$ %
CartItemRefId--% 2
)--2 3
;--3 4
if.. 

(.. 
cartitem.. 
==.. 
null.. 
).. 
{// 	
throw00 
new00 
ValidationException00 )
(00) *
$"00* ,
$str00, :
{00: ;
request00; B
.00B C
CartItemRefId00C P
}00P Q
$str00Q [
"00[ \
)00\ ]
;00] ^
}11 	
await33 
_unitOfWork33 
.33 
	CartItems33 #
.33# $
DeleteAsync33$ /
(33/ 0
request330 7
.337 8
CartItemRefId338 E
)33E F
;33F G
await66 
_unitOfWork66 
.66 
SaveChangesAsync66 *
(66* +
)66+ ,
;66, -
return88 
ApiResponse88 
<88 
object88 !
>88! "
.88" #
SuccessResult88# 0
(880 1
)881 2
;882 3
}99 
}:: ë]
\D:\BootcampProject\src\04.Application\Feature\CartItems\Commands\CheckoutCartItemsCommand.cs
	namespace

 	
MyApp


 
.

 
Application

 
.

 
Feature

 #
.

# $
	CartItems

$ -
.

- .
Commands

. 6
;

6 7
public 
class $
CheckoutCartItemsCommand %
:& '
IRequest( 0
<0 1
ApiResponse1 <
<< =
CheckoutResponseDto= P
>P Q
>Q R
{ 
public 

Guid 
	UserRefId 
{ 
get 
;  
set! $
;$ %
}& '
public 

CheckoutRequestDto 
CheckoutDto )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
} 
public 
class +
CheckoutCartItemsCommandHandler ,
:- .
IRequestHandler/ >
<> ?$
CheckoutCartItemsCommand? W
,W X
ApiResponseY d
<d e
CheckoutResponseDtoe x
>x y
>y z
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
private 
readonly 
ILogger 
< +
CheckoutCartItemsCommandHandler <
>< =
_logger> E
;E F
public 
+
CheckoutCartItemsCommandHandler *
(* +
IUnitOfWork+ 6

unitOfWork7 A
,A B
IMapperC J
mapperK Q
,Q R
ILoggerS Z
<Z [+
CheckoutCartItemsCommandHandler[ z
>z {
logger	| Ç
)
Ç É
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
_logger 
= 
logger 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
CheckoutResponseDto" 5
>5 6
>6 7
Handle8 >
(> ?$
CheckoutCartItemsCommand? W
requestX _
,_ `
CancellationTokena r
cancellationToken	s Ñ
)
Ñ Ö
{ 
_logger 
. 
LogInformation 
( 
$str <
,< =
request   
.   
CheckoutDto   
.   
ItemCartRefIds   *
.  * +
Count  + 0
,  0 1
request!! 
.!! 
	UserRefId!! 
)!! 
;!! 
if$$ 

($$ 
request$$ 
.$$ 
CheckoutDto$$ 
.$$  
ItemCartRefIds$$  .
.$$. /
Count$$/ 4
==$$5 7
$num$$8 9
)$$9 :
{%% 	
throw&& 
new&& 
ValidationException&& )
(&&) *
$str&&* M
)&&M N
;&&N O
}'' 	
var** 
strategy** 
=** 
_unitOfWork** "
.**" ##
CreateExecutionStrategy**# :
(**: ;
)**; <
;**< =
return++ 
await++ 
strategy++ 
.++ 
ExecuteAsync++ *
(++* +
async+++ 0
(++1 2
)++2 3
=>++4 6
{,, 	
using.. 
var.. 
transaction.. !
=.." #
_unitOfWork..$ /
.../ 0
BeginTransaction..0 @
(..@ A
)..A B
;..B C
try// 
{00 
var22 
user22 
=22 
await22  
_unitOfWork22! ,
.22, -
UserManager22- 8
.33 
GetUserByRefIdAsync33 (
(33( )
request33) 0
.330 1
	UserRefId331 :
)33: ;
;33; <
if44 
(44 
user44 
==44 
null44  
)44  !
{55 
throw66 
new66 
ValidationException66 1
(661 2
$"662 4
$str664 F
{66F G
request66G N
.66N O
	UserRefId66O X
}66X Y
$str66Y Z
"66Z [
)66[ \
;66\ ]
}77 
if99 
(99 
!99 
user99 
.99 
EmailConfirmed99 (
)99( )
{:: 
throw;; 
new;; 
PermissionException;; 1
(;;1 2
$";;2 4
$str;;4 ;
{;;; <
user;;< @
.;;@ A
Id;;A C
};;C D
$str;;D O
";;O P
);;P Q
;;;Q R
}<< 
var>> 
	cartItems>> 
=>> 
(>>  !
await>>! &
_unitOfWork>>' 2
.>>2 3
	CartItems>>3 <
.?? 
GetAllByRefIdsAsync?? (
(??( )
request??) 0
.??0 1
CheckoutDto??1 <
.??< =
ItemCartRefIds??= K
)??K L
)??L M
.@@ 
ToList@@ 
(@@ 
)@@ 
;@@ 
ifAA 
(AA 
	cartItemsAA 
.AA 
CountAA #
!=AA$ &
requestAA' .
.AA. /
CheckoutDtoAA/ :
.AA: ;
ItemCartRefIdsAA; I
.AAI J
CountAAJ O
)AAO P
{BB 
varCC 
missingCartItemsCC (
=CC) *
	cartItemsCC+ 4
.CC4 5
SelectCC5 ;
(CC; <
eCC< =
=>CC> @
eCCA B
.CCB C
RefIdCCC H
)CCH I
.CCI J
ExceptCCJ P
(CCP Q
requestCCQ X
.CCX Y
CheckoutDtoCCY d
.CCd e
ItemCartRefIdsCCe s
)CCs t
;CCt u
throwDD 
newDD 
ValidationExceptionDD 1
(DD1 2
$"DD2 4
$strDD4 ;
{DD; <
stringDD< B
.DDB C
JoinDDC G
(DDG H
$strDDH L
,DDL M
missingCartItemsDDN ^
)DD^ _
}DD_ `
$strDD` j
"DDj k
)DDk l
;DDl m
}EE 
varGG 
paymentmethodGG !
=GG" #
awaitGG$ )
_unitOfWorkGG* 5
.GG5 6
PaymentMethodsGG6 D
.HH 
GetByRefIdAsyncHH $
(HH$ %
requestHH% ,
.HH, -
CheckoutDtoHH- 8
.HH8 9
PaymentMethodRefIdHH9 K
)HHK L
;HHL M
ifII 
(II 
paymentmethodII !
==II" $
nullII% )
)II) *
{JJ 
throwKK 
newKK 
ValidationExceptionKK 1
(KK1 2
$"KK2 4
$strKK4 G
{KKG H
requestKKH O
.KKO P
CheckoutDtoKKP [
.KK[ \
PaymentMethodRefIdKK\ n
}KKn o
$strKKo y
"KKy z
)KKz {
;KK{ |
}LL 
awaitNN 
_unitOfWorkNN !
.NN! "
	CartItemsNN" +
.NN+ ,
DeleteEntitiesAsyncNN, ?
(NN? @
	cartItemsNN@ I
)NNI J
;NNJ K
varPP 
invoicePP 
=PP 
newPP !
InvoicePP" )
{QQ 
RefCodeRR 
=RR 
GenerateInvoiceIdRR /
(RR/ 0
)RR0 1
,RR1 2
	CreatedAtSS 
=SS 
DateTimeSS  (
.SS( )
UtcNowSS) /
,SS/ 0
UserIdTT 
=TT 
userTT !
.TT! "
IdTT" $
,TT$ %
PaymentMethodIdUU #
=UU$ %
paymentmethodUU& 3
.UU3 4
IdUU4 6
}VV 
;VV 
awaitWW 
_unitOfWorkWW !
.WW! "
InvoiceManagerWW" 0
.WW0 1
CreateAsyncWW1 <
(WW< =
invoiceWW= D
)WWD E
;WWE F
awaitXX 
_unitOfWorkXX !
.XX! "
SaveChangesAsyncXX" 2
(XX2 3
)XX3 4
;XX4 5
foreachYY 
(YY 
CartItemYY !
itemYY" &
inYY' )
	cartItemsYY* 3
)YY3 4
{ZZ 
await[[ 
_unitOfWork[[ %
.[[% &
InvoiceManager[[& 4
.[[4 5
CreateDetailAsync[[5 F
([[F G
new[[G J
InvoiceDetail[[K X
{\\ 
	InvoiceId]] !
=]]" #
invoice]]$ +
.]]+ ,
Id]], .
,]]. /

CourseName^^ "
=^^# $
item^^% )
.^^) *
Schedule^^* 2
.^^2 3
Course^^3 9
.^^9 :
Name^^: >
,^^> ?
CategoryName__ $
=__% &
item__' +
.__+ ,
Schedule__, 4
.__4 5
Course__5 ;
.__; <
Category__< D
.__D E
Name__E I
,__I J
Price`` 
=`` 
item``  $
.``$ %
Schedule``% -
.``- .
Course``. 4
.``4 5
Price``5 :
,``: ;
ScheduleDateaa $
=aa% &
itemaa' +
.aa+ ,
Scheduleaa, 4
.aa4 5
Dateaa5 9
}bb 
)bb 
;bb 
awaitcc 
_unitOfWorkcc %
.cc% &
	MyClassescc& /
.cc/ 0
CreateAsynccc0 ;
(cc; <
newcc< ?
MyClasscc@ G
{dd 
UserIdee 
=ee  
useree! %
.ee% &
Idee& (
,ee( )

ScheduleIdff "
=ff# $
itemff% )
.ff) *

ScheduleIdff* 4
}gg 
)gg 
;gg 
}hh 
_unitOfWorkkk 
.kk 
CommitTransactionkk -
(kk- .
transactionkk. 9
)kk9 :
;kk: ;
_loggermm 
.mm 
LogInformationmm &
(mm& '
$strnn B
,nnB C
invoiceoo 
.oo 
Idoo 
)oo 
;oo  
returnrr 
ApiResponserr "
<rr" #
CheckoutResponseDtorr# 6
>rr6 7
.rr7 8
SuccessResultrr8 E
(rrE F
newrrF I
CheckoutResponseDtorrJ ]
{ss 
	InvoiceIdtt 
=tt 
invoicett  '
.tt' (
Idtt( *
,tt* +
	CreatedAtuu 
=uu 
invoiceuu  '
.uu' (
	CreatedAtuu( 1
}vv 
)vv 
;vv 
}ww 
catchxx 
(xx 
	Exceptionxx 
)xx 
{yy 
_unitOfWork|| 
.|| 
RollbackTransaction|| /
(||/ 0
transaction||0 ;
)||; <
;||< =
_logger}} 
.}} 
LogError}}  
(}}  !
$str}}! K
)}}K L
;}}L M
throw~~ 
;~~ 
} 
}
ÄÄ 	
)
ÄÄ	 

;
ÄÄ
 
}
ÅÅ 
private
áá 
string
áá 
GenerateInvoiceId
áá $
(
áá$ %
)
áá% &
{
àà 
return
ââ 
$"
ââ 
$str
ââ 
{
ââ 
DateTime
ââ 
.
ââ 
UtcNow
ââ $
:
ââ$ %
$str
ââ% 1
}
ââ1 2
{
ââ2 3
Random
ââ3 9
.
ââ9 :
Shared
ââ: @
.
ââ@ A
Next
ââA E
(
ââE F
$num
ââF G
,
ââG H
$num
ââI O
)
ââO P
:
ââP Q
$str
ââQ S
}
ââS T
"
ââT U
;
ââU V
}
ää 
}ãã ﬁ+
ZD:\BootcampProject\src\04.Application\Feature\CartItems\Commands\AddCourseToCartCommand.cs
	namespace		 	
MyApp		
 
.		 
Application		 
.		 
Feature		 #
.		# $
	CartItems		$ -
.		- .
Commands		. 6
;		6 7
public 
class "
AddCourseToCartCommand #
:$ %
IRequest& .
<. /
ApiResponse/ :
<: ;
CartItemResponseDto; N
>N O
>O P
{ 
public 

Guid 
	UserRefId 
{ 
get 
;  
set! $
;$ %
}& '
public 

Guid 
ScheduleRefId 
{ 
get  #
;# $
set% (
;( )
}* +
} 
public 
class )
AddCourseToCartCommandHandler *
:+ ,
IRequestHandler- <
<< ="
AddCourseToCartCommand= S
,S T
ApiResponseU `
<` a
CartItemResponseDtoa t
>t u
>u v
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
private 
readonly 
ILogger 
< )
AddCourseToCartCommandHandler :
>: ;
_logger< C
;C D
public 
)
AddCourseToCartCommandHandler (
(( )
IUnitOfWork) 4

unitOfWork5 ?
,? @
IMapperA H
mapperI O
,O P
ILoggerQ X
<X Y)
AddCourseToCartCommandHandlerY v
>v w
loggerx ~
)~ 
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_mapper 
= 
mapper 
; 
_logger 
= 
logger 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
CartItemResponseDto" 5
>5 6
>6 7
Handle8 >
(> ?"
AddCourseToCartCommand? U
requestV ]
,] ^
CancellationToken_ p
cancellationToken	q Ç
)
Ç É
{ 
var 
user 
= 
await 
_unitOfWork $
.$ %
UserManager% 0
.0 1
GetUserByRefIdAsync1 D
(D E
requestE L
.L M
	UserRefIdM V
)V W
;W X
if 

( 
user 
== 
null 
) 
{   	
throw!! 
new!! 
ValidationException!! )
(!!) *
$"!!* ,
$str!!, >
{!!> ?
request!!? F
.!!F G
	UserRefId!!G P
}!!P Q
$str!!Q R
"!!R S
)!!S T
;!!T U
}"" 	
if$$ 

($$ 
!$$ 
user$$ 
.$$ 
EmailConfirmed$$  
)$$  !
{%% 	
throw&& 
new&& $
AccountInactiveException&& .
(&&. /
$str&&/ M
)&&M N
;&&N O
}'' 	
if(( 

((( 
!(( 
user(( 
.(( 
IsActive(( 
)(( 
{)) 	
throw** 
new** $
AccountInactiveException** .
(**. /
$str**/ i
)**i j
;**j k
}++ 	
var-- 
schedule-- 
=-- 
await-- 
_unitOfWork-- (
.--( )
	Schedules--) 2
.--2 3
GetByRefIdAsync--3 B
(--B C
request--C J
.--J K
ScheduleRefId--K X
)--X Y
;--Y Z
if.. 

(.. 
schedule.. 
==.. 
null.. 
).. 
{// 	
throw00 
new00 
ValidationException00 )
(00) *
$"00* ,
$str00, :
{00: ;
request00; B
.00B C
ScheduleRefId00C P
}00P Q
$str00Q [
"00[ \
)00\ ]
;00] ^
}11 	
var33 
cartItem33 
=33 
new33 
CartItem33 #
{44 	
UserId55 
=55 
user55 
.55 
Id55 
,55 

ScheduleId66 
=66 
schedule66 !
.66! "
Id66" $
}77 	
;77	 

await88 
_unitOfWork88 
.88 
	CartItems88 #
.88# $
CreateAsync88$ /
(88/ 0
cartItem880 8
)888 9
;889 :
await;; 
_unitOfWork;; 
.;; 
SaveChangesAsync;; *
(;;* +
);;+ ,
;;;, -
var== 
cartItemDto== 
=== 
_mapper== !
.==! "
Map==" %
<==% &
CartItemResponseDto==& 9
>==9 :
(==: ;
cartItem==; C
)==C D
;==D E
return?? 
ApiResponse?? 
<?? 
CartItemResponseDto?? .
>??. /
.??/ 0
SuccessResult??0 =
(??= >
cartItemDto??> I
)??I J
;??J K
}@@ 
}AA ¸5
^D:\BootcampProject\src\04.Application\Feature\Authentications\Commands\ResetPasswordCommand.cs
	namespace

 	
MyApp


 
.

 
Application

 
.

 
Feature

 #
.

# $
Authentications

$ 3
.

3 4
Commands

4 <
;

< =
public 
class  
ResetPasswordCommand !
:" #
IRequest$ ,
<, -
ApiResponse- 8
<8 9
object9 ?
>? @
>@ A
{ 
public 
#
ResetPasswordRequestDto "
ResetPasswordDto# 3
{4 5
get6 9
;9 :
set; >
;> ?
}@ A
} 
public 
class '
ResetPasswordCommandHandler (
:) *
IRequestHandler+ :
<: ; 
ResetPasswordCommand; O
,O P
ApiResponseQ \
<\ ]
object] c
>c d
>d e
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
private 
readonly 
ILogger 
< '
ResetPasswordCommandHandler 8
>8 9
_logger: A
;A B
private 
readonly 
ITokenService "
_tokenService# 0
;0 1
private 
readonly 
IEmailService "
_emailService# 0
;0 1
private 
readonly 
IPasswordService %
_passwordService& 6
;6 7
private 
readonly 
JwtSettings  
_jwtSettings! -
;- .
public 
'
ResetPasswordCommandHandler &
(& '
IUnitOfWork 

unitOfWork 
, 
IMapper 
mapper 
, 
ILogger 
< '
ResetPasswordCommandHandler +
>+ ,
logger- 3
,3 4
ITokenService 
tokenService "
," #
IEmailService 
emailService "
," #
IPasswordService 
passwordService (
,( )
JwtSettings   
jwtSettings   
)    
{!! 
_unitOfWork"" 
="" 

unitOfWork""  
;""  !
_mapper## 
=## 
mapper## 
;## 
_logger$$ 
=$$ 
logger$$ 
;$$ 
_tokenService%% 
=%% 
tokenService%% $
;%%$ %
_emailService&& 
=&& 
emailService&& $
;&&$ %
_passwordService'' 
='' 
passwordService'' *
;''* +
_jwtSettings(( 
=(( 
jwtSettings(( "
;((" #
})) 
public** 

async** 
Task** 
<** 
ApiResponse** !
<**! "
object**" (
>**( )
>**) *
Handle**+ 1
(**1 2 
ResetPasswordCommand**2 F
request**G N
,**N O
CancellationToken**P a
cancellationToken**b s
)**s t
{++ 
_logger,, 
.,, 
LogInformation,, 
(,, 
$str,, J
,,,J K
request,,L S
.,,S T
ResetPasswordDto,,T d
.,,d e
Email,,e j
),,j k
;,,k l
var.. 
user.. 
=.. 
await.. 
_unitOfWork.. $
...$ %
UserManager..% 0
...0 1
GetUserByEmailAsync..1 D
(..D E
request..E L
...L M
ResetPasswordDto..M ]
...] ^
Email..^ c
)..c d
;..d e
if// 

(// 
user// 
==// 
null// 
)// 
{00 	
_logger11 
.11 

LogWarning11 
(11 
$str11 Z
,11Z [
request11\ c
.11c d
ResetPasswordDto11d t
.11t u
Email11u z
)11z {
;11{ |
throw22 
new22 
ValidationException22 )
(22) *
$str22* K
)22K L
;22L M
}33 	
if66 

(66 
user66 
.66 
PasswordResetToken66 #
!=66$ &
request66' .
.66. /
ResetPasswordDto66/ ?
.66? @
PasswordResetToken66@ R
||66S U
user77 
.77 $
PasswordResetTokenExpiry77 )
<77* +
DateTime77, 4
.774 5
UtcNow775 ;
)77; <
{88 	
_logger99 
.99 

LogWarning99 
(99 
$str99 E
,99E F
user99G K
.99K L
Email99L Q
)99Q R
;99R S
throw;; 
new;; 
ValidationException;; )
(;;) *
$str;;* K
);;K L
;;;L M
}<< 	
user?? 
.?? 
PasswordHash?? 
=?? 
_passwordService?? ,
.??, -
HashPassword??- 9
(??9 :
request??: A
.??A B
ResetPasswordDto??B R
.??R S
NewPassword??S ^
)??^ _
;??_ `
user@@ 
.@@ 
	UpdatedAt@@ 
=@@ 
DateTime@@ !
.@@! "
UtcNow@@" (
;@@( )
userCC 
.CC 
PasswordResetTokenCC 
=CC  !
nullCC" &
;CC& '
userDD 
.DD $
PasswordResetTokenExpiryDD %
=DD& '
DateTimeDD( 0
.DD0 1
UtcNowDD1 7
;DD7 8
userEE 
.EE 
	UpdatedAtEE 
=EE 
DateTimeEE !
.EE! "
UtcNowEE" (
;EE( )
awaitGG 
_unitOfWorkGG 
.GG 
SaveChangesAsyncGG *
(GG* +
)GG+ ,
;GG, -
awaitJJ 
_emailServiceJJ 
.JJ 0
$SendPasswordChangedNotificationAsyncJJ @
(JJ@ A
userJJA E
.JJE F
EmailJJF K
,JJK L
userJJM Q
.JJQ R
NameJJR V
??JJW Y
$strJJZ `
)JJ` a
;JJa b
_loggerLL 
.LL 
LogInformationLL 
(LL 
$strLL F
,LLF G
userLLH L
.LLL M
EmailLLM R
)LLR S
;LLS T
returnNN 
ApiResponseNN 
<NN 
objectNN !
>NN! "
.NN" #
SuccessResultNN# 0
(NN0 1
)NN1 2
;NN2 3
}OO 
}PP ìC
YD:\BootcampProject\src\04.Application\Feature\Authentications\Commands\RegisterCommand.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
Authentications$ 3
.3 4
Commands4 <
;< =
public 
class 
RegisterCommand 
: 
IRequest '
<' (
ApiResponse( 3
<3 4
object4 :
>: ;
>; <
{ 
public 

RegisterRequestDto 
RegisterDto )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
} 
public 
class "
RegisterCommandHandler #
:$ %
IRequestHandler& 5
<5 6
RegisterCommand6 E
,E F
ApiResponseG R
<R S
objectS Y
>Y Z
>Z [
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
ILogger 
< "
RegisterCommandHandler 3
>3 4
_logger5 <
;< =
private 
readonly 
ITokenService "
_tokenService# 0
;0 1
private 
readonly 
IEmailService "
_emailService# 0
;0 1
private 
readonly 
IPasswordService %
_passwordService& 6
;6 7
public 
"
RegisterCommandHandler !
(! "
IUnitOfWork 

unitOfWork 
, 
ILogger 
< "
RegisterCommandHandler &
>& '
logger( .
,. /
ITokenService 
tokenService "
," #
IEmailService 
emailService "
," #
IPasswordService 
passwordService (
)( )
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_logger   
=   
logger   
;   
_tokenService!! 
=!! 
tokenService!! $
;!!$ %
_emailService"" 
="" 
emailService"" $
;""$ %
_passwordService## 
=## 
passwordService## *
;##* +
}$$ 
public%% 

async%% 
Task%% 
<%% 
ApiResponse%% !
<%%! "
object%%" (
>%%( )
>%%) *
Handle%%+ 1
(%%1 2
RegisterCommand%%2 A
request%%B I
,%%I J
CancellationToken%%K \
cancellationToken%%] n
)%%n o
{&& 
var(( 
existingUser(( 
=(( 
await((  
_unitOfWork((! ,
.((, -
UserManager((- 8
.((8 9
GetUserByEmailAsync((9 L
(((L M
request((M T
.((T U
RegisterDto((U `
.((` a
Email((a f
)((f g
;((g h
if)) 

()) 
existingUser)) 
!=)) 
null))  
)))  !
{** 	
throw++ 
new++ 
ValidationException++ )
(++) *
$str++* O
)++O P
;++P Q
},, 	
_logger.. 
... 
LogInformation.. 
(.. 
$str.. M
,..M N
request..O V
...V W
RegisterDto..W b
...b c
Email..c h
)..h i
;..i j
var// 
strategy// 
=// 
_unitOfWork// "
.//" ##
CreateExecutionStrategy//# :
(//: ;
)//; <
;//< =
return00 
await00 
strategy00 
.00 
ExecuteAsync00 *
(00* +
async00+ 0
(001 2
)002 3
=>004 6
{11 	
using33 
var33 
transaction33 !
=33" #
_unitOfWork33$ /
.33/ 0
BeginTransaction330 @
(33@ A
)33A B
;33B C
try44 
{55 
var77 
confirmationToken77 %
=77& '
await77( -
_tokenService77. ;
.77; </
#GenerateEmailConfirmationTokenAsync77< _
(77_ `
)77` a
;77a b
var:: 
user:: 
=:: 
new:: 
User:: #
{;; 
IsActive<< 
=<< 
true<< #
,<<# $
Name== 
=== 
request== "
.==" #
RegisterDto==# .
.==. /
Name==/ 3
,==3 4
Email>> 
=>> 
request>> #
.>># $
RegisterDto>>$ /
.>>/ 0
Email>>0 5
,>>5 6
PasswordHash??  
=??! "
_passwordService??# 3
.??3 4
HashPassword??4 @
(??@ A
request??A H
.??H I
RegisterDto??I T
.??T U
NewPassword??U `
)??` a
,??a b
EmailConfirmed@@ "
=@@# $
false@@% *
,@@* +"
EmailConfirmationTokenAA *
=AA+ ,
confirmationTokenAA- >
,AA> ?(
EmailConfirmationTokenExpiryBB 0
=BB1 2
DateTimeBB3 ;
.BB; <
UtcNowBB< B
.BBB C
AddHoursBBC K
(BBK L
$numBBL N
)BBN O
}CC 
;CC 
awaitEE 
_unitOfWorkEE !
.EE! "
UserManagerEE" -
.EE- .
CreateUserAsyncEE. =
(EE= >
userEE> B
)EEB C
;EEC D
awaitFF 
_unitOfWorkFF !
.FF! "
SaveChangesAsyncFF" 2
(FF2 3
)FF3 4
;FF4 5
varJJ 
userRoleJJ 
=JJ 
awaitJJ $
_unitOfWorkJJ% 0
.JJ0 1
UserManagerJJ1 <
.JJ< =
GetDefaultRoleAsyncJJ= P
(JJP Q
)JJQ R
;JJR S
ifKK 
(KK 
userRoleKK 
!=KK 
nullKK  $
)KK$ %
{LL 
awaitMM 
_unitOfWorkMM %
.MM% &
UserManagerMM& 1
.MM1 2
AddRoleToUserAsyncMM2 D
(MMD E
userMME I
,MMI J
userRoleMMK S
)MMS T
;MMT U
}NN 
await\\ 
_unitOfWork\\ !
.\\! "
SaveChangesAsync\\" 2
(\\2 3
)\\3 4
;\\4 5
var__ 
confirmationLink__ $
=__% &
$"__' )
$str__) T
{__T U
Uri__U X
.__X Y
EscapeDataString__Y i
(__i j
user__j n
.__n o
Email__o t
)__t u
}__u v
$str__v }
{__} ~
Uri	__~ Å
.
__Å Ç
EscapeDataString
__Ç í
(
__í ì
confirmationToken
__ì §
)
__§ •
}
__• ¶
"
__¶ ß
;
__ß ®
await`` 
_emailService`` #
.``# $&
SendEmailConfirmationAsync``$ >
(``> ?
user``? C
.``C D
Email``D I
,``I J
user``K O
.``O P
Name``P T
,``T U
confirmationLink``V f
)``f g
;``g h
_loggerbb 
.bb 
LogInformationbb &
(bb& '
$strbb' X
,bbX Y
userbbZ ^
.bb^ _
Emailbb_ d
)bbd e
;bbe f
_unitOfWorkff 
.ff 
CommitTransactionff -
(ff- .
transactionff. 9
)ff9 :
;ff: ;
returnhh 
ApiResponsehh "
<hh" #
objecthh# )
>hh) *
.hh* +
SuccessResulthh+ 8
(hh8 9
)hh9 :
;hh: ;
}ii 
catchjj 
(jj 
	Exceptionjj 
)jj 
{kk 
_unitOfWorknn 
.nn 
RollbackTransactionnn /
(nn/ 0
transactionnn0 ;
)nn; <
;nn< =
_loggeroo 
.oo 
LogErroroo  
(oo  !
$stroo! h
,ooh i
requestooj q
.ooq r
RegisterDtooor }
.oo} ~
Email	oo~ É
)
ooÉ Ñ
;
ooÑ Ö
throwpp 
;pp 
}qq 
}rr 	
)rr	 

;rr
 
}ss 
}tt Ã:
]D:\BootcampProject\src\04.Application\Feature\Authentications\Commands\RefreshTokenCommand.cs
	namespace 	
MyApp
 
. 
Application 
. 
Feature #
.# $
Authentications$ 3
.3 4
Commands4 <
;< =
public 
class 
RefreshTokenCommand  
:! "
IRequest# +
<+ ,
ApiResponse, 7
<7 8
AuthResponseDto8 G
>G H
>H I
{ 
public 
"
RefreshTokenRequestDto !
RefreshTokenDto" 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
} 
public 
class &
RefreshTokenCommandHandler '
:( )
IRequestHandler* 9
<9 :
RefreshTokenCommand: M
,M N
ApiResponseO Z
<Z [
AuthResponseDto[ j
>j k
>k l
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
ITokenService "
_tokenService# 0
;0 1
private 
readonly 
JwtSettings  
_jwtSettings! -
;- .
public 
&
RefreshTokenCommandHandler %
(% &
IUnitOfWork 

unitOfWork 
, 
IMapper 
mapper 
, 
ILogger 
< &
RefreshTokenCommandHandler *
>* +
logger, 2
,2 3
ITokenService 
tokenService "
," #
IEmailService 
emailService "
," #
IPasswordService 
passwordService (
,( )
JwtSettings 
jwtSettings 
)  
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_tokenService   
=   
tokenService   $
;  $ %
_jwtSettings!! 
=!! 
jwtSettings!! "
;!!" #
}"" 
public## 

async## 
Task## 
<## 
ApiResponse## !
<##! "
AuthResponseDto##" 1
>##1 2
>##2 3
Handle##4 :
(##: ;
RefreshTokenCommand##; N
request##O V
,##V W
CancellationToken##X i
cancellationToken##j {
)##{ |
{$$ 
var&& 
	principal&& 
=&& 
_tokenService&& %
.&&% &(
GetPrincipalFromExpiredToken&&& B
(&&B C
request&&C J
.&&J K
RefreshTokenDto&&K Z
.&&Z [
AccessToken&&[ f
)&&f g
;&&g h
if'' 

('' 
	principal'' 
=='' 
null'' 
)'' 
{(( 	
throw)) 
new)) 
ValidationException)) )
())) *
$str))* @
)))@ A
;))A B
}** 	
var,, 
claim,, 
=,, 
	principal,, 
.,, 
	FindFirst,, '
(,,' (

ClaimTypes,,( 2
.,,2 3
NameIdentifier,,3 A
),,A B
;,,B C
if-- 

(-- 
claim-- 
==-- 
null-- 
||-- 
!-- 
Guid-- "
.--" #
TryParse--# +
(--+ ,
claim--, 1
.--1 2
Value--2 7
,--7 8
out--9 <
Guid--= A
	userRefId--B K
)--K L
)--L M
{.. 	
throw// 
new// 
ValidationException// )
(//) *
$str//* @
)//@ A
;//A B
}00 	
var33 
user33 
=33 
await33 
_unitOfWork33 $
.33$ %
UserManager33% 0
.330 1
GetUserByRefIdAsync331 D
(33D E
	userRefId33E N
)33N O
;33O P
if44 

(44 
user44 
==44 
null44 
)44 
{55 	
throw;; 
new;; 
ValidationException;; )
(;;) *
$str;;* ;
);;; <
;;;< =
}<< 	
if== 

(== 
!== 
user== 
.== 
EmailConfirmed==  
)==  !
{>> 	
throw?? 
new?? $
AccountInactiveException?? .
(??. /
$str??/ M
)??M N
;??N O
}@@ 	
ifAA 

(AA 
!AA 
userAA 
.AA 
IsActiveAA 
)AA 
{BB 	
throwCC 
newCC $
AccountInactiveExceptionCC .
(CC. /
$strCC/ i
)CCi j
;CCj k
}DD 	
ifEE 

(EE 
userEE 
.EE 
RefreshTokenEE 
!=EE  
requestEE! (
.EE( )
RefreshTokenDtoEE) 8
.EE8 9
RefreshTokenEE9 E
)EEE F
{FF 	
throwGG 
newGG 
ValidationExceptionGG )
(GG) *
$strGG* D
)GGD E
;GGE F
}HH 	
ifII 

(II 
userII 
.II 
RefreshTokenExpiryII #
<=II$ &
DateTimeII' /
.II/ 0
UtcNowII0 6
)II6 7
{JJ 	
throwKK 
newKK 
ValidationExceptionKK )
(KK) *
$strKK* E
)KKE F
;KKF G
}LL 	
varNN 
accessTokenNN 
=NN 
_tokenServiceNN '
.NN' (
GenerateAccessTokenNN( ;
(NN; <
userNN< @
)NN@ A
;NNA B
varOO 
refreshTokenOO 
=OO 
_tokenServiceOO (
.OO( ) 
GenerateRefreshTokenOO) =
(OO= >
)OO> ?
;OO? @
userRR 
.RR 
RefreshTokenRR 
=RR 
refreshTokenRR (
;RR( )
userSS 
.SS 
RefreshTokenExpirySS 
=SS  !
DateTimeSS" *
.SS* +
UtcNowSS+ 1
.SS1 2
AddDaysSS2 9
(SS9 :
_jwtSettingsSS: F
.SSF G&
RefreshTokenExpirationDaysSSG a
)SSa b
;SSb c
awaitTT 
_unitOfWorkTT 
.TT 
SaveChangesAsyncTT *
(TT* +
)TT+ ,
;TT, -
varVV 
authResponseDtoVV 
=VV 
newVV !
AuthResponseDtoVV" 1
{WW 	
MessageXX 
=XX 
$strXX 4
,XX4 5
AccessTokenYY 
=YY 
accessTokenYY %
,YY% &
RefreshTokenZZ 
=ZZ 
refreshTokenZZ '
,ZZ' (
AccessTokenExpiry[[ 
=[[ 
DateTime[[  (
.[[( )
UtcNow[[) /
.[[/ 0

AddMinutes[[0 :
([[: ;
_jwtSettings[[; G
.[[G H(
AccessTokenExpirationMinutes[[H d
)[[d e
}\\ 	
;\\	 

return]] 
ApiResponse]] 
<]] 
AuthResponseDto]] *
>]]* +
.]]+ ,
SuccessResult]], 9
(]]9 :
authResponseDto]]: I
)]]I J
;]]J K
}^^ 
}__ ¨$
WD:\BootcampProject\src\04.Application\Feature\Authentications\Commands\LogoutCommand.cs
	namespace

 	
MyApp


 
.

 
Application

 
.

 
Feature

 #
.

# $
Authentications

$ 3
.

3 4
Commands

4 <
;

< =
public 
class 
LogoutCommand 
: 
IRequest %
<% &
ApiResponse& 1
<1 2
object2 8
>8 9
>9 :
{ 
public 

Guid 
	UserRefId 
{ 
get 
;  
set! $
;$ %
}& '
} 
public 
class  
LogoutCommandHandler !
:" #
IRequestHandler$ 3
<3 4
LogoutCommand4 A
,A B
ApiResponseC N
<N O
objectO U
>U V
>V W
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
private 
readonly 
ILogger 
<  
LogoutCommandHandler 1
>1 2
_logger3 :
;: ;
private 
readonly 
ITokenService "
_tokenService# 0
;0 1
private 
readonly 
IEmailService "
_emailService# 0
;0 1
private 
readonly 
IPasswordService %
_passwordService& 6
;6 7
private 
readonly 
JwtSettings  
_jwtSettings! -
;- .
public 
 
LogoutCommandHandler 
(  
IUnitOfWork 

unitOfWork 
, 
IMapper 
mapper 
, 
ILogger 
<  
LogoutCommandHandler $
>$ %
logger& ,
,, -
ITokenService 
tokenService "
," #
IEmailService 
emailService "
," #
IPasswordService 
passwordService (
,( )
JwtSettings   
jwtSettings   
)    
{!! 
_unitOfWork"" 
="" 

unitOfWork""  
;""  !
_mapper## 
=## 
mapper## 
;## 
_logger$$ 
=$$ 
logger$$ 
;$$ 
_tokenService%% 
=%% 
tokenService%% $
;%%$ %
_emailService&& 
=&& 
emailService&& $
;&&$ %
_passwordService'' 
='' 
passwordService'' *
;''* +
_jwtSettings(( 
=(( 
jwtSettings(( "
;((" #
})) 
public** 

async** 
Task** 
<** 
ApiResponse** !
<**! "
object**" (
>**( )
>**) *
Handle**+ 1
(**1 2
LogoutCommand**2 ?
request**@ G
,**G H
CancellationToken**I Z
cancellationToken**[ l
)**l m
{++ 
var,, 
user,, 
=,, 
await,, 
_unitOfWork,, $
.,,$ %
UserManager,,% 0
.,,0 1
GetUserByRefIdAsync,,1 D
(,,D E
request,,E L
.,,L M
	UserRefId,,M V
),,V W
;,,W X
if-- 

(-- 
user-- 
==-- 
null-- 
)-- 
{.. 	
throw// 
new// 
ValidationException// )
(//) *
$str//* ;
)//; <
;//< =
}00 	
user22 
.22 
RefreshToken22 
=22 
null22  
;22  !
user33 
.33 
RefreshTokenExpiry33 
=33  !
DateTime33" *
.33* +
UtcNow33+ 1
;331 2
await44 
_unitOfWork44 
.44 
SaveChangesAsync44 *
(44* +
)44+ ,
;44, -
_logger66 
.66 
LogInformation66 
(66 
$str66 =
,66= >
user66? C
.66C D
RefId66D I
)66I J
;66J K
return77 
ApiResponse77 
<77 
object77 !
>77! "
.77" #
SuccessResult77# 0
(770 1
)771 2
;772 3
}88 
}99 ˜K
VD:\BootcampProject\src\04.Application\Feature\Authentications\Commands\LoginCommand.cs
	namespace

 	
MyApp


 
.

 
Application

 
.

 
Feature

 #
.

# $
Authentications

$ 3
.

3 4
Commands

4 <
;

< =
public 
class 
LoginCommand 
: 
IRequest $
<$ %
ApiResponse% 0
<0 1
AuthResponseDto1 @
>@ A
>A B
{ 
public 

LoginRequestDto 
LoginDto #
{$ %
get& )
;) *
set+ .
;. /
}0 1
} 
public 
class 
LoginCommandHandler  
:! "
IRequestHandler# 2
<2 3
LoginCommand3 ?
,? @
ApiResponseA L
<L M
AuthResponseDtoM \
>\ ]
>] ^
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
ILogger 
< 
LoginCommandHandler 0
>0 1
_logger2 9
;9 :
private 
readonly 
ITokenService "
_tokenService# 0
;0 1
private 
readonly 
IPasswordService %
_passwordService& 6
;6 7
private 
readonly 
JwtSettings  
_jwtSettings! -
;- .
private 
const 
int 
MAX_FAILED_ATTEMPTS )
=* +
$num, -
;- .
private 
const 
int  
LOCKOUT_TIME_MINUTES *
=+ ,
$num- /
;/ 0
public 

LoginCommandHandler 
( 
IUnitOfWork 

unitOfWork 
, 
ILogger 
< 
LoginCommandHandler #
># $
logger% +
,+ ,
ITokenService 
tokenService "
," #
IPasswordService 
passwordService (
,( )
JwtSettings 
jwtSettings 
)  
{   
_unitOfWork!! 
=!! 

unitOfWork!!  
;!!  !
_logger"" 
="" 
logger"" 
;"" 
_tokenService## 
=## 
tokenService## $
;##$ %
_passwordService$$ 
=$$ 
passwordService$$ *
;$$* +
_jwtSettings%% 
=%% 
jwtSettings%% "
;%%" #
}&& 
public'' 

async'' 
Task'' 
<'' 
ApiResponse'' !
<''! "
AuthResponseDto''" 1
>''1 2
>''2 3
Handle''4 :
('': ;
LoginCommand''; G
request''H O
,''O P
CancellationToken''Q b
cancellationToken''c t
)''t u
{(( 
_logger)) 
.)) 
LogInformation)) 
()) 
$str)) A
,))A B
request))C J
.))J K
LoginDto))K S
.))S T
Email))T Y
)))Y Z
;))Z [
var-- 
user-- 
=-- 
await-- 
_unitOfWork-- $
.--$ %
UserManager--% 0
.--0 1
GetUserByEmailAsync--1 D
(--D E
request--E L
.--L M
LoginDto--M U
.--U V
Email--V [
)--[ \
;--\ ]
if.. 

(.. 
user.. 
==.. 
null.. 
).. 
{// 	
_logger00 
.00 

LogWarning00 
(00 
$str00 \
,00\ ]
request00^ e
.00e f
LoginDto00f n
.00n o
Email00o t
)00t u
;00u v
throw11 
new11 
ValidationException11 )
(11) *
$str11* F
)11F G
;11G H
}22 	
if33 

(33 
!33 
user33 
.33 
EmailConfirmed33  
)33  !
{44 	
throw55 
new55 
ValidationException55 )
(55) *
$str55* F
)55F G
;55G H
}66 	
if88 

(88 
!88 
user88 
.88 
IsActive88 
)88 
{99 	
throw:: 
new:: $
AccountInactiveException:: .
(::. /
$str::/ i
)::i j
;::j k
};; 	
if== 

(== 
user== 
.== 

LockoutEnd== 
.== 
HasValue== $
&&==% '
user==( ,
.==, -

LockoutEnd==- 7
.==7 8
Value==8 =
>==> ?
DateTime==@ H
.==H I
UtcNow==I O
)==O P
{>> 	
var?? 
remainingTime?? 
=?? 
(??  !
user??! %
.??% &

LockoutEnd??& 0
.??0 1
Value??1 6
-??7 8
DateTime??9 A
.??A B
UtcNow??B H
)??H I
.??I J
TotalMinutes??J V
;??V W
throw@@ 
new@@ "
AccountLockedException@@ ,
(@@, -
$"@@- /
$str@@/ V
{@@V W
Math@@W [
.@@[ \
Ceiling@@\ c
(@@c d
remainingTime@@d q
)@@q r
}@@r s
$str@@s |
"@@| }
)@@} ~
;@@~ 
}AA 	
ifDD 

(DD 
!DD 
_passwordServiceDD 
.DD 
VerifyPasswordDD ,
(DD, -
requestDD- 4
.DD4 5
LoginDtoDD5 =
.DD= >
PasswordDD> F
,DDF G
userDDH L
.DDL M
PasswordHashDDM Y
)DDY Z
)DDZ [
{EE 	
userGG 
.GG 
FailedLoginAttemptsGG $
++GG$ &
;GG& '
ifJJ 
(JJ 
userJJ 
.JJ 
FailedLoginAttemptsJJ (
>=JJ) +
MAX_FAILED_ATTEMPTSJJ, ?
)JJ? @
{KK 
userLL 
.LL 

LockoutEndLL 
=LL  !
DateTimeLL" *
.LL* +
UtcNowLL+ 1
.LL1 2

AddMinutesLL2 <
(LL< = 
LOCKOUT_TIME_MINUTESLL= Q
)LLQ R
;LLR S
_loggerMM 
.MM 

LogWarningMM "
(MM" #
$"MM# %
$strMM% >
{MM> ?
userMM? C
.MMC D
EmailMMD I
}MMI J
"MMJ K
)MMK L
;MML M
}NN 
awaitPP 
_unitOfWorkPP 
.PP 
SaveChangesAsyncPP .
(PP. /
)PP/ 0
;PP0 1
throwRR 
newRR 
ValidationExceptionRR )
(RR) *
$strRR* E
)RRE F
;RRF G
}SS 	
userVV 
.VV 
FailedLoginAttemptsVV  
=VV! "
$numVV# $
;VV$ %
userXX 
.XX 
LastLoginAtXX 
=XX 
DateTimeXX #
.XX# $
UtcNowXX$ *
;XX* +
var[[ 
accessToken[[ 
=[[ 
_tokenService[[ '
.[[' (
GenerateAccessToken[[( ;
([[; <
user[[< @
)[[@ A
;[[A B
var\\ 
refreshToken\\ 
=\\ 
_tokenService\\ (
.\\( ) 
GenerateRefreshToken\\) =
(\\= >
)\\> ?
;\\? @
user__ 
.__ 
RefreshToken__ 
=__ 
refreshToken__ (
;__( )
user`` 
.`` 
RefreshTokenExpiry`` 
=``  !
request``" )
.``) *
LoginDto``* 2
.``2 3

RememberMe``3 =
?aa 
DateTimeaa 
.aa 
UtcNowaa 
.aa 
AddDaysaa %
(aa% &
_jwtSettingsaa& 2
.aa2 30
$RefreshTokenRememberMeExpirationDaysaa3 W
)aaW X
:bb 
DateTimebb 
.bb 
UtcNowbb 
.bb 
AddDaysbb %
(bb% &
_jwtSettingsbb& 2
.bb2 3&
RefreshTokenExpirationDaysbb3 M
)bbM N
;bbN O
awaitcc 
_unitOfWorkcc 
.cc 
SaveChangesAsynccc *
(cc* +
)cc+ ,
;cc, -
_loggeree 
.ee 
LogInformationee 
(ee 
$stree D
,eeD E
usereeF J
.eeJ K
EmaileeK P
)eeP Q
;eeQ R
vargg 
authResponseDtogg 
=gg 
newgg !
AuthResponseDtogg" 1
{hh 	
Messageii 
=ii 
$strii (
,ii( )
AccessTokenjj 
=jj 
accessTokenjj %
,jj% &
RefreshTokenkk 
=kk 
refreshTokenkk '
,kk' (
AccessTokenExpiryll 
=ll 
DateTimell  (
.ll( )
UtcNowll) /
.ll/ 0

AddMinutesll0 :
(ll: ;
_jwtSettingsll; G
.llG H(
AccessTokenExpirationMinutesllH d
)lld e
}mm 	
;mm	 

returnnn 
ApiResponsenn 
<nn 
AuthResponseDtonn *
>nn* +
.nn+ ,
SuccessResultnn, 9
(nn9 :
authResponseDtonn: I
)nnI J
;nnJ K
}oo 
}pp ¬2
_D:\BootcampProject\src\04.Application\Feature\Authentications\Commands\ForgotPasswordCommand.cs
	namespace		 	
MyApp		
 
.		 
Application		 
.		 
Feature		 #
.		# $
Authentications		$ 3
.		3 4
Commands		4 <
;		< =
public 
class !
ForgotPasswordCommand "
:# $
IRequest% -
<- .
ApiResponse. 9
<9 :
object: @
>@ A
>A B
{ 
public 
$
ForgotPasswordRequestDto #
ForgotPasswordDto$ 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
} 
public 
class (
ForgotPasswordCommandHandler )
:* +
IRequestHandler, ;
<; <!
ForgotPasswordCommand< Q
,Q R
ApiResponseS ^
<^ _
object_ e
>e f
>f g
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
private 
readonly 
ILogger 
< (
ForgotPasswordCommandHandler 9
>9 :
_logger; B
;B C
private 
readonly 
ITokenService "
_tokenService# 0
;0 1
private 
readonly 
IEmailService "
_emailService# 0
;0 1
private 
readonly 
IPasswordService %
_passwordService& 6
;6 7
private 
readonly 
JwtSettings  
_jwtSettings! -
;- .
public 
(
ForgotPasswordCommandHandler '
(' (
IUnitOfWork 

unitOfWork 
, 
IMapper 
mapper 
, 
ILogger 
< (
ForgotPasswordCommandHandler ,
>, -
logger. 4
,4 5
ITokenService 
tokenService "
," #
IEmailService 
emailService "
," #
IPasswordService 
passwordService (
,( )
JwtSettings 
jwtSettings 
)  
{   
_unitOfWork!! 
=!! 

unitOfWork!!  
;!!  !
_mapper"" 
="" 
mapper"" 
;"" 
_logger## 
=## 
logger## 
;## 
_tokenService$$ 
=$$ 
tokenService$$ $
;$$$ %
_emailService%% 
=%% 
emailService%% $
;%%$ %
_passwordService&& 
=&& 
passwordService&& *
;&&* +
_jwtSettings'' 
='' 
jwtSettings'' "
;''" #
}(( 
public)) 

async)) 
Task)) 
<)) 
ApiResponse)) !
<))! "
object))" (
>))( )
>))) *
Handle))+ 1
())1 2!
ForgotPasswordCommand))2 G
request))H O
,))O P
CancellationToken))Q b
cancellationToken))c t
)))t u
{** 
_logger++ 
.++ 
LogInformation++ 
(++ 
$str++ M
,++M N
request++O V
.++V W
ForgotPasswordDto++W h
.++h i
Email++i n
)++n o
;++o p
var-- 
user-- 
=-- 
await-- 
_unitOfWork-- $
.--$ %
UserManager--% 0
.--0 1
GetUserByEmailAsync--1 D
(--D E
request--E L
.--L M
ForgotPasswordDto--M ^
.--^ _
Email--_ d
)--d e
;--e f
if00 

(00 
user00 
==00 
null00 
)00 
{11 	
_logger22 
.22 

LogWarning22 
(22 
$str22 Z
,22Z [
request22\ c
.22c d
ForgotPasswordDto22d u
.22u v
Email22v {
)22{ |
;22| }
return44 
ApiResponse44 
<44 
object44 %
>44% &
.44& '
SuccessResult44' 4
(444 5
)445 6
;446 7
}55 	
var88 
token88 
=88 
await88 
_tokenService88 '
.88' (+
GeneratePasswordResetTokenAsync88( G
(88G H
)88H I
;88I J
user99 
.99 
PasswordResetToken99 
=99  !
token99" '
;99' (
user:: 
.:: $
PasswordResetTokenExpiry:: %
=::& '
DateTime::( 0
.::0 1
UtcNow::1 7
.::7 8
AddHours::8 @
(::@ A
$num::A B
)::B C
;::C D
;::E F
await<< 
_unitOfWork<< 
.<< 
SaveChangesAsync<< *
(<<* +
)<<+ ,
;<<, -
var?? 
	resetLink?? 
=?? 
$"?? 
$str?? F
{??F G
Uri??G J
.??J K
EscapeDataString??K [
(??[ \
user??\ `
.??` a
Email??a f
)??f g
}??g h
$str??h o
{??o p
Uri??p s
.??s t
EscapeDataString	??t Ñ
(
??Ñ Ö
token
??Ö ä
)
??ä ã
}
??ã å
"
??å ç
;
??ç é
awaitBB 
_emailServiceBB 
.BB "
SendPasswordResetAsyncBB 2
(BB2 3
userBB3 7
.BB7 8
EmailBB8 =
,BB= >
userBB? C
.BBC D
NameBBD H
??BBI K
stringBBL R
.BBR S
EmptyBBS X
,BBX Y
	resetLinkBBZ c
)BBc d
;BBd e
_loggerDD 
.DD 
LogInformationDD 
(DD 
$strDD E
,DDE F
userDDG K
.DDK L
EmailDDL Q
)DDQ R
;DDR S
returnFF 
ApiResponseFF 
<FF 
objectFF !
>FF! "
.FF" #
SuccessResultFF# 0
(FF0 1
)FF1 2
;FF2 3
}GG 
}HH Ñ%
]D:\BootcampProject\src\04.Application\Feature\Authentications\Commands\ConfirmEmailCommand.cs
	namespace		 	
MyApp		
 
.		 
Application		 
.		 
Feature		 #
.		# $
Authentications		$ 3
.		3 4
Commands		4 <
;		< =
public 
class 
ConfirmEmailCommand  
:! "
IRequest# +
<+ ,
ApiResponse, 7
<7 8
object8 >
>> ?
>? @
{ 
public 
"
ConfirmEmailRequestDto !
ConfirmEmailDto" 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
} 
public 
class &
ConfirmEmailCommandHandler '
:( )
IRequestHandler* 9
<9 :
ConfirmEmailCommand: M
,M N
ApiResponseO Z
<Z [
object[ a
>a b
>b c
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
ILogger 
< &
ConfirmEmailCommandHandler 7
>7 8
_logger9 @
;@ A
public 
&
ConfirmEmailCommandHandler %
(% &
IUnitOfWork 

unitOfWork 
, 
IMapper 
mapper 
, 
ILogger 
< &
ConfirmEmailCommandHandler *
>* +
logger, 2
,2 3
ITokenService 
tokenService "
," #
IEmailService 
emailService "
," #
IPasswordService 
passwordService (
)( )
{ 
_unitOfWork 
= 

unitOfWork  
;  !
_logger 
= 
logger 
; 
} 
public 

async 
Task 
< 
ApiResponse !
<! "
object" (
>( )
>) *
Handle+ 1
(1 2
ConfirmEmailCommand2 E
requestF M
,M N
CancellationTokenO `
cancellationTokena r
)r s
{ 
var   
user   
=   
await   
_unitOfWork   $
.  $ %
UserManager  % 0
.  0 1
GetUserByEmailAsync  1 D
(  D E
request  E L
.  L M
ConfirmEmailDto  M \
.  \ ]
Email  ] b
)  b c
;  c d
if!! 

(!! 
user!! 
==!! 
null!! 
)!! 
{"" 	
_logger## 
.## 

LogWarning## 
(## 
$str## d
,##d e
request##f m
.##m n
ConfirmEmailDto##n }
.##} ~
Email	##~ É
)
##É Ñ
;
##Ñ Ö
throw$$ 
new$$ 
ValidationException$$ )
($$) *
$str$$* 9
)$$9 :
;$$: ;
}%% 	
if-- 

(-- 
user-- 
.-- "
EmailConfirmationToken-- '
!=--( *
request--+ 2
.--2 3
ConfirmEmailDto--3 B
.--B C"
EmailConfirmationToken--C Y
||--Z \
user--] a
.--a b(
EmailConfirmationTokenExpiry--b ~
<	-- Ä
DateTime
--Å â
.
--â ä
UtcNow
--ä ê
)
--ê ë
{.. 	
throw// 
new// 
ValidationException// )
(//) *
$str//* Q
)//Q R
;//R S
}00 	
user22 
.22 
EmailConfirmed22 
=22 
true22 "
;22" #
user33 
.33 "
EmailConfirmationToken33 #
=33$ %
null33& *
;33* +
user44 
.44 (
EmailConfirmationTokenExpiry44 )
=44* +
DateTime44, 4
.444 5
UtcNow445 ;
;44; <
await66 
_unitOfWork66 
.66 
SaveChangesAsync66 *
(66* +
)66+ ,
;66, -
_logger88 
.88 
LogInformation88 
(88 
$str88 C
,88C D
request88E L
.88L M
ConfirmEmailDto88M \
.88\ ]
Email88] b
)88b c
;88c d
return99 
ApiResponse99 
<99 
object99 !
>99! "
.99" #
SuccessResult99# 0
(990 1
)991 2
;992 3
}:: 
};; à,
_D:\BootcampProject\src\04.Application\Feature\Authentications\Commands\ChangePasswordCommand.cs
	namespace

 	
MyApp


 
.

 
Application

 
.

 
Feature

 #
.

# $
Authentications

$ 3
.

3 4
Commands

4 <
;

< =
public 
class !
ChangePasswordCommand "
:# $
IRequest% -
<- .
ApiResponse. 9
<9 :
object: @
>@ A
>A B
{ 
public 

Guid 
	UserRefId 
{ 
get 
;  
set! $
;$ %
}& '
public 
$
ChangePasswordRequestDto #
ChangePasswordDto$ 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
} 
public 
class (
ChangePasswordCommandHandler )
:* +
IRequestHandler, ;
<; <!
ChangePasswordCommand< Q
,Q R
ApiResponseS ^
<^ _
object_ e
>e f
>f g
{ 
private 
readonly 
IUnitOfWork  
_unitOfWork! ,
;, -
private 
readonly 
IMapper 
_mapper $
;$ %
private 
readonly 
ILogger 
< (
ChangePasswordCommandHandler 9
>9 :
_logger; B
;B C
private 
readonly 
ITokenService "
_tokenService# 0
;0 1
private 
readonly 
IEmailService "
_emailService# 0
;0 1
private 
readonly 
IPasswordService %
_passwordService& 6
;6 7
private 
readonly 
JwtSettings  
_jwtSettings! -
;- .
public 
(
ChangePasswordCommandHandler '
(' (
IUnitOfWork 

unitOfWork 
, 
IMapper 
mapper 
, 
ILogger 
< (
ChangePasswordCommandHandler ,
>, -
logger. 4
,4 5
ITokenService 
tokenService "
," #
IEmailService 
emailService "
," #
IPasswordService   
passwordService   (
,  ( )
JwtSettings!! 
jwtSettings!! 
)!!  
{"" 
_unitOfWork## 
=## 

unitOfWork##  
;##  !
_mapper$$ 
=$$ 
mapper$$ 
;$$ 
_logger%% 
=%% 
logger%% 
;%% 
_tokenService&& 
=&& 
tokenService&& $
;&&$ %
_emailService'' 
='' 
emailService'' $
;''$ %
_passwordService(( 
=(( 
passwordService(( *
;((* +
_jwtSettings)) 
=)) 
jwtSettings)) "
;))" #
}** 
public++ 

async++ 
Task++ 
<++ 
ApiResponse++ !
<++! "
object++" (
>++( )
>++) *
Handle+++ 1
(++1 2!
ChangePasswordCommand++2 G
request++H O
,++O P
CancellationToken++Q b
cancellationToken++c t
)++t u
{,, 
var-- 
user-- 
=-- 
await-- 
_unitOfWork-- $
.--$ %
UserManager--% 0
.--0 1
GetUserByRefIdAsync--1 D
(--D E
request--E L
.--L M
	UserRefId--M V
)--V W
;--W X
if.. 

(.. 
user.. 
==.. 
null.. 
).. 
{// 	
throw00 
new00 
ValidationException00 )
(00) *
$str00* ;
)00; <
;00< =
}11 	
if44 

(44 
!44 
_passwordService44 
.44 
VerifyPassword44 ,
(44, -
request44- 4
.444 5
ChangePasswordDto445 F
.44F G
Password44G O
,44O P
user44Q U
.44U V
PasswordHash44V b
)44b c
)44c d
{55 	
_logger66 
.66 

LogWarning66 
(66 
$str66 M
,66M N
user66O S
.66S T
RefId66T Y
)66Y Z
;66Z [
throw77 
new77 
ValidationException77 )
(77) *
$str77* =
)77= >
;77> ?
}88 	
user;; 
.;; 
PasswordHash;; 
=;; 
_passwordService;; ,
.;;, -
HashPassword;;- 9
(;;9 :
request;;: A
.;;A B
ChangePasswordDto;;B S
.;;S T
NewPassword;;T _
);;_ `
;;;` a
user<< 
.<< 
	UpdatedAt<< 
=<< 
DateTime<< !
.<<! "
UtcNow<<" (
;<<( )
_logger>> 
.>> 
LogInformation>> 
(>> 
$str>> Q
,>>Q R
user>>S W
.>>W X
RefId>>X ]
)>>] ^
;>>^ _
return?? 
ApiResponse?? 
<?? 
object?? !
>??! "
.??" #
SuccessResult??# 0
(??0 1
)??1 2
;??2 3
}@@ 
}AA ≠
BD:\BootcampProject\src\04.Application\Configuration\JwtSettings.cs
	namespace 	
MyApp
 
. 
Infrastructure 
. 
Configuration ,
{ 
public 

class 
JwtSettings 
{ 
public		 
string		 
	SecretKey		 
{		  !
get		" %
;		% &
set		' *
;		* +
}		, -
=		. /
string		0 6
.		6 7
Empty		7 <
;		< =
public

 
string

 
Issuer

 
{

 
get

 "
;

" #
set

$ '
;

' (
}

) *
=

+ ,
string

- 3
.

3 4
Empty

4 9
;

9 :
public 
string 
Audience 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
string/ 5
.5 6
Empty6 ;
;; <
public 
int (
AccessTokenExpirationMinutes /
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
public 
int &
RefreshTokenExpirationDays -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
public 
int 0
$RefreshTokenRememberMeExpirationDays 7
{8 9
get: =
;= >
set? B
;B C
}D E
public 
bool 
ValidateIssuer "
{# $
get% (
;( )
set* -
;- .
}/ 0
=1 2
true3 7
;7 8
public 
bool 
ValidateAudience $
{% &
get' *
;* +
set, /
;/ 0
}1 2
=3 4
true5 9
;9 :
public 
bool 
ValidateLifetime $
{% &
get' *
;* +
set, /
;/ 0
}1 2
=3 4
true5 9
;9 :
public 
bool $
ValidateIssuerSigningKey ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
=; <
true= A
;A B
public 
int 
	ClockSkew 
{ 
get "
;" #
set$ '
;' (
}) *
=+ ,
$num- .
;. /
} 
} ™
LD:\BootcampProject\src\04.Application\Configuration\AuthorizationPolicies.cs
	namespace 	
MyApp
 
. 
Infrastructure 
. 
Configuration ,
{ 
public 

static 
class !
AuthorizationPolicies -
{ 
public 
const 
string 
RequireAdminRole ,
=- .
$str/ A
;A B
public 
const 
string 
RequireUserRole +
=, -
$str. ?
;? @
public 
const 
string (
RequireManageUsersPermission 8
=9 :
$str; Y
;Y Z
public 
static 
void 
ConfigurePolicies ,
(, - 
AuthorizationOptions- A
optionsB I
)I J
{ 	
options 
. 
	AddPolicy 
( 
RequireAdminRole .
,. /
policy0 6
=>7 9
policy 
. 
RequireRole "
(" #
$str# *
,* +
$str, 8
)8 9
)9 :
;: ;
options"" 
."" 
	AddPolicy"" 
("" 
RequireUserRole"" -
,""- .
policy""/ 5
=>""6 8
policy## 
.## 
RequireRole## "
(##" #
$str### )
,##) *
$str##+ 2
,##2 3
$str##4 @
)##@ A
)##A B
;##B C
options(( 
.(( 
	AddPolicy(( 
((( (
RequireManageUsersPermission(( :
,((: ;
policy((< B
=>((C E
policy)) 
.)) 
RequireAssertion)) '
())' (
context))( /
=>))0 2
context** 
.** 
User**  
.**  !
IsInRole**! )
(**) *
$str*** 1
)**1 2
||**3 5
context++ 
.++ 
User++  
.++  !
IsInRole++! )
(++) *
$str++* 6
)++6 7
||++8 :
context,, 
.,, 
User,,  
.,,  !
HasClaim,,! )
(,,) *
$str,,* 6
,,,6 7
$str,,8 J
),,J K
),,K L
),,L M
;,,M N
}.. 	
}// 
}00 „
/D:\BootcampProject\src\04.Application\Class1.cs
	namespace 	
MyApp
 
. 
Application 
; 
public 
class 
Class1 
{ 
} 